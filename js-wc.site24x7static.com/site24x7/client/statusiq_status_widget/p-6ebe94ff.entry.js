import{r as t,h as s}from"./p-18e8c058.js";const e=class{constructor(s){t(this,s),this.widgetText="Current Status",this.widgetRefreshInterval=3e5,this.showWidget=!0}async connectedCallback(){}async updateStatus(t){t?fetch(t+"/sp/api/u/status").then((t=>{t.json().then((s=>{if(200!==t.status)return console.error("StatusIQ BadgeWidget: Problem while fetching status page's status, response",s),void(this.showWidget=!1);this.statusResponse=s,this.showWidget=!0}))})).catch((function(t){console.error("StatusIQ BadgeWidget: Error while fetching status page's status",JSON.stringify(t)),this.showStatusBar=!1,this.showLoading=!1})):console.error("StatusIQ BadgeWidget: Invalid status page url",t)}disconnectedCallback(){this.fetchStatusTimer&&window.clearInterval(this.fetchStatusTimer)}async componentWillLoad(){await this.updateStatus(this.src),console.log("StatusIQ BadgeWidget: Refresh Interval: "+this.widgetRefreshInterval),this.fetchStatusTimer||(this.fetchStatusTimer=window.setInterval((()=>{this.updateStatus(this.src)}),this.widgetRefreshInterval))}statusClassName(t){return"status-widget__status-text "+t.trim().replace(/\s+/g,"-").toLowerCase()}sanitizeURL(t){return t.replace(/^(https?:|)\/\//,"")}render(){if(this.showWidget&&this.statusResponse){const t=this.statusResponse.data.statuspage_url,e=this.statusResponse.data.current_status.severity,i=this.statusResponse.data.current_status.description,a="Current status of "+this.sanitizeURL(t)+". Click here to view the status page. This widget is powered by StatusIQ";return s("div",null,s("a",{class:"status-widget status-widget--badge",href:t,target:"_blank",rel:"noopener",title:a},s("div",{class:"status-widget__container"},s("div",{class:"status-widget__badge-text"},this.widgetText),s("div",{class:this.statusClassName(e)},i))))}return null}};e.style=':host{display:inline-block;-webkit-box-sizing:border-box;box-sizing:border-box;--font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";--white-color:#ffffff;--badge-text-color:#555555;--status-text-default-color:#aaaaaa;--status-operational-color:#2ecc71;--status-informational-color:#6c757d;--status-degraded-performance-color:#f0c231;--status-partial-outage-color:#e67e22;--status-major-outage-color:#e94b35;--status-maintenance-color:#438bce}a.status-widget--badge,a.status-widget--badge:visited,a.status-widget--badge:hover{display:inline-block;text-decoration:none;color:var(--white-color)}.status-widget--badge .status-widget__container{font-family:var(--font-family);font-size:12px;line-height:20px;color:var(--white-color);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;height:24px;padding:4px}.status-widget--badge .status-widget__status-text{background-color:var(--status-text-default-color);padding:4px 8px;line-height:16px;border-radius:0 2px 2px 0;text-shadow:0px 0.1em 0px rgba(0, 0, 0, 0.2)}.status-widget--badge .status-widget__status-text.operational{background-color:var(--status-operational-color)}.status-widget--badge .status-widget__status-text.informational{background-color:var(--status-informational-color)}.status-widget--badge .status-widget__status-text.degraded-performance{background-color:var(--status-degraded-performance-color)}.status-widget--badge .status-widget__status-text.partial-outage{background-color:var(--status-partial-outage-color)}.status-widget--badge .status-widget__status-text.major-outage{background-color:var(--status-major-outage-color)}.status-widget--badge .status-widget__status-text.under-maintenance{background-color:var(--status-maintenance-color)}.status-widget--badge .status-widget__badge-text{line-height:16px;border-radius:2px 0 0 2px;color:var(--white-color);background-color:var(--badge-text-color);padding:4px 8px;text-shadow:0px 0.1em 0px rgba(0, 0, 0, 0.2)}';const i=class{constructor(s){t(this,s),this.widgetRefreshInterval=3e5,this.showWidget=!0}async connectedCallback(){}async updateStatus(t){t?fetch(t+"/sp/api/u/status").then((t=>{t.json().then((s=>{if(200!==t.status)return console.error("StatusIQ BasicWidget: Problem while fetching status page's status, response",s),void(this.showWidget=!1);this.statusResponse=s,this.showWidget=!0}))})).catch((function(t){console.error("StatusIQ BasicWidget: Error while fetching status page's status",JSON.stringify(t)),this.showStatusBar=!1,this.showLoading=!1})):console.error("StatusIQ BasicWidget: Invalid status page url",t)}disconnectedCallback(){this.fetchStatusTimer&&window.clearInterval(this.fetchStatusTimer)}async componentWillLoad(){await this.updateStatus(this.src),console.log("StatusIQ BasicWidget: Refresh Interval: "+this.widgetRefreshInterval),this.fetchStatusTimer||(this.fetchStatusTimer=window.setInterval((()=>{this.updateStatus(this.src)}),this.widgetRefreshInterval))}statusClassName(t){return"status-widget__status-indicator "+t.trim().replace(/\s+/g,"-").toLowerCase()}sanitizeURL(t){return t.replace(/^(https?:|)\/\//,"")}render(){if(this.showWidget&&this.statusResponse){const t=this.statusResponse.data.statuspage_url,e=this.statusResponse.data.current_status.severity,i=this.statusResponse.data.current_status.description,a="Current status of "+this.sanitizeURL(t)+". Click here to view the status page. This widget is powered by StatusIQ";return s("div",null,s("a",{class:"status-widget",href:t,target:"_blank",rel:"noopener",title:a},s("div",{class:"status-widget__container"},s("div",{class:this.statusClassName(e)}),s("div",{class:"status-widget__status-text"},i))))}return null}};i.style=':host{display:inline-block;-webkit-box-sizing:border-box;box-sizing:border-box;--font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";--status-indicator-default-color:#aaaaaa;--status-operational-color:#2ecc71;--status-informational-color:#6c757d;--status-degraded-performance-color:#f0c231;--status-partial-outage-color:#e67e22;--status-major-outage-color:#e94b35;--status-maintenance-color:#438bce}a.status-widget,a.status-widget:hover{display:inline-block;color:inherit;text-decoration:none}.status-widget .status-widget__container{font-family:var(--font-family);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;height:24px;padding:4px}.status-widget .status-widget__status-indicator{width:16px;height:16px;border-radius:50%;background-color:var(--status-indicator-default-color);line-height:16px}.status-widget .status-widget__status-indicator.operational{background-color:var(--status-operational-color)}.status-widget .status-widget__status-indicator.informational{background-color:var(--status-informational-color)}.status-widget .status-widget__status-indicator.degraded-performance{background-color:var(--status-degraded-performance-color)}.status-widget .status-widget__status-indicator.partial-outage{background-color:var(--status-partial-outage-color)}.status-widget .status-widget__status-indicator.major-outage{background-color:var(--status-major-outage-color)}.status-widget .status-widget__status-indicator.under-maintenance{background-color:var(--status-maintenance-color)}.status-widget .status-widget__status-text{margin-left:8px;line-height:16px;font-size:16px}';const a=class{constructor(s){t(this,s),this.widgetType="basic",this.widgetText="Current Status",this.widgetPosition="bottom-right",this.widgetRefreshInterval=3e5}componentWillLoad(){let t=this.widgetRefreshInterval,s=3e5;isNaN(t)?(console.error("Invalid Refresh Interval: "+t),this.widgetRefreshInterval=s):t<s&&(console.log("Using default refresh interval: 300000 instead of provided value: "+t),this.widgetRefreshInterval=s)}render(){return"badge"==this.widgetType?s("badge-widget",{src:this.src,widgetText:this.widgetText,widgetRefreshInterval:this.widgetRefreshInterval}):"sticky"==this.widgetType?s("sticky-widget",{src:this.src,widgetPosition:this.widgetPosition,widgetColors:this.widgetColors,widgetRefreshInterval:this.widgetRefreshInterval}):s("basic-widget",{src:this.src,widgetRefreshInterval:this.widgetRefreshInterval})}},o=["January","February","March","April","May","June","July","August","September","October","November","December"];function r(t,s=!1,e=!1){const i=t.getDate(),a=o[t.getMonth()],r=t.getFullYear(),n=t.getHours();let l=t.getMinutes();return l<10&&(l="0"+l),s?`Last updated ${s} at ${n}:${l}`:e?`Last updated on ${i} ${a} at ${n}:${l}`:`Last updated on ${i} ${a} ${r} at ${n}:${l}`}const n=class{constructor(s){t(this,s),this.widgetPosition="bottom-right",this.widgetRefreshInterval=3e5,this.showWidget=!0,this.disableWidget=!1}async connectedCallback(){}async updateStatus(t){t?fetch(t+"/sp/api/u/sticky_status_widget").then((t=>{if(200!==t.status)return console.error("StatusIQ StickyWidget: Problem while getting Status Page Status, Status Code",t.status),void(this.showWidget=!1);t.json().then((t=>{this.statusResponse=t,this.showWidget=!0}))})).catch((function(t){console.error("StatusIQ StickyWidget: updateStatus Error",JSON.stringify(t)),this.showStatusBar=!1,this.showLoading=!1})):console.error("StatusIQ StickyWidget: Invalid status page url",t)}disconnectedCallback(){console.log("StatusIQ StickyWidget: Status widget disconnected"),this.fetchStatusTimer&&window.clearInterval(this.fetchStatusTimer)}async componentWillLoad(){await this.updateStatus(this.src),console.log("StatusIQ StickyWidget: Refresh Interval: "+this.widgetRefreshInterval),this.fetchStatusTimer||(this.fetchStatusTimer=window.setInterval((()=>{this.updateStatus(this.src)}),this.widgetRefreshInterval))}getStickyWidgetPositionClass(t){return t?"top-right"===t?"status-widget-sticky--top-right":"top-left"===t?"status-widget-sticky--top-left":"bottom-left"===t?"status-widget-sticky--bottom-left":"status-widget-sticky--bottom-right":"status-widget-sticky--bottom-right"}getStickyWidgetStatusClass(t){return"status-widget-sticky--"+t.trim().replace(/\s+/g,"-").toLowerCase()}getStickyWidgetCustomStyles(t,s){const e=["Major Outage","Partial Outage","Degraded Performance","Informational"];let i={backgroundColor:"",color:""};try{if(!this.widgetColors)return i;{let a=JSON.parse(t);if(a)return e.includes(s)?(i={backgroundColor:a.incident_bg_color,color:a.incident_text_color},i):(i={backgroundColor:a.maintenance_bg_color,color:a.maintenance_text_color},i)}}catch(a){return console.error("StatusIQ StickyWidget: Error while parsing widget colors: "+this.widgetColors+", error: "+a),i}}getStickyWidgetClasses(t,s,e){return e?`status-widget-sticky status-widget-sticky--customised ${this.getStickyWidgetPositionClass(t)} ${this.getStickyWidgetStatusClass(s)}`:`status-widget-sticky ${this.getStickyWidgetPositionClass(t)} ${this.getStickyWidgetStatusClass(s)}`}formatDateISOString(t){const s=t.indexOf("+");return`${t.substring(0,s+3)}:${t.substring(s+3)}`}dismissWidget(){this.disableWidget=!0,this.disconnectedCallback()}render(){if(!this.disableWidget&&this.showWidget&&this.statusResponse){const t=this.src,e=this.statusResponse.data.total_incident_count,i=()=>!!this.widgetColors;if(e>0&&e<=1){let e=this.statusResponse.data.active_incident_info.incident_title,a=this.statusResponse.data.active_incident_info.incident_severity,o=this.statusResponse.data.active_incident_info.status_updated_at,n=this.getStickyWidgetCustomStyles(this.widgetColors,a);return s("div",{class:this.getStickyWidgetClasses(this.widgetPosition,a,i()),style:{backgroundColor:n.backgroundColor,color:n.color}},s("button",{class:"status-widget-sticky__dismiss",onClick:()=>this.dismissWidget(),"aria-label":"Dismiss"},"×"),s("div",null,s("h1",{class:"status-widget-sticky__title"},e),s("p",{class:"status-widget-sticky__subtitle"},function(t){if(!t)return null;const s="object"==typeof t?t:new Date(t),e=new Date,i=new Date(e-864e5),a=Math.round((e-s)/1e3),o=Math.round(a/60),n=e.toDateString()===s.toDateString(),l=i.toDateString()===s.toDateString(),c=e.getFullYear()===s.getFullYear();return a<5?"Last updated now":a<60?`Last updated ${a} seconds ago`:a<90?"Last updated about a minute ago":o<60?`Last updated ${o} minutes ago`:n?r(s,"today"):l?r(s,"yesterday"):c?r(s,!1,!0):r(s)}(o)),s("a",{class:"status-widget-sticky__link",href:t,target:"_blank",rel:"noopener noreferrer"},"View latest updates")))}if(e>1){let a=this.statusResponse.data.active_incident_info.incident_title,o=this.statusResponse.data.active_incident_info.incident_severity,r=this.getStickyWidgetCustomStyles(this.widgetColors,o);return s("div",{class:this.getStickyWidgetClasses(this.widgetPosition,o,i()),style:{backgroundColor:r.backgroundColor,color:r.color}},s("button",{class:"status-widget-sticky__dismiss",onClick:()=>this.dismissWidget(),"aria-label":"Dismiss"},"×"),s("div",null,s("h1",{class:"status-widget-sticky__title"},a),s("p",{class:"status-widget-sticky__subtitle"},`+ ${e-1} more active incident(s)`),s("a",{class:"status-widget-sticky__link",href:t,target:"_blank",rel:"noopener noreferrer"},"View latest updates")))}if(0==e&&this.statusResponse.data.upcoming_maintenance){let e="Under Maintenance",a=this.getStickyWidgetCustomStyles(this.widgetColors,e),o=this.statusResponse.data.upcoming_maintenance.maintenance_title,r=this.formatDateISOString(this.statusResponse.data.upcoming_maintenance.maintenance_will_begin_at),n=new Date(r).toUTCString(),l=this.formatDateISOString(this.statusResponse.data.upcoming_maintenance.maintenance_will_end_at),c=new Date(l).toUTCString(),d=s("span",null,"From ",s("time",{class:"status-widget-sticky__time",dateTime:r},n)," to ",s("time",{class:"status-widget-sticky__time",dateTime:l},c));return s("div",{class:this.getStickyWidgetClasses(this.widgetPosition,e,i()),style:{backgroundColor:a.backgroundColor,color:a.color}},s("button",{class:"status-widget-sticky__dismiss",onClick:()=>this.dismissWidget(),"aria-label":"Dismiss"},"×"),s("div",null,s("h1",{class:"status-widget-sticky__title"},o),s("p",{class:"status-widget-sticky__subtitle"},d),s("a",{class:"status-widget-sticky__link",href:t,target:"_blank",rel:"noopener noreferrer"},"View maintenance details")))}return null}return null}};n.style=':host{display:inline-block;-webkit-box-sizing:border-box;box-sizing:border-box;--font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";--white-color:#ffffff;--status-operational-color:#2ecc71;--status-informational-color:#6c757d;--status-degraded-performance-color:#f0c231;--status-partial-outage-color:#e67e22;--status-major-outage-color:#e94b35;--status-maintenance-color:#438bce}.status-widget-sticky{font-family:var(--font-family);background-color:var(--white-color);color:black;min-height:75px;width:300px;position:fixed;z-index:100;border-radius:4px;border-left:4px solid currentColor;padding:16px 32px 16px 16px;-webkit-box-shadow:rgb(9 30 66 / 31%) 0px 0px 1px, rgb(9 30 66 / 25%) 0px 20px 32px -8px;box-shadow:rgb(9 30 66 / 31%) 0px 0px 1px, rgb(9 30 66 / 25%) 0px 20px 32px -8px}.status-widget-sticky--top-right{top:24px;right:24px}.status-widget-sticky--top-left{top:24px;left:24px}.status-widget-sticky--bottom-right{bottom:24px;right:24px}.status-widget-sticky--bottom-left{bottom:24px;left:24px}.status-widget-sticky--operational{color:var(--status-operational-color)}.status-widget-sticky--informational{color:var(--status-informational-color)}.status-widget-sticky--degraded-performance{color:var(--status-degraded-performance-color)}.status-widget-sticky--partial-outage{color:var(--status-partial-outage-color)}.status-widget-sticky--major-outage{color:var(--status-major-outage-color)}.status-widget-sticky--under-maintenance{color:var(--status-maintenance-color)}.status-widget-sticky__dismiss{cursor:pointer;color:rgba(0, 0, 0, 0.32);position:absolute;top:12px;right:8px;outline:0;border:0;background:transparent;font-size:20px}.status-widget-sticky__title{font-size:16px;margin-top:0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.status-widget-sticky__subtitle{font-size:14px;margin-top:0;line-height:1.5}.status-widget-sticky__time{font-weight:600}.status-widget-sticky__link,.status-widget-sticky__link:visited,.status-widget-sticky__link:hover{color:inherit;font-size:14px}.status-widget-sticky.status-widget-sticky--customised[style]{border-left:0px}.status-widget-sticky.status-widget-sticky--customised[style]>.status-widget-sticky__dismiss{color:currentColor}';export{e as badge_widget,i as basic_widget,a as statusiq_status_widget,n as sticky_widget}