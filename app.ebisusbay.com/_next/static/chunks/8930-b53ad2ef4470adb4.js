(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8930],{28279:function(e,n,t){"use strict";t.d(n,{A:function(){return d}});var s=t(76341),r=t(67462),a=t(85893),i=t(31708),o=t(776),l=t(9740);t(67294);var c=t(5459),u=t.n(c);n.Z=function(e){return(0,a.jsxs)(i.r,(0,r._)((0,s._)({templateAreas:'\n              "tlc top trc"\n              "left main right"\n              "blc bottom brc"\n            ',gridTemplateRows:"50px 1fr 50px",gridTemplateColumns:"50px 1fr 50px",gap:0},e),{children:[(0,a.jsx)(o.P,{area:"tlc",children:(0,a.jsx)(l.E,{src:"/img/ryoshi/bubble/cb_top_left.png"})}),(0,a.jsx)(o.P,{area:"top",children:(0,a.jsx)(l.E,{src:"/img/ryoshi/bubble/cb_top.png",w:"full",h:"50px"})}),(0,a.jsx)(o.P,{area:"trc",children:(0,a.jsx)(l.E,{src:"/img/ryoshi/bubble/cb_top_right.png"})}),(0,a.jsx)(o.P,{area:"left",children:(0,a.jsx)(l.E,{src:"/img/ryoshi/bubble/cb_left.png",w:"50px",h:"full"})}),(0,a.jsx)(o.P,{area:"main",bg:"#403C39",children:e.children}),(0,a.jsx)(o.P,{area:"right",children:(0,a.jsx)(l.E,{src:"/img/ryoshi/bubble/cb_right.png",w:"50px",h:"full"})}),(0,a.jsx)(o.P,{area:"blc",children:(0,a.jsx)(l.E,{src:"/img/ryoshi/bubble/cb_bottom_left.png"})}),(0,a.jsx)(o.P,{area:"bottom",children:(0,a.jsx)(l.E,{src:"/img/ryoshi/bubble/cb_bottom.png",w:"full",h:"50px"})}),(0,a.jsx)(o.P,{area:"brc",children:(0,a.jsx)(l.E,{src:"/img/ryoshi/bubble/cb_bottom_right.png"})})]}))};var d=function(e){var n=e.text,t=e.onComplete;return(0,a.jsx)(u(),{onInit:function(e){Array.isArray(n)||(n=[n]),n.forEach(function(n){e.typeString(n).pauseFor(800)}),e.callFunction(function(){t&&t()}).start()},options:{delay:20,cursor:""}})}},84530:function(e,n,t){"use strict";t.d(n,{Z:function(){return rU}});var s,r,a,i,o,l,c,u,d,h,p,f,x,m,g,y,b,j,v,w=t(98732),k=t(85893),C=t(67294),S=t(30137),_=t(70655),T=t(55706),A=t.n(T),F=t(62723),z=t(204),N=t(23100),R=t(96272),I=t(88911),E=t(91669),P=t(95034),H=t(7754),M=t(36979),L=t(26444),O=t(76341),W=t(67462),D=t(68146),B=t(99046),V=t.n(B),Z=t(39849),U=t(9740),X=t(54641),q=t(56877),G=t(89154),K=t(295),Y=t(92752),Q=t(31963),J=t(31948),$=t(44504),ee=t(55819),en=t(73793),et=t(47018),es=t(89783),er=t(41872),ea=t(3471),ei=t(80627),eo=t(64461),el=t(58533),ec=t(11163),eu=t(22920),ed=t(59417),eh=t(67814),ep=t(58370),ef=t(98203),ex=t(1751),em=t(40156),eg=t(14418),ey=t(79790),eb=t(12498),ej=t(34288),ev=(0,C.createContext)(null),ew=(0,C.memo)(function(e){var n,t,s,r=e.nft,a=(e.canStake,e.isStaked,e.onAdd),i=e.onRemove,o=(0,ec.useRouter)(),l=(0,ey.Gd)("/collection/".concat(r.nftAddress,"/").concat(r.nftId)),c=(0,w._)((0,C.useState)(!1),2);c[0],c[1],(0,er.C)(function(e){return e.user}),(0,er.C)(function(e){return e.ryoshiStakingCart});var u=(0,em.V)(l.toString()).onCopy,d=(0,C.useContext)(ev),h=function(){var e,n=p();n>0&&n>=(null!==(e=r.balance)&&void 0!==e?e:1)?i():a()},p=function(){return d.filter(function(e){return e.nftId===r.nftId&&(0,ey.w4)(e.nftAddress,r.nftAddress)}).length};return(0,k.jsx)(N.xu,{className:"card eb-nft__card h-100 shadow","data-group":!0,borderColor:p()>0?"#F48F0C":"inherit",borderWidth:p()>0?"3px":"1px",_hover:{borderColor:"#F48F0C"},borderRadius:"19px",children:(0,k.jsx)(N.xu,{_groupHover:{background:(0,eb.ff)("#FFFFFF","#404040"),transition:"0.3s ease"},borderRadius:"15px",transition:"0.3s ease",height:"100%",children:(0,k.jsxs)(z.k,{direction:"column",height:"100%",children:[(0,k.jsxs)("div",{className:"card-img-container position-relative",children:[(0,k.jsx)(k.Fragment,{children:p()>0?(0,k.jsx)(N.xu,{top:0,right:0,position:"absolute",zIndex:2,p:2,cursor:"pointer",onClick:i,children:r.balance&&r.balance>1?(0,k.jsx)(N.xu,{rounded:"full",bg:"dodgerblue",border:"2px solid white",w:6,h:6,textAlign:"center",fontWeight:"bold",fontSize:"sm",children:p()}):(0,k.jsx)(eh.G,{icon:ej.f8k,size:"xl",style:{background:"dodgerblue",color:"white"},className:"rounded-circle"})}):(0,k.jsx)(N.xu,{_groupHover:{display:"inline",transition:"0.3s ease",opacity:1},transition:"0.3s ease",display:"inline",opacity:0,top:0,right:0,position:"absolute",zIndex:2,p:2,cursor:"pointer",onClick:a,children:(0,k.jsx)(eh.G,{icon:ed.KtF,size:"xl",style:{background:"white",color:"grey"},className:"rounded-circle"})})}),(0,k.jsx)(N.xu,{_groupHover:{transform:"scale(1.05)",transition:"0.3s ease"},transition:"0.3s ease",transform:"scale(1.0)",cursor:"pointer",onClick:function(){return h()},children:(0,k.jsx)(ef.yZ,{image:(0,ex.aL)(r.nftAddress,r.image),title:r.name,newTab:!0,className:"card-img-top marketplace",height:440,width:440,usePlaceholder:!0})})]}),r.rank&&"number"==typeof r.rank&&(0,k.jsxs)("div",{className:"badge bg-rarity text-wrap mt-1 mx-1",children:["Rank: #",r.rank]}),(0,k.jsx)("div",{className:"d-flex flex-column p-2 pb-1",children:(0,k.jsx)("div",{className:"card-title mt-auto",children:(0,k.jsx)("span",{onClick:h,style:{cursor:"pointer"},children:r.balance&&r.balance>1?(0,k.jsxs)(eg.X,{as:"h6",size:"sm",children:[r.name," (x",r.balance,")"]}):(0,k.jsx)(eg.X,{as:"h6",size:"sm",children:r.name})})})}),(0,k.jsx)(P.L,{}),(0,k.jsx)(N.xu,{borderBottomRadius:15,p:2,children:(0,k.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,k.jsx)(P.L,{}),(0,k.jsx)(ep.ZN,{options:(t=[],(s=p())>0&&s>=(null!==(n=r.balance)&&void 0!==n?n:1)?t.push({icon:ed.Kl4,label:"Unstake",handleClick:a}):t.push({icon:ed.r8p,label:"Stake",handleClick:a}),t.push({icon:ed.sqG,label:"View Details",handleClick:function(){o.push(l)}}),t.push({icon:ed.nNP,label:"Copy link",handleClick:function(){u(),eu.Am.success("Link copied!")}}),t),children:(0,k.jsx)(eh.G,{icon:ed.cNd,style:{cursor:"pointer"},className:"my-auto"})})]})})]})})})}),ek=t(69301),eC=t(21794),eS=(0,t(40078).I)({displayName:"ShrineIcon",viewBox:"0 0 874 874",path:[(0,k.jsx)("path",{d:"M200.8325,468.2429l-46.4688,7.0349v-124.93C97.691,348.7586,59.8513,323.6817,44.7744,266.433c26.6124,13.9656,51.5245,10.8991,76.4343-.19q68.1669-30.3454,136.5184-60.275c4.6-2.0143,6.485-4.4011,6.3555-9.576-.3651-14.5842-.1275-29.1834-.1275-44.464-39.7036-.9913-67.1585-17.8492-79.4638-58.5125,23.3948,12.0891,43.4326,4.2166,63.5415-4.9511q40.9721-18.68,82.3492-36.46c5.2976-2.2715,11.5181-2.3908,18.0367-3.6419V32.7164h19.0365c.2736-5.615.5027-10.3149.7573-15.5394h40.2368c.2467,4.753.48,9.25.7483,14.4166h56.6585c.2371-4.4395.4885-9.1458.7685-14.3863h40.24c.22,4.6569.4324,9.1557.69,14.6054H526.12V48.5594c25.0363,1.8065,44.4564,16.1071,66.0659,24.511,15.4376,6.0038,30.4773,13.0567,45.568,19.92,16.913,7.6917,33.9007,9.7413,52.3328.7712-4.3913,18.93-13.8082,33.0394-28.3713,43.5876-14.6194,10.5889-31.5656,14.1759-50.3972,14.3824,0,16.6-.1526,32.6121.2246,48.6118.04,1.6918,2.9036,3.96,4.9437,4.8673,48.3285,21.4831,96.5765,43.1591,145.1726,64.0232,22.31,9.5785,45.0923,9.6325,67.2014-2.062-3.0007,45.3607-46.0234,78.87-107.4529,83.0159V494.5028c-14.9584,4.3895-28.5509,8.6395-42.3214,12.2022-2.8141.728-6.2948-1.6951-9.47-1.7q-74.5928-.1246-149.1858.0526a12.4264,12.4264,0,0,0-2.5279.82v53.0624c-8.4618-2.8985-15.3695-4.6717-21.7486-7.5973-8.3-3.8066-19.4437-6.6359-23.3509-13.3728-4.1552-7.1645-1.4306-18.4044-1.452-27.8654-.0712-31.62-.027-63.2412-.0271-94.8619v-9.8384H376.3933v91.152l-46.7547-14.7278V405.356H200.8325ZM674.3752,350.5641H200.8023V375.94H674.3752ZM518.1684,473.4811H673.9646v-68.1H518.1684Zm-120.809-270.89h80.1753V151.8491H397.3594Zm167.1415.2091V151.8687H507.43V202.8Zm-196.7829-.1348V152.1243H310.591v50.5413Z"}),(0,k.jsx)("path",{d:"M819.6557,632.6169c-10.3764,16.9605-19.2283,32.8656-29.457,47.83-17.67,25.8506-36.1224,51.1742-62.5182,69.2389-39.4818,27.02-83.3962,34.6692-130.2074,30.1429-62.49-6.0423-119.1456-30.65-175.9845-54.8171-39.4284-16.7642-78.8458-33.4405-121.4794-40.9936-56.5039-10.01-108.0469,1.0856-154.8666,34.2025-5.3674,3.7965-10.6076,7.7729-16.7127,12.2578a106.4684,106.4684,0,0,1-1.3194-48.6092c13.6622-65.51,58.3126-102.6477,118.7112-121.0543,61.8327-18.8436,123.1762-10.509,183.4265,11.8823,46.9419,17.4453,89.7166,42.9492,134.2182,65.1306,36.2021,18.0446,73.4824,32.883,113.5987,39.9393,48.0188,8.4463,90.03-4.558,127.556-34.4868,4.0377-3.22,7.907-6.6515,11.867-9.97A21.2188,21.2188,0,0,1,819.6557,632.6169Z"}),(0,k.jsx)("path",{d:"M708.4628,769.3345C556.9423,902.1378,294.79,908.3905,130.1806,736.084c13.2539-8.7709,25.7616-18.13,39.2419-25.7732,46.8234-26.5493,96.5416-29.4625,147.9368-16.6573,43.18,10.7584,83.5,29.1653,124.2179,46.4712,41.0582,17.4509,82.5765,33.494,126.6122,41.7774,46.1878,8.6882,91.6991,8.1471,135.504-11.6175a22.8737,22.8737,0,0,1,3.1658-1.2726C707.3283,768.88,707.9259,769.206,708.4628,769.3345Z"}),(0,k.jsx)("path",{d:"M782.9038,650.6721a136.9516,136.9516,0,0,1-54.4533,21.5953c-39.7319,6.8336-77.1918-3.4046-112.8694-18.4342-37.3574-15.7372-73.3925-34.7225-109.5351-53.2079-48.3315-24.72-97.7521-46.8715-152.0433-53.4479-54.6655-6.6216-108.4311-2.32-156.5485,28.434-34.6645,22.156-62.1927,50.5217-73.4649,91.7435-4.6939,17.1654-6.2078,38.6319-2.92,59.3827C72.0038,671.82,39.9791,610.4127,22.7287,540.5657a405.3326,405.3326,0,0,1,86.6275-44.9741,327.6076,327.6076,0,0,1,134.73-21.327c54.5665,2.8775,107.0753,16.3337,156.4694,38.8,53.565,24.3638,105.4353,52.45,158.0823,78.8372,28.122,14.0952,55.7717,29.3122,84.6167,41.7441C687.814,652.8509,733.6565,666.4154,782.9038,650.6721Z"}),(0,k.jsx)("path",{d:"M519.5292,564.0388c44.618-5.5854,85.0682-22.0867,125.9835-37.4935,25.82-9.7223,52.1843-18.7247,79.0394-24.8035,43.3417-9.8107,81.999,3.6347,116.8359,29.7057,11.245,8.4154,11.4054,8.5277,7.5148,22.0405-3.3944,11.79-7.5977,23.3481-10.9389,35.1516-8.0462,28.4248-29.6369,43.2368-54.6855,54.1524-30.8424,13.44-62.2372,9.4348-93.418,1.0155-42.57-11.4944-80.9173-32.7257-119.7623-52.7293C553.1063,582.3281,536.3774,573.0676,519.5292,564.0388Z"})]}),e_=t(31606),eT=t(88163),eA=t(84150),eF=t(2877),ez=t(64146),eN=t(2593),eR=t(35553),eI=t(1931),eE=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"previousAdmin","type":"address"},{"indexed":false,"internalType":"address","name":"newAdmin","type":"address"}],"name":"AdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"beacon","type":"address"}],"name":"BeaconUpgraded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint8","name":"version","type":"uint8"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":true,"internalType":"address","name":"contractAddress","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Staked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":true,"internalType":"address","name":"contractAddress","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Unstaked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"implementation","type":"address"}],"name":"Upgraded","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"STAKE_APPROVAL_TYPEHASH","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"digestsCompleted","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"user","type":"address"},{"internalType":"address[]","name":"contractAddress","type":"address[]"},{"internalType":"uint256[]","name":"tokenId","type":"uint256[]"},{"internalType":"uint256[]","name":"amount","type":"uint256[]"},{"internalType":"uint256","name":"nonce","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"}],"internalType":"struct RyoshiStaker.StakeApproval","name":"_approval","type":"tuple"},{"internalType":"bytes","name":"signature","type":"bytes"}],"name":"endStake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"address","name":"contractAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getStakedAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"user","type":"address"},{"internalType":"address[]","name":"contractAddress","type":"address[]"},{"internalType":"uint256[]","name":"tokenId","type":"uint256[]"},{"internalType":"uint256[]","name":"amount","type":"uint256[]"},{"internalType":"uint256","name":"nonce","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"}],"internalType":"struct RyoshiStaker.StakeApproval","name":"_approval","type":"tuple"}],"name":"hashApproval","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC1155BatchReceived","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC1155Received","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC721Received","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"proxiableUUID","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"user","type":"address"},{"internalType":"address[]","name":"contractAddress","type":"address[]"},{"internalType":"uint256[]","name":"tokenId","type":"uint256[]"},{"internalType":"uint256[]","name":"amount","type":"uint256[]"},{"internalType":"uint256","name":"nonce","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"}],"internalType":"struct RyoshiStaker.StakeApproval","name":"_approval","type":"tuple"},{"internalType":"bytes","name":"signature","type":"bytes"}],"name":"startStake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newImplementation","type":"address"}],"name":"upgradeTo","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newImplementation","type":"address"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"upgradeToAndCall","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"userStakes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]'),eP=t(49085),eH=t(61710),eM=t(57213),eL=(0,ek.eG)(),eO=function(){var e,n=(0,w._)((0,C.useState)({loading:!1,error:null}),2),t=n[0],s=n[1],r=(0,w._)((0,eP.Z)(),2),a=(r[0],r[1]),i=(0,er.C)(function(e){return e.user});return eM.Z.Features,[(e=(0,S._)(function(e,n){var r,o,l,c,u,d,h,p,f,x,m,g,y,b;return(0,_.__generator)(this,function(j){switch(j.label){case 0:if(!i.address)throw"User is not logged in";if(o=null===(r=(0,eH.ms)())||void 0===r?void 0:r.signature)return[3,2];return[4,a()];case 1:o=j.sent().signature,j.label=2;case 2:if(!o)return[3,13];j.label=3;case 3:j.trys.push([3,12,,13]),l=new ez.CH(eL.contracts.barracks,eE,i.provider.getSigner()),c=[],u=!0,d=!1,h=void 0;try{for(p=function(){var n=x.value;e.some(function(e){return(0,ey.w4)(e.nftAddress,n.contractAddress)&&e.nftId===n.tokenId})||c.push(n)},f=n[Symbol.iterator]();!(u=(x=f.next()).done);u=!0)p()}catch(e){d=!0,h=e}finally{try{u||null==f.return||f.return()}finally{if(d)throw h}}if(m=e.filter(function(e){return!n.some(function(n){return(0,ey.w4)(e.nftAddress,n.contractAddress)&&e.nftId===n.tokenId})}),!(c.length>0))return[3,7];return[4,eo.s.withoutKey().ryoshiDynasties.requestBarracksUnstakeAuthorization(c.map(function(e){return{nftAddress:e.contractAddress,nftId:e.tokenId,amount:Number(e.amount)}}),i.address,o)];case 4:return g=j.sent(),[4,l.endStake(g.data.unstakeApproval,g.data.signature)];case 5:return[4,j.sent().wait()];case 6:j.sent(),j.label=7;case 7:if(!(m.length>0))return[3,11];return[4,eo.s.withoutKey().ryoshiDynasties.requestBarracksStakeAuthorization(m,i.address,o)];case 8:return y=j.sent(),[4,l.startStake(y.data.stakeApproval,y.data.signature)];case 9:return[4,j.sent().wait()];case 10:j.sent(),j.label=11;case 11:return s((0,W._)((0,O._)({},t),{loading:!1,error:null})),[3,13];case 12:throw b=j.sent(),s((0,W._)((0,O._)({},t),{loading:!1,error:b})),b;case 13:return[2]}})}),function(n,t){return e.apply(this,arguments)}),t]},eW=t(13935),eD=t(59788),eB=(0,C.createContext)(null),eV=t(96839),eZ=t.n(eV),eU=t(76684),eX=t(36024),eq=t(5077),eG=t(77484),eK=t(21673),eY=t(64657),eQ=t(5197),eJ=t(56371),e$=function(){var e=(0,w._)((0,C.useState)(!1),2);e[0],e[1],(0,er.C)(function(e){return e.user});var n=(0,C.useContext)(eB).config;return(0,k.jsx)(eU.K,{spacing:3,className:eZ().className,fontSize:{base:"xs",md:"sm"},children:(0,k.jsxs)(N.xu,{p:4,children:[(0,k.jsx)(I.x,{children:"Each stakeable NFT is eligible for bonus troops. These bonus troops are used to increase your chances of winning battles. Higher ranked NFTs can yield a larger amount of troops. However, some collections are restricted to where NFTs must contain specific traits. For example, NFTs from the holiday collections must contain a weapon."}),(0,k.jsxs)(eU.K,{direction:"row",align:"center",bg:"#f8a211",p:2,rounded:"sm",mt:4,children:[(0,k.jsx)(q.J,{as:eh.G,icon:ed.eHv,color:"#333",boxSize:8}),(0,k.jsx)(I.x,{fontSize:"14",color:"#333",fontWeight:"bold",children:"Warning: Once staked, NFTs can only be unstaked if you have neither deployed nor delegated any troops. If troops have been deployed or delegated, then the staked NFTs are locked until the next game."})]}),(0,k.jsxs)(eX.U,{fontSize:"sm",mt:4,children:[(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"How are bonus troops calculated?"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsx)(eY.H,{pb:4,children:(0,k.jsx)(I.x,{children:"The amount of bonus troops depends on the collection type and rank of the NFT. See the below FAQ items for more information specific to each collection"})})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Ryoshi VIP Information"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsx)(I.x,{children:'Ryoshi VIP NFTs must contain any of the following for the "Tools" trait:'}),(0,k.jsx)(eQ.QI,{children:n.barracks.staking.nft.collections.find(function(e){return"ryoshi-tales-vip"===e.slug}).traits[0].values.map(function(e){return(0,k.jsx)(eQ.HC,{children:(0,ey.Qs)(e.toUpperCase())},e)})}),(0,k.jsx)(I.x,{mt:4,children:"Eligible NFTs will then be calculated:"}),(0,k.jsx)(eQ.QI,{children:n.barracks.staking.nft.collections.find(function(e){return"ryoshi-tales-vip"===e.slug}).multipliers.map(function(e,n){return(0,k.jsxs)(eQ.HC,{children:[e.percentile,"th percentile: ",(0,eJ.commify)(e.value)]},n)})})]})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Ryoshi Halloween Information"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsx)(I.x,{children:'Ryoshi Halloween NFTs must contain any value for the "Tools" trait EXCEPT:'}),(0,k.jsx)(eQ.QI,{children:n.barracks.staking.nft.collections.find(function(e){return"ryoshi-tales-halloween"===e.slug}).traits[0].values.map(function(e){return(0,k.jsx)(eQ.HC,{children:(0,ey.Qs)(e.toUpperCase())},e)})}),(0,k.jsx)(I.x,{mt:4,children:"Eligible NFTs will then be calculated:"}),(0,k.jsx)(eQ.QI,{children:n.barracks.staking.nft.collections.find(function(e){return"ryoshi-tales-halloween"===e.slug}).multipliers.map(function(e,n){return(0,k.jsxs)(eQ.HC,{children:[e.percentile,"th percentile: ",(0,eJ.commify)(e.value)]},n)})})]})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Ryoshi Christmas Information"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsx)(I.x,{children:'Ryoshi Christmas NFTs must contain any of the following for the "Miscellaneous" trait:'}),(0,k.jsx)(eQ.QI,{children:n.barracks.staking.nft.collections.find(function(e){return"ryoshi-tales-christmas"===e.slug}).traits[0].values.map(function(e){return(0,k.jsx)(eQ.HC,{children:(0,ey.Qs)(e.toUpperCase())},e)})}),(0,k.jsx)(I.x,{mt:4,children:"Eligible NFTs will then be calculated:"}),(0,k.jsx)(eQ.QI,{children:n.barracks.staking.nft.collections.find(function(e){return"ryoshi-tales-christmas"===e.slug}).multipliers.map(function(e,n){return(0,k.jsxs)(eQ.HC,{children:[e.percentile,"th percentile: ",(0,eJ.commify)(e.value)]},n)})})]})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Fortune Guards Information"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsx)(I.x,{children:"All Fortune Guards NFTs are eligible. Bonus is based on the NFT ID:"}),(0,k.jsx)(eQ.QI,{children:n.barracks.staking.nft.collections.find(function(e){return"fortune-guards"===e.slug}).ids.map(function(e,n){return(0,k.jsxs)(eQ.HC,{children:[e.id,": ",(0,eJ.commify)(e.bonus)]},n)})})]})]})]})]})})},e0=t(80434),e2=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"previousAdmin","type":"address"},{"indexed":false,"internalType":"address","name":"newAdmin","type":"address"}],"name":"AdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"beacon","type":"address"}],"name":"BeaconUpgraded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint8","name":"version","type":"uint8"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint8","name":"unlockType","type":"uint8"},{"indexed":false,"internalType":"uint8","name":"slot","type":"uint8"},{"components":[{"internalType":"uint256","name":"fortuneAmount","type":"uint256"},{"internalType":"uint256[]","name":"resourcesIds","type":"uint256[]"},{"internalType":"uint256[]","name":"resourcesAmounts","type":"uint256[]"}],"indexed":false,"internalType":"struct SeasonUnlocks.Recipe","name":"recipe","type":"tuple"}],"name":"RecipeSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint8","name":"unlockType","type":"uint8"},{"indexed":false,"internalType":"uint8","name":"slot","type":"uint8"}],"name":"Unlock","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"implementation","type":"address"}],"name":"Upgraded","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TYPE_BANK","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TYPE_BARRACKS","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"fortune","outputs":[{"internalType":"contract IERC20Burnable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint8","name":"_type","type":"uint8"}],"name":"getRecipesForType","outputs":[{"components":[{"internalType":"uint256","name":"fortuneAmount","type":"uint256"},{"internalType":"uint256[]","name":"resourcesIds","type":"uint256[]"},{"internalType":"uint256[]","name":"resourcesAmounts","type":"uint256[]"}],"internalType":"struct SeasonUnlocks.Recipe[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_fortune","type":"address"},{"internalType":"address","name":"_resources","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"proxiableUUID","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint8","name":"","type":"uint8"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"recipes","outputs":[{"internalType":"uint256","name":"fortuneAmount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"resources","outputs":[{"internalType":"contract IERC1155Burnable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint8","name":"_type","type":"uint8"},{"internalType":"uint8","name":"_slot","type":"uint8"},{"components":[{"internalType":"uint256","name":"fortuneAmount","type":"uint256"},{"internalType":"uint256[]","name":"resourcesIds","type":"uint256[]"},{"internalType":"uint256[]","name":"resourcesAmounts","type":"uint256[]"}],"internalType":"struct SeasonUnlocks.Recipe","name":"_recipe","type":"tuple"}],"name":"setRecipe","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint8","name":"_type","type":"uint8"},{"internalType":"uint8","name":"slot","type":"uint8"}],"name":"unlock","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint8","name":"","type":"uint8"},{"internalType":"address","name":"","type":"address"}],"name":"unlocks","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newImplementation","type":"address"}],"name":"upgradeTo","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newImplementation","type":"address"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"upgradeToAndCall","outputs":[],"stateMutability":"payable","type":"function"}]'),e1=t(41578),e4=(0,ek.eG)(),e3=new eF.r(e4.rpc.read),e5={ryoshiVip:"ryoshi-tales-vip",ryoshiHalloween:"ryoshi-tales-halloween",ryoshiChristmas:"ryoshi-tales-christmas",fortuneGuards:"fortune-guards"},e6=function(e){var n,t,s=e.isOpen,r=e.onClose,a=(0,er.C)(function(e){return e.user}),i=(0,ea.useQueryClient)(),o=(0,C.useContext)(eB),l=o.config,c=o.refreshUser,u=(0,w._)((0,C.useState)(e5.ryoshiVip),2),d=u[0],h=u[1],p=(0,w._)((0,C.useState)(),2),f=p[0],x=p[1],m=(0,w._)((0,C.useState)([]),2),g=m[0],y=m[1],b=(0,w._)((0,C.useState)([]),2),j=b[0],v=b[1],T=(0,w._)((0,C.useState)(),2),A=T[0],F=T[1],R=null===(n=e4.collections.find(function(e){return e.slug===d}))||void 0===n?void 0:n.address,E=function(e){return function(n){h(e)}},P=(0,ea.useQuery)({queryKey:["BarracksSlotUnlockContext",a.address],queryFn:(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:return[4,(e=new ez.CH(e4.contracts.seasonUnlocks,e2,e3)).unlocks(2,a.address)];case 1:return n=t.sent(),[4,e.getRecipesForType(2)];case 2:return[2,{unlocks:n,recipes:t.sent()}]}})}),refetchOnWindowFocus:!1,enabled:!!a.address,initialData:{unlocks:0,recipes:[]}}),H=P.data,M=P.refetch,B=(0,C.useCallback)(function(e){var n=j.filter(function(n){return n.nftId===e.nftId&&(0,ey.w4)(n.nftAddress,e.nftAddress)}).length,t=0===n||n<(null!==(a=e.balance)&&void 0!==a?a:1),s=j.length<H.unlocks+1,r=j.length<l.barracks.staking.nft.maxSlots;if(t&&s&&r){var a,i,o,c,u=null===(i=e4.collections.find(function(n){return(0,ey.w4)(n.address,e.nftAddress)}))||void 0===i?void 0:i.slug,d=l.barracks.staking.nft.collections.find(function(e){return e.slug===u}),h=e.rank/d.maxSupply*100,p=(null===(o=d.multipliers.sort(function(e,n){return e.percentile-n.percentile}).find(function(e){return h<=e.percentile}))||void 0===o?void 0:o.value)||0,f=(null===(c=d.ids.find(function(n){return n.id.toString()===e.nftId}))||void 0===c?void 0:c.bonus)||0;v((0,D._)(j).concat([{nftAddress:e.nftAddress,nftId:e.nftId,image:e.image,rank:e.rank,multiplier:p+f,isAlreadyStaked:!1}]))}},[j,H]),V=(0,C.useCallback)(function(e,n){v(j.filter(function(t){return t.nftId!==n||!(0,ey.w4)(t.nftAddress,e)}))},[j]),U=(0,C.useCallback)(function(){i.invalidateQueries(["BarracksStakedNfts",a.address]),i.invalidateQueries(["BarracksUnstakedNfts",a.address,f]),i.setQueryData(["BarracksUnstakedNfts",a.address,f],function(e){return e?(e.pages=e.pages.map(function(e){return e.data=e.data.filter(function(e){return!j.some(function(n){return n.nftId===e.nftId&&(0,ey.w4)(n.nftAddress,e.nftAddress)})}),e}),e):[]}),y((0,D._)(g).concat((0,D._)(j.map(function(e){return{amount:"1",contractAddress:e.nftAddress,id:"",tokenId:e.nftId,type:eD.hu.BARRACKS,user:a.address}})))),v((0,D._)(j.map(function(e){return(0,W._)((0,O._)({},e),{isAlreadyStaked:!0})}))),c()},[i,g,j,a.address]);return(0,C.useEffect)(function(){if(s){var e;i.fetchQuery(["BarracksStakedNfts",a.address],function(){return eo.s.withoutKey().ryoshiDynasties.getStakedTokens(a.address,eD.hu.BARRACKS)}).then((e=(0,S._)(function(e){var n,t,s,r,a,i,o,c;return(0,_.__generator)(this,function(u){switch(u.label){case 0:y(e),n=[],t=!0,s=!1,r=void 0,u.label=1;case 1:u.trys.push([1,6,7,8]),a=function(){var e,t,s,r,a,i,c,u;return(0,_.__generator)(this,function(d){switch(d.label){case 0:return e=o.value,[4,(0,eW.y)(e.contractAddress,e.tokenId)];case 1:return(t=d.sent())&&(a=l.barracks.staking.nft.collections.find(function(e){return(0,ey.w4)(e.address,t.collection.address)}),i=t.nft.rank/a.maxSupply*100,c=(null===(s=a.multipliers.sort(function(e,n){return e.percentile-n.percentile}).find(function(e){return i<=e.percentile}))||void 0===s?void 0:s.value)||0,u=(null===(r=a.ids.find(function(e){return e.id.toString()===t.nft.nftId}))||void 0===r?void 0:r.bonus)||0,n.push({nftAddress:e.contractAddress,nftId:e.tokenId,image:t.nft.image,rank:t.nft.rank,multiplier:c+u,isAlreadyStaked:!0})),[2]}})},i=e[Symbol.iterator](),u.label=2;case 2:if(t=(o=i.next()).done)return[3,5];return[5,(0,_.__values)(a())];case 3:u.sent(),u.label=4;case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return c=u.sent(),s=!0,r=c,[3,8];case 7:try{t||null==i.return||i.return()}finally{if(s)throw r}return[7];case 8:return v(n),[2]}})}),function(n){return e.apply(this,arguments)}))}},[s]),(0,C.useEffect)(function(){x(R)},[d]),(0,C.useEffect)(function(){a.address||r()},[a.address]),(0,k.jsx)(L.x,{isOpen:s,onClose:function(){v([]),y([]),x(R),h(e5.ryoshiVip),r()},title:"Stake NFTs",size:"5xl",isCentered:!1,utilBtnTitle:A?(0,k.jsx)(e_.R,{}):(0,k.jsx)(k.Fragment,{children:"?"}),onUtilBtnClick:function(){A?F(void 0):F("faq")},children:"faq"===A?(0,k.jsx)(e$,{}):(0,k.jsxs)(ev.Provider,{value:j,children:[(0,k.jsx)(I.x,{align:"center",p:2,children:"Ryoshi Tales NFTs can be staked to earn extra battle units per slot. Some NFTs may require a weapon trait. Staked NFTs remain staked for the duration of the game while troops have been deployed or delegated."}),(0,k.jsx)(e8,{pendingNfts:j,stakedNfts:g,onRemove:V,onStaked:U,slotUnlockContext:H,refetchSlotUnlockContext:M}),(0,k.jsxs)(N.xu,{p:4,children:[(0,k.jsx)(z.k,{direction:"row",justify:"center",mb:2,children:(0,k.jsxs)(Z.M,{columns:{base:2,sm:4},children:[(0,k.jsx)(eA.Z,{isActive:d===e5.ryoshiVip,onClick:E(e5.ryoshiVip),children:"VIP"}),(0,k.jsx)(eA.Z,{isActive:d===e5.fortuneGuards,onClick:E(e5.fortuneGuards),children:"Guards"}),(0,k.jsx)(eA.Z,{isActive:d===e5.ryoshiHalloween,onClick:E(e5.ryoshiHalloween),children:"Halloween"}),(0,k.jsx)(eA.Z,{isActive:d===e5.ryoshiChristmas,onClick:E(e5.ryoshiChristmas),children:"Christmas"})]})}),(0,k.jsx)(N.xu,{children:(0,k.jsx)(e7,{isReady:s,collection:f,address:null!==(t=a.address)&&void 0!==t?t:void 0,onAdd:B,onRemove:V})})]})]})})},e8=function(e){var n,t=e.pendingNfts,s=e.stakedNfts,r=e.onRemove,a=e.onStaked,i=e.slotUnlockContext,o=e.refetchSlotUnlockContext,l=(0,er.C)(function(e){return e.user}),c=(0,w._)((0,C.useState)(!1),2),u=c[0],d=c[1],h=(0,w._)((0,C.useState)(""),2),p=h[0],f=h[1],x=(0,w._)(eO(),2),m=x[0];x[1];var g=(0,w._)((0,C.useState)([eN.O$.from(0),!1]),2),y=g[0],b=g[1],j=(0,w._)((0,C.useState)(),2),v=j[0],T=j[1],A=(0,C.useCallback)((0,S._)(function(){var e,n,r,i,o,c,u,h,p,x,g;return(0,_.__generator)(this,function(y){switch(y.label){case 0:if(0===t.length&&0===s.length)return[2];e=!1,y.label=1;case 1:y.trys.push([1,13,14,15]),d(!0),f("Approving"),n=[],r=!0,i=!1,o=void 0,y.label=2;case 2:y.trys.push([2,9,10,11]),c=t[Symbol.iterator](),y.label=3;case 3:if(r=(u=c.next()).done)return[3,8];if(h=u.value,n.includes(h.nftAddress))return[3,7];return[4,(p=new ez.CH(h.nftAddress,eI._k,l.provider.getSigner())).isApprovedForAll(l.address.toLowerCase(),e4.contracts.barracks)];case 4:if(y.sent())return[3,7];return[4,p.setApprovalForAll(e4.contracts.barracks,!0)];case 5:return[4,y.sent().wait()];case 6:y.sent(),n.push(h.nftAddress),y.label=7;case 7:return r=!0,[3,3];case 8:return[3,11];case 9:return x=y.sent(),i=!0,o=x,[3,11];case 10:try{r||null==c.return||c.return()}finally{if(i)throw o}return[7];case 11:return e=!0,f("Staking"),[4,m(t.map(function(e){return(0,W._)((0,O._)({},e),{amount:1})}),s)];case 12:return y.sent(),a(),eu.Am.success("Staking successful!"),[3,15];case 13:return console.log(g=y.sent()),e?eu.Am.error((0,e1.O)(g)):eu.Am.error("Approval failed. Please try again."),[3,15];case 14:return d(!1),f(""),[7];case 15:return[2]}})}),[t,p,u]),F=(n=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:return[4,new ez.CH(e4.contracts.fortune,e0,e3).allowance(null===(e=l.address)||void 0===e?void 0:e.toLowerCase(),e4.contracts.seasonUnlocks)];case 1:return n=t.sent(),[4,new ez.CH(e4.contracts.resources,eI.qZ,e3).isApprovedForAll(l.address,e4.contracts.seasonUnlocks)];case 2:return b([n,t.sent()]),[2]}})}),function(){return n.apply(this,arguments)});return(0,C.useEffect)(function(){T(void 0),l.address&&F()},[l.address]),(0,k.jsxs)(N.xu,{children:[(0,k.jsxs)(E.g,{my:6,px:4,spacing:8,children:[(0,k.jsx)(Z.M,{columns:{base:2,sm:3,md:5},gap:2,children:(0,D._)([,,,,,].fill(0)).map(function(e,n){return(0,k.jsx)(N.xu,{w:"120px",children:t[n]?(0,k.jsxs)(N.xu,{position:"relative",children:[(0,k.jsxs)(N.xu,{bg:"#376dcf",p:2,rounded:"xl",border:"2px dashed",borderColor:t[n].isAlreadyStaked?"transparent":"#ffa71c",children:[(0,k.jsx)(N.xu,{width:100,height:100,children:(0,k.jsx)(U.E,{src:eC.Z.translate(t[n].image).fixedWidth(100,100),rounded:"lg"})}),(0,k.jsxs)(z.k,{fontSize:"xs",justify:"space-between",mt:1,children:[(0,k.jsx)(N.xu,{verticalAlign:"top",children:t[n].rank&&(0,k.jsxs)(X.U,{spacing:1,children:[(0,k.jsx)(q.J,{as:eh.G,icon:ed.O7Q}),(0,k.jsx)(N.xu,{as:"span",children:t[n].rank})]})}),(0,k.jsx)(E.g,{align:"end",spacing:0,fontWeight:"bold",children:t[n].multiplier&&(0,k.jsxs)(N.xu,{children:["+ ",t[n].multiplier]})})]})]}),(0,k.jsx)(N.xu,{position:"absolute",top:0,right:0,pe:"3px",children:(0,k.jsx)(G.h,{icon:(0,k.jsx)(eT.T,{boxSize:2}),"aria-label":"Remove",bg:"gray.800",_hover:{bg:"gray.600"},size:"xs",rounded:"full",onClick:function(){return r(t[n].nftAddress,t[n].nftId)}})})]}):(0,k.jsx)(N.xu,{position:"relative",overflow:"hidden",children:(0,k.jsx)(N.xu,{p:2,rounded:"xl",cursor:"pointer",children:(0,k.jsxs)(N.xu,{width:100,height:100,bgColor:"#716A67",rounded:"xl",position:"relative",children:[(0,k.jsx)(eS,{boxSize:"100%",fill:"#B1ADAC"}),n>i.unlocks&&(0,k.jsx)(z.k,{position:"absolute",top:0,left:0,w:100,h:100,fontSize:"sm",bg:"#333333DD",rounded:"xl",justify:"center",fontWeight:"semibold",textAlign:"center",onClick:function(){return T(n)},children:(0,k.jsx)(H.M,{children:v===n?(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/unlock.png").convert(),alt:"unlockIcon",boxSize:12}):(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/lock.png").convert(),alt:"lockIcon",boxSize:12})})})]})})})},n)})}),(0,k.jsx)(N.xu,{ms:8,my:{base:4,md:"auto"},textAlign:"center",children:(0,k.jsx)(L.t,{minW:"150px",onClick:A,isLoading:u,disabled:u,stickyIcon:!0,loadingText:p,children:"Save"})})]}),void 0!==v&&i.recipes.length>0&&(0,k.jsx)(e9,{isOpen:!0,onClose:function(){T(void 0),o()},initialApprovalState:y,slotUnlockContext:i})]})},e7=function(e){var n=e.isReady,t=e.address,s=e.collection,r=e.onAdd,a=e.onRemove,i=(0,C.useContext)(eB),o=(0,ea.useInfiniteQuery)(["BarracksUnstakedNfts",t,s],function(){return ei.Z.getWallet(t,{collection:[s],sortBy:"rank",direction:"asc"})},{getNextPageParam:function(e,n){return n[n.length-1].hasNextPage?n.length+1:void 0},refetchOnWindowFocus:!1,enabled:!!t&&n&&!!s,select:function(e){return e.pages=e.pages.map(function(e){return(0,W._)((0,O._)({},e),{data:e.data.filter(function(e){var n;return null===(n=e.attributes)||void 0===n?void 0:n.some(function(n){var t=e4.collections.find(function(n){return(0,ey.w4)(n.address,e.nftAddress)}),s=i.config.barracks.staking.nft.collections.find(function(e){return e.slug===t.slug});if(!s)return!1;var r=n.trait_type.toLowerCase(),a=n.value.toString().toLowerCase(),o=0===s.traits.length,l=!0,c=!1,u=void 0;try{for(var d,h=s.traits[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;if("include"===p.inclusion&&p.type===r&&p.values.includes(a)||"exclude"===p.inclusion&&p.type===r&&!p.values.includes(a)){o=!0;break}}}catch(e){c=!0,u=e}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}return o})})})}),e}}),l=o.data,c=o.status,u=o.error,d=o.fetchNextPage,h=o.hasNextPage;return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(el.Z,{dataLength:(null==l?void 0:l.pages)?l.pages.flat().length:0,next:d,hasMore:null!=h&&h,style:{overflow:"hidden"},loader:(0,k.jsx)(H.M,{children:(0,k.jsx)(K.$,{})}),children:"loading"===c?(0,k.jsx)(H.M,{children:(0,k.jsx)(K.$,{})}):"error"===c?(0,k.jsxs)("p",{children:["Error: ",u.message]}):(null==l?void 0:l.pages.map(function(e){return e.data}).flat().length)>0?(0,k.jsx)(Z.M,{columns:{base:2,sm:3,md:4},gap:3,children:l.pages.map(function(e,n){return(0,k.jsx)(C.Fragment,{children:e.data.map(function(e,n){return(0,k.jsx)(ew,{nft:e,onAdd:function(){return r(e)},onRemove:function(){return a(e.nftAddress,e.nftId)}},e.name)})},n)})}):(0,k.jsx)(N.xu,{textAlign:"center",mt:8,children:(0,k.jsx)(I.x,{children:"No NFTs available"})})})})},e9=function(e){var n,t,s,r=e.isOpen,a=e.onClose,i=e.initialApprovalState,o=e.slotUnlockContext,l=(0,er.C)(function(e){return e.user}),c=(0,w._)((0,C.useState)(!1),2),u=c[0],d=c[1],h=(0,w._)((0,C.useState)(!1),2),p=h[0],f=h[1],x=(0,w._)((0,C.useState)(!1),2),m=x[0],g=x[1],y=(0,w._)((0,C.useState)(i),2),b=y[0],j=y[1],v=o.recipes[o.unlocks];(0,C.useEffect)(function(){j(i)},[i]);var T=(n=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,6,7]),g(!0),[4,new ez.CH(e4.contracts.fortune,e0,l.provider.getSigner()).allowance(null===(e=l.address)||void 0===e?void 0:e.toLowerCase(),e4.contracts.seasonUnlocks)];case 1:if(t.sent().lt(v.fortuneAmount))throw Error("Not enough Fortune.");return[4,new ez.CH(e4.contracts.resources,eI.qZ,e3).balanceOf(l.address,1)];case 2:if(t.sent().lt(v.resourcesAmounts[0]))throw Error("Not enough Koban.");return[4,new ez.CH(e4.contracts.seasonUnlocks,e2,l.provider.getSigner()).unlock(2,o.unlocks)];case 3:return[4,t.sent().wait()];case 4:return t.sent(),eu.Am.success("Slot has been unlocked!"),a(),[3,7];case 5:return console.log(n=t.sent()),eu.Am.error((0,e1.O)(n)),[3,7];case 6:return d(!1),f(!1),g(!1),[7];case 7:return[2]}})}),function(){return n.apply(this,arguments)}),A=(t=(0,S._)(function(){var e,n,t,s,r;return(0,_.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,6,7]),d(!0),[4,new ez.CH(e4.contracts.fortune,e0,l.provider.getSigner()).allowance(null===(e=l.address)||void 0===e?void 0:e.toLowerCase(),e4.contracts.seasonUnlocks)];case 1:if(n=a.sent(),t=eR.parseEther("10000"),s=eR.parseEther("5000"),!n.lt(s))return[3,4];return[4,new ez.CH(e4.contracts.fortune,e0,l.provider.getSigner()).approve(e4.contracts.seasonUnlocks,t)];case 2:return[4,a.sent().wait()];case 3:a.sent(),j([t,b[1]]),a.label=4;case 4:return eu.Am.success("Fortune has been enabled!"),[3,7];case 5:return console.log(r=a.sent()),eu.Am.error((0,e1.O)(r)),[3,7];case 6:return d(!1),[7];case 7:return[2]}})}),function(){return t.apply(this,arguments)}),F=(s=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,6,7]),f(!0),[4,(e=new ez.CH(e4.contracts.resources,eI.qZ,l.provider.getSigner())).isApprovedForAll(l.address,e4.contracts.seasonUnlocks)];case 1:if(t.sent())return[3,4];return[4,e.setApprovalForAll(e4.contracts.seasonUnlocks,!0)];case 2:return[4,t.sent().wait()];case 3:t.sent(),j([b[0],!0]),t.label=4;case 4:return eu.Am.success("Koban has been enabled!"),[3,7];case 5:return console.log(n=t.sent()),eu.Am.error((0,e1.O)(n)),[3,7];case 6:return f(!1),[7];case 7:return[2]}})}),function(){return s.apply(this,arguments)});return(0,k.jsxs)(Y.u_,{isOpen:r,isCentered:!0,onClose:a,size:"lg",children:[(0,k.jsx)(Q.Z,{}),(0,k.jsxs)(J.h,{border:"2px solid #CCC",bg:"#292626",color:"white",className:V().className,children:[(0,k.jsx)($.x,{children:(0,k.jsx)(H.M,{children:(0,k.jsx)(X.U,{children:(0,k.jsx)(I.x,{children:"Unlock Staking Slots"})})})}),(0,k.jsx)(ee.o,{}),(0,k.jsxs)(en.f,{color:"white",children:[(0,k.jsx)(I.x,{children:"Unlock staking slots to allow additional NFTs to earn more troops in the barracks."}),(0,k.jsxs)(N.xu,{bg:"#453e3b",rounded:"lg",p:2,mt:4,children:[(0,k.jsx)(I.x,{textAlign:"center",mb:4,children:"Current slot cost"}),(0,k.jsxs)(Z.M,{columns:2,children:[(0,k.jsxs)(E.g,{spacing:0,children:[(0,k.jsxs)(X.U,{children:[(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/fortune.svg").convert(),alt:"fortuneIcon",boxSize:6}),(0,k.jsx)(I.x,{fontWeight:"bold",fontSize:"lg",children:eR.formatEther(v.fortuneAmount)})]}),(0,k.jsx)(N.xu,{fontSize:"sm",children:"Fortune"})]}),(0,k.jsxs)(E.g,{spacing:0,children:[(0,k.jsxs)(X.U,{children:[(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/koban.png").convert(),alt:"kobanIcon",boxSize:6}),(0,k.jsx)(I.x,{fontWeight:"bold",fontSize:"lg",children:v.resourcesAmounts[0].toString()})]}),(0,k.jsx)(N.xu,{fontSize:"sm",children:"Koban"})]})]})]})]}),(0,k.jsx)(et.m,{children:(0,k.jsxs)(E.g,{w:"full",children:[(0,k.jsxs)(es.h,{spacing:2,width:"full",children:[b[0].lt(eR.parseEther("5000"))&&(0,k.jsx)(R.z,{size:"md",isLoading:u,isDisabled:u||p||m,onClick:A,variant:"ryoshiDynasties",flex:1,children:"Enable FRTN"}),!b[1]&&(0,k.jsx)(R.z,{size:"md",isLoading:p,isDisabled:u||p||m,onClick:F,variant:"ryoshiDynasties",flex:1,children:"Enable Koban"})]}),(0,k.jsx)(R.z,{w:"full",size:"md",isLoading:m,isDisabled:m||!b[0].gte(eR.parseEther("5000"))||!b[1],onClick:T,variant:"ryoshiDynasties",children:"Unlock"})]})})]})]})},ne=t(80552),nn=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"previousAdmin","type":"address"},{"indexed":false,"internalType":"address","name":"newAdmin","type":"address"}],"name":"AdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"beacon","type":"address"}],"name":"BeaconUpgraded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint8","name":"version","type":"uint8"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"},{"internalType":"uint256","name":"expire","type":"uint256"},{"internalType":"uint256","name":"nonce","type":"uint256"}],"indexed":false,"internalType":"struct Resources.MintRequest","name":"request","type":"tuple"}],"name":"MintRequestByAdmin","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"digest","type":"bytes32"}],"name":"MintRequestCancelled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"digest","type":"bytes32"}],"name":"MintRequestSuccess","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"indexed":false,"internalType":"uint256[]","name":"values","type":"uint256[]"}],"name":"TransferBatch","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"TransferSingle","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"value","type":"string"},{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"}],"name":"URI","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"implementation","type":"address"}],"name":"Upgraded","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"accounts","type":"address[]"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"}],"name":"balanceOfBatch","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"internalType":"uint256[]","name":"values","type":"uint256[]"}],"name":"burnBatch","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"domainSeparator","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"exists","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"},{"internalType":"uint256","name":"expire","type":"uint256"},{"internalType":"uint256","name":"nonce","type":"uint256"}],"internalType":"struct Resources.MintRequest","name":"mintRequest","type":"tuple"}],"name":"hashMintRequest","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"},{"internalType":"uint256","name":"expire","type":"uint256"},{"internalType":"uint256","name":"nonce","type":"uint256"}],"internalType":"struct Resources.MintRequest","name":"request","type":"tuple"},{"internalType":"bytes","name":"signature","type":"bytes"}],"name":"invalidateRequest","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"},{"internalType":"uint256","name":"expire","type":"uint256"},{"internalType":"uint256","name":"nonce","type":"uint256"}],"internalType":"struct Resources.MintRequest","name":"request","type":"tuple"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"},{"internalType":"uint256","name":"expire","type":"uint256"},{"internalType":"uint256","name":"nonce","type":"uint256"}],"internalType":"struct Resources.MintRequest","name":"request","type":"tuple"},{"internalType":"bytes","name":"signature","type":"bytes"}],"name":"mintWithSig","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"proxiableUUID","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_salePrice","type":"uint256"}],"name":"royaltyInfo","outputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeBatchTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint96","name":"feeNumerator","type":"uint96"}],"name":"setDefaultRoyalty","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"string","name":"_uri","type":"string"}],"name":"setUri","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newImplementation","type":"address"}],"name":"upgradeTo","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newImplementation","type":"address"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"upgradeToAndCall","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"uri","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]'),nt=t(8433),ns=(0,ek.eG)(),nr=nt.Z.create({baseURL:ns.urls.cms}),na=(s=(0,S._)(function(){return(0,_.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/games/0")];case 1:return[2,e.sent().data.data.id];case 2:throw e.sent();case 3:return[2]}})}),function(){return s.apply(this,arguments)}),ni=(r=(0,S._)(function(e){var n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:if(t.trys.push([0,4,,5]),0!=e)return[3,3];return[4,nr.get("ryoshi-dynasties/games/0")];case 1:return n=Number(t.sent().data.data.id-1),[4,nr.get("ryoshi-dynasties/games/"+n)];case 2:return[2,t.sent().data.data];case 3:return[3,5];case 4:throw t.sent();case 5:return[2]}})}),function(e){return r.apply(this,arguments)}),no=(a=(0,S._)(function(){return(0,_.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/games/0")];case 1:return[2,e.sent().data.data.parent.id];case 2:throw e.sent();case 3:return[2]}})}),function(){return a.apply(this,arguments)});(0,S._)(function(e){return(0,_.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/games/"+e)];case 1:return[2,n.sent()];case 2:throw n.sent();case 3:return[2]}})}),(0,S._)(function(e,n){var t,s;return(0,_.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/armies?",{params:{address:e,signature:n}})];case 1:return t=r.sent(),s=0,t.data.data.forEach(function(e){null==e.controlPointId&&(s+=e.troops)}),[2,s];case 2:throw r.sent();case 3:return[2]}})});var nl=(i=(0,S._)(function(e,n){var t;return(0,_.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,na()];case 1:return t=s.sent(),[4,nr.get("ryoshi-dynasties/armies?",{params:{address:e,signature:n,gameId:t}})];case 2:return[2,s.sent()];case 3:throw s.sent();case 4:return[2]}})}),function(e,n){return i.apply(this,arguments)});(0,S._)(function(e,n){var t,s,r;return(0,_.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,na()];case 1:return t=a.sent(),[4,nr.get("ryoshi-dynasties/armies?",{params:{address:e,signature:n,gameId:t}})];case 2:return s=a.sent(),r=0,s.data.data.forEach(function(e){null==e.controlPointId&&(r+=e.troops)}),[2,r];case 3:throw a.sent();case 4:return[2]}})});var nc=(o=(0,S._)(function(e,n,t,s){var r,a,i=arguments;return(0,_.__generator)(this,function(o){switch(o.label){case 0:r=i.length>4&&void 0!==i[4]?i[4]:[],a=i.length>5?i[5]:void 0,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,nr.post("ryoshi-dynasties/factions?",{name:s,type:t,addresses:r,image:a},{params:{address:e,signature:n}})];case 2:return[2,o.sent()];case 3:throw o.sent();case 4:return[2]}})}),function(e,n,t,s){return o.apply(this,arguments)});(0,S._)(function(e,n,t,s,r){return(0,_.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,nr.patch(baseURL+"api/ryoshi-dynasties/factions?",{name:t,id:s,image:r},{params:{address:e,signature:n}})];case 1:return[2,a.sent()];case 2:throw a.sent();case 3:return[2]}})});var nu=(l=(0,S._)(function(e,n){return(0,_.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/factions?",{params:{address:e,signature:n}})];case 1:return[2,t.sent()];case 2:throw t.sent();case 3:return[2]}})}),function(e,n){return l.apply(this,arguments)});(0,S._)(function(e,n){var t;return(0,_.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,no()];case 1:return t=s.sent(),[4,nr.get("ryoshi-dynasties/factions?",{params:{address:e,signature:n,gameId:t}})];case 2:return[2,s.sent()];case 3:throw s.sent();case 4:return[2]}})}),(0,S._)(function(e,n,t){var s;return(0,_.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,no()];case 1:return s=r.sent(),[4,nr.post("ryoshi-dynasties/subscriptions?",{gameId:s,factionId:t},{params:{address:e,signature:n}})];case 2:return[2,r.sent()];case 3:throw r.sent();case 4:return[2]}})});var nd=(c=(0,S._)(function(e,n,t,s){var r,a,i=arguments;return(0,_.__generator)(this,function(o){switch(o.label){case 0:r=i.length>4&&void 0!==i[4]?i[4]:[],a=i.length>5?i[5]:void 0,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,nr.patch("ryoshi-dynasties/factions?",{name:s,id:t,addresses:r,type:a},{params:{address:e,signature:n}})];case 2:return[2,o.sent()];case 3:throw o.sent();case 4:return[2]}})}),function(e,n,t,s){return c.apply(this,arguments)});(0,S._)(function(e,n,t){return(0,_.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,nr.delete("ryoshi-dynasties/factions?",{params:{address:e,signature:n,id:t}})];case 1:return[2,s.sent()];case 2:throw s.sent();case 3:return[2]}})}),(0,S._)(function(e,n,t){return(0,_.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/factions/"+t,{params:{address:e,signature:n}})];case 1:return[2,s.sent().data.data.troops];case 2:throw s.sent();case 3:return[2]}})}),(0,S._)(function(e,n,t){return(0,_.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/army?",{params:{walletAddress:e,walletSignature:n}},{body:{troops:t}})];case 1:return[2,s.sent()];case 2:throw s.sent();case 3:return[2]}})});var nh=(u=(0,S._)(function(e,n,t,s){var r;return(0,_.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,nr.get("ryoshi-dynasties/games/0")];case 1:return r=a.sent().data.data.id,t=Number(t),[4,nr.patch("ryoshi-dynasties/armies?",{troops:t,factionId:s,gameId:r},{params:{address:e,signature:n,action:"DELEGATE"}})];case 2:return[2,a.sent()];case 3:throw a.sent();case 4:return[2]}})}),function(e,n,t,s){return u.apply(this,arguments)}),np=(d=(0,S._)(function(e,n,t,s,r,a){return(0,_.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,nr.patch("ryoshi-dynasties/armies?",{troops:s,controlPointId:r,gameId:t,factionId:a},{params:{address:e,signature:n,action:"DEPLOY"}})];case 1:return[2,i.sent()];case 2:throw i.sent();case 3:return[2]}})}),function(e,n,t,s,r,a){return d.apply(this,arguments)}),nf=(h=(0,S._)(function(e,n,t,s,r,a){return(0,_.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,nr.patch("ryoshi-dynasties/armies?",{troops:s,controlPointId:r,gameId:t,factionId:a},{params:{address:e,signature:n,action:"RECALL"}})];case 1:return[2,i.sent()];case 2:throw i.sent();case 3:return[2]}})}),function(e,n,t,s,r,a){return h.apply(this,arguments)});(0,S._)(function(e){return(0,_.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/rewards/"+e)];case 1:return[2,n.sent().data.data];case 2:throw n.sent();case 3:return[2]}})}),(0,S._)(function(e,n){return(0,_.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/armies?",{params:{address:e,signature:n}})];case 1:return[2,t.sent()];case 2:throw t.sent();case 3:return[2]}})}),(0,S._)(function(e){return(0,_.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/factions/all",{params:{gameId:e}})];case 1:return[2,n.sent().data.data];case 2:throw n.sent();case 3:return[2]}})});var nx=(p=(0,S._)(function(e,n){return(0,_.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/factions/all",{params:{gameId:e,seasonId:n}})];case 1:return[2,t.sent().data.data];case 2:throw t.sent();case 3:return[2]}})}),function(e,n){return p.apply(this,arguments)}),nm=(f=(0,S._)(function(e,n,t){return(0,_.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,nr.post("ryoshi-dynasties/armies?",{troops:t},{params:{address:e,signature:n}})];case 1:return[2,s.sent()];case 2:throw s.sent();case 3:return[2]}})}),function(e,n,t){return f.apply(this,arguments)}),ng=(x=(0,S._)(function(e,n){return(0,_.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/control-points/"+e,{params:{gameId:n}})];case 1:return[2,t.sent().data.data.leaderBoard];case 2:throw t.sent();case 3:return[2]}})}),function(e,n){return x.apply(this,arguments)}),ny=(m=(0,S._)(function(e,n){return(0,_.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/control-points/"+e,{params:{gameId:n}})];case 1:return[2,t.sent().data.data];case 2:throw t.sent();case 3:return[2]}})}),function(e,n){return m.apply(this,arguments)}),nb=(g=(0,S._)(function(e,n,t,s,r,a,i){var o;return(0,_.__generator)(this,function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),[4,nr.get("ryoshi-dynasties/games/0")];case 1:return o=l.sent().data.data.id,[4,nr.post("ryoshi-dynasties/battle-transactions?",{troops:t,controlPointId:s,gameId:o,factionId:r,defendingFactionId:a,battleType:i},{params:{address:e,signature:n,gameId:o}})];case 2:return[2,l.sent()];case 3:throw l.sent();case 4:return[2]}})}),function(e,n,t,s,r,a,i){return g.apply(this,arguments)});(0,S._)(function(e,n){return(0,_.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/game-tokens/daily-reward?",{params:{address:e,signature:n}})];case 1:return[2,t.sent()];case 2:throw t.sent();case 3:return[2]}})}),(0,S._)(function(e,n){return(0,_.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/game-tokens/battle-reward?",{params:{address:e,signature:n}})];case 1:return[2,t.sent()];case 2:throw t.sent();case 3:return[2]}})}),(0,S._)(function(e,n){return(0,_.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/game-tokens/daily-reward/next/?",{params:{address:e,signature:n}})];case 1:return[2,t.sent()];case 2:throw t.sent();case 3:return[2]}})});var nj=(y=(0,S._)(function(e,n){return(0,_.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/game-tokens/battle-reward?",{params:{address:e,signature:n}})];case 1:return[2,t.sent().data.data];case 2:throw t.sent();case 3:return[2]}})}),function(e,n){return y.apply(this,arguments)});(0,S._)(function(e,n){return(0,_.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/game-tokens/battle-reward?",{params:{address:e,signature:n}})];case 1:return[2,t.sent()];case 2:throw t.sent();case 3:return[2]}})});var nv=(b=(0,S._)(function(e,n,t,s){var r,a;return(0,_.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/armies?",{params:{address:e,signature:n,gameId:s}})];case 1:return r=i.sent(),a=0,r.data.data.forEach(function(e){e.controlPointId===t&&(a+=e.troops)}),[2,a];case 2:throw i.sent();case 3:return[2]}})}),function(e,n,t,s){return b.apply(this,arguments)}),nw=(j=(0,S._)(function(e,n,t,s,r){return(0,_.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/factions/subscription?",{params:{address:e,signature:n,blockId:t}},{gameId:s,factionId:r})];case 1:return[2,a.sent().data.data];case 2:throw a.sent();case 3:return[2]}})}),function(e,n,t,s,r){return j.apply(this,arguments)});(0,S._)(function(e,n,t,s,r,a){return(0,_.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,nr.get("ryoshi-dynasties/game-log?",{params:{address:e,signature:n,gameId:t,pageSize:s,page:r,orderBy:a}})];case 1:return[2,i.sent().data.data.logs];case 2:throw i.sent();case 3:return[2]}})});var nk=(v=(0,S._)(function(e,n,t){return(0,_.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,nr.patch("ryoshi-dynasties/factions/status?",{address:e},{params:{address:e,signature:n,action:t}})];case 1:return[2,s.sent()];case 2:throw s.sent();case 3:return[2]}})}),function(e,n,t){return v.apply(this,arguments)}),nC=t(19669),nS=(0,ek.eG)(),n_=nt.Z.create({baseURL:nS.urls.api}),nT=function(e){var n,t,s,r,a,i,o=e.isOpen,l=e.onClose,c=e.battleRewards,u=(0,er.C)(function(e){return e.user});(0,C.useContext)(eB);var d=(0,w._)((0,C.useState)(""),2),h=d[0],p=d[1],f=(0,w._)((0,C.useState)(!1),2),x=f[0],m=f[1],g=(0,w._)((0,eP.Z)(),2),y=(g[0],g[1]),b=(0,w._)((0,C.useState)([]),2),j=b[0],v=b[1],T=(0,w._)((0,C.useState)(!1),2),A=(T[0],T[1]),F=(n=(0,S._)(function(){return(0,_.__generator)(this,function(e){switch(e.label){case 0:return[4,eo.s.withoutKey().ryoshiDynasties.getDailyRewards(u.address)];case 1:return[2,e.sent()]}})}),function(){return n.apply(this,arguments)});(0,ea.useQuery)(["RyoshiDailyCheckin",u.address],F,{enabled:!!u.address,refetchOnWindowFocus:!1}).data;var R=(t=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:if(!u.address)return[2];if(n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,y()];case 1:n=t.sent().signature,t.label=2;case 2:if(!n)return[3,4];return[4,nj(u.address.toLowerCase(),n)];case 3:return[2,t.sent()];case 4:return[2,null]}})}),function(){return t.apply(this,arguments)}),E=(s=(0,S._)(function(){var e,n,t,s,r;return(0,_.__generator)(this,function(a){switch(a.label){case 0:if(!u.address)return[2];if(n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,y()];case 1:n=a.sent().signature,a.label=2;case 2:if(!n)return[3,8];a.label=3;case 3:return a.trys.push([3,7,,8]),m(!0),[4,R()];case 4:return t=a.sent(),s=[u.address.toLowerCase(),t.tokenIds,t.quantity,t.expiresAt,t.nonce],p("Claiming..."),[4,new ez.CH(nS.contracts.resources,nn,u.provider.getSigner()).mintWithSig(s,t.signature)];case 5:return[4,a.sent().wait()];case 6:return r=a.sent(),eu.Am.success((0,ey.aS)(r.transactionHash)),p("Done!"),c=null,m(!1),l(),[3,8];case 7:return console.log(a.sent()),p("Claim"),m(!1),[3,8];case 8:return[2]}})}),function(){return s.apply(this,arguments)}),M=function(e){var n=j.find(function(n){return n.id.toString()===e.toString()});return n?n.image:""},O=function(e){var n=j.find(function(n){return Number(n.id)===e});return n?n.name:""},W=(r=(0,S._)(function(){return(0,_.__generator)(this,function(e){switch(e.label){case 0:return[4,n_.get("fullcollections?address="+nS.contracts.resources)];case 1:return v(e.sent().data.nfts),[2]}})}),function(){return r.apply(this,arguments)});return(0,C.useEffect)(function(){c&&W()},[c]),(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(L.x,{isOpen:o,onClose:function(){l()},title:"Claim Battle Rewards",size:"5xl",isCentered:!1,children:c&&0!==c.length&&0!==j.length?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(z.k,{direction:{base:"column",md:"row"},my:6,px:4,children:(0,k.jsx)(ne.E,{children:(0,D._)(Array(null===(i=c)||void 0===i?void 0:null===(a=i.tokenIds)||void 0===a?void 0:a.length).fill(0)).map(function(e,n){return(0,k.jsx)(ne.U,{children:c.tokenIds[n]?(0,k.jsxs)(N.xu,{position:"relative",children:[(0,k.jsxs)(N.xu,{className:"card eb-nft__card h-100 shadow",onMouseEnter:function(){return A(!0)},onMouseLeave:function(){return A(!1)},_hover:{borderColor:(0,eb.ff)("#595d69","#ddd")},children:[(0,k.jsx)(N.xu,{_groupHover:{background:(0,eb.ff)("#FFFFFF","#404040"),transition:"0.3s ease"},borderRadius:"15px",transition:"0.3s ease",height:"100%",children:(0,k.jsxs)(z.k,{direction:"column",height:"100%",children:[(0,k.jsx)("div",{className:"card-img-container",children:(0,k.jsx)(N.xu,{_groupHover:{transform:"scale(1.05)",transition:"0.3s ease"},transition:"0.3s ease",transform:"scale(1.0)",width:180,height:225,children:(0,k.jsx)(U.E,{src:M(c.tokenIds[n])})})}),(0,k.jsx)(P.L,{}),(0,k.jsx)(N.xu,{borderBottomRadius:15,_groupHover:{background:(0,eb.ff)(nC.Wb.textColor4,nC.$_.textColor4),color:nC.Wb.textColor1},px:4,py:1,children:(0,k.jsx)("div",{className:"d-flex justify-content-between",children:(0,k.jsxs)(N.xu,{justifyContent:"space-between",children:[(0,k.jsx)(eg.X,{as:"h6",size:"sm",className:"card-title mt-auto mb-1",children:O(c.tokenIds[n])}),(0,k.jsxs)(eg.X,{as:"h6",size:"sm",className:"card-title mt-auto mb-1",children:["x",c.quantity[n]]})]})})})]})}),(0,k.jsx)(z.k,{fontSize:"xs",justify:"space-between",mt:4,children:(0,k.jsx)(z.k,{marginLeft:"auto",children:(0,k.jsx)(I.x,{as:"b"})})})]}),(0,k.jsx)(N.xu,{position:"absolute",top:0,right:0,pe:"3px"})]}):(0,k.jsx)(N.xu,{position:"relative",children:(0,k.jsx)(N.xu,{p:2,rounded:"xl",children:(0,k.jsx)(N.xu,{width:100,height:100,bgColor:"#716A67",rounded:"xl",children:(0,k.jsx)(eS,{boxSize:"100%",fill:"#B1ADAC"})})})})},n)})})}),(0,k.jsx)(N.xu,{ms:8,my:{base:4,md:"auto"},textAlign:"center",children:0===c.tokenIds.length?(0,k.jsx)(I.x,{fontSize:"sm",color:"gray.400",children:"No rewards to claim"}):(0,k.jsx)(L.t,{minW:"150px",onClick:E,isLoading:x,disabled:x,stickyIcon:!0,loadingText:h,children:"Claim"})}),(0,k.jsx)(P.L,{h:"12px"})]}):(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(N.xu,{minH:"200px",children:(0,k.jsx)(H.M,{children:(0,k.jsx)(I.x,{fontSize:"sm",color:"gray.400",margin:"100",children:" No rewards to claim "})})})})})})},nA=t(1754),nF=function(e){var n,t=e.onBack,s=(0,F.q)(),r=s.isOpen,a=s.onOpen,i=s.onClose,o=(0,F.q)(),l=o.isOpen,c=o.onOpen,u=o.onClose,d=(0,w._)((0,nA.Z)(),1)[0],h=(0,er.C)(function(e){return e.user}),p=(0,w._)((0,eP.Z)(),2),f=(p[0],p[1]),x=(0,w._)((0,C.useState)(!1),2),m=x[0],g=x[1],y=(n=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:if(!h.address)return[2];if(n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,f()];case 1:n=t.sent().signature,t.label=2;case 2:if(!n)return[3,4];return[4,nj(h.address.toLowerCase(),n)];case 3:return[2,t.sent()];case 4:return[2,null]}})}),function(){return n.apply(this,arguments)}),b=(0,ea.useQuery)(["BattleRewards",h.address],y,{enabled:!!h.address,refetchOnWindowFocus:!1}).data;return(0,k.jsxs)(z.k,{border:"1px solid #FFD700",backgroundColor:"#292626",flexDirection:"column",textAlign:"center",borderRadius:"10px",justifyContent:"space-around",padding:4,minW:{base:"100%",xl:"450px"},boxShadow:"0px 0px 10px 0px #000000",className:A().className,children:[(0,k.jsxs)(z.k,{justify:"space-between",children:[(0,k.jsx)(N.xu,{left:6,top:6,rounded:"full",zIndex:1,_groupHover:{cursor:"pointer"},"data-group":!0,children:(0,k.jsx)(R.z,{bg:"#C17109",rounded:"full",border:"8px solid #F48F0C",w:14,h:14,onClick:t,_groupHover:{bg:"#de8b08",borderColor:"#f9a50b"},children:(0,k.jsx)(e_.R,{boxSize:8})})}),(0,k.jsxs)(N.xu,{textAlign:"end",ms:2,children:[(0,k.jsx)(I.x,{textColor:"#ffffffeb",fontSize:{base:"28px",md:"32px"},fontWeight:"bold",children:"Barracks"}),(0,k.jsx)(I.x,{textColor:"#ffffffeb",fontSize:"sm",fontStyle:"italic",children:"Claim rewards from your battles"})]})]}),(0,k.jsx)(N.xu,{children:(0,k.jsxs)(E.g,{children:[(0,k.jsx)(P.L,{h:"20"}),(0,k.jsx)("div",{style:{margin:"8px 24px"},children:(0,k.jsxs)(H.M,{children:[(0,k.jsx)(e6,{isOpen:r,onClose:i}),!!b&&(0,k.jsx)(nT,{isOpen:l,onClose:function(){g(!0),u(),console.log("claimedRewards")},battleRewards:b}),(0,k.jsx)(M.W,{children:(0,k.jsxs)(E.g,{spacing:4,align:"stretch",children:[(0,k.jsx)(P.L,{h:"20"}),(0,k.jsx)(L.t,{onClick:function(){return d(a)},children:"Stake NFTs"}),!!b&&!m&&(0,k.jsx)(L.t,{fontSize:"18",onClick:function(){return d(c)},children:"Claim Battle Rewards"})]})})]})}),(0,k.jsx)(P.L,{h:"4"})]})})]})},nz=t(0),nN=t.n(nz),nR=t(63343),nI=t(96063),nE=t(26126),nP=t(98007),nH=t.n(nP),nM=t(36968),nL=t(38267),nO=t(31708),nW=t(776),nD=t(5370),nB=t(18691),nV=t(8399),nZ=t(49571),nU=t(55594),nX=t(28054),nq=t(47263),nG=t(14416),nK=t(48654),nY=t(93863),nQ=t(43775),nJ=t(28129),n$=t(86989),n0=t(94385),n2=t(45339),n1=t(62285),n4=function(e){var n=e.collection,t=e.faction,s=e.onClick,r=e.onRemove,a=(e.useCloseButton,e.isFocused),i=e.collectionNames,o=e.imgSize,l=(0,eb.ff)("gray.100","#424242");(0,eb.ff)("black","white");var c=(0,C.useCallback)(function(){s(n)},[s,n]);return(0,C.useCallback)(function(e){e.stopPropagation(),r&&r(n)},[r,n]),(0,k.jsx)(N.xu,{_hover:{background:l},p:2,rounded:"lg",w:"100%",fontSize:"12px",cursor:"pointer",onClick:c,bg:void 0!==a&&a?l:"inherit",children:(0,k.jsxs)(z.k,{children:[(0,k.jsx)(N.xu,{width:50,height:50,style:{borderRadius:"20px"},children:(0,k.jsx)(nI.q,{src:eC.Z.translate(t.image).avatar(),size:o})}),(0,k.jsx)(N.xu,{flex:"1",ms:2,fontSize:"14px",children:(0,k.jsxs)(E.g,{align:"left",spacing:0,children:[(0,k.jsx)(I.x,{fontWeight:"bold",noOfLines:1,children:t.name}),"COLLECTION"===t.type&&(0,k.jsx)(k.Fragment,{children:i.map(function(e){return(0,k.jsx)(I.x,{fontWeight:"l",color:"#aaaa",fontSize:12,noOfLines:1,children:e})})})]})})]})},"".concat(t.name))},n3=t(86658),n5=t(12324);(0,ek.eG)("collections");var n6=function(e){var n,t,s=e.handleSelectCollectionCallback,r=e.allFactions,a=e.imgSize,i=(0,ec.useRouter)(),o=(0,eb.ff)("black","gray.300"),l=(0,eb.ff)("white","gray.300");(0,eb.ff)("white","gray.700"),(0,eb.ff)("gray.100","gray.800"),(0,eb.ff)("gray.300","gray.600");var c=(0,eb.ff)("gray.100","blue.500"),u=(0,eb.ff)("flushed","outline"),d=(0,w._)((0,C.useState)(5),2),h=d[0],p=d[1],f=(0,w._)((0,C.useState)([]),2),x=f[0],m=f[1],g=(0,w._)((0,C.useState)([]),2),y=g[0],b=g[1],j=(0,F.q)(),v=j.isOpen,T=j.onOpen,A=j.onClose,z=(0,w._)((0,C.useState)(""),2),P=z[0],M=z[1],L=C.useRef(null);(0,nK.O)({ref:L,handler:A}),(0,n1.Z)(P,500);var O=(0,w._)((0,C.useState)(-1),2),W=O[0],D=O[1],B=(0,w._)((0,C.useState)([]),2),V=B[0];B[1];var Z=(0,w._)((0,C.useState)([]),2),U=Z[0],X=Z[1],q=function(){var e=[];r.filter(function(n){n.name.toLowerCase().includes(P.toLowerCase())&&e.push(n)}),r.filter(function(n){if(n.addresses.length>0)for(var t=0;t<n.addresses.length;t++)n.addresses[t].toLowerCase().includes(P.toLowerCase())&&!e.find(function(e){return e.address===n.address})&&e.push(n)}),r.filter(function(n){if(n.addresses.length>0)for(var t=function(t){var s,r=y.find(function(e){return e.address===n.addresses[t]});r&&(null===(s=r.collectionName)||void 0===s?void 0:s.toLowerCase().includes(P.toLowerCase()))&&!e.find(function(e){return e.address===n.address})&&e.push(n)},s=0;s<n.addresses.length;s++)t(s)}),X(e)},G=(n=(0,S._)(function(){var e,n,t,s;return(0,_.__generator)(this,function(a){switch(a.label){case 0:var i;return e=function(e){var s=t.find(function(t){return t.address.toLowerCase()===n[e].address.toLowerCase()});s&&(n[e].collectionName=s.name)},n=[],console.log("Searching for factions"),r.filter((i=(0,S._)(function(e){var t;return(0,_.__generator)(this,function(s){if("COLLECTION"===e.type&&e.addresses.length>0)for(t=0;t<e.addresses.length;t++)n.push({address:e.addresses[t],factionName:e.name});return[2]})}),function(e){return i.apply(this,arguments)})),[4,(0,n5.nt)(n.map(function(e){return e.address}).toString())];case 1:if(!(t=a.sent()))return[2];for(s=0;s<n.length;s++)e(s);return b(n),[2]}})}),function(){return n.apply(this,arguments)}),Y=function(e){var n=function(n){var s=y.find(function(t){return t.address.toLowerCase()===e[n].toLowerCase()});s&&t.push(s.collectionName)};if(e&&y){for(var t=[],s=0;s<e.length;s++)n(s);return t}};(0,C.useEffect)(function(){r&&G()},[r]);var Q=x.length>0||V&&V.length>0,J=(0,C.useCallback)(function(e){s(e.name),A(),M("")},[A,i,M]);(0,C.useEffect)(function(){r&&q()},[P]);var $=function(){var e=(0,eH.b0)();return P&&P.length>=3?e.filter(function(e){return e.name.toLowerCase().includes(P.toLowerCase())}):e};return(0,C.useEffect)(function(){m($()),P.length>=3&&!v&&T(),P.length<3&&v&&!Q&&A(),P.length<1&&p(5)},[P]),(0,k.jsxs)(N.xu,{position:"relative",maxW:"100%",ref:L,marginTop:2,children:[(0,k.jsxs)(nY.B,{children:[(0,k.jsx)(nQ.Z,{pointerEvents:"none",children:(0,k.jsx)(n0.W,{color:l})}),(0,k.jsx)(nJ.I,{placeholder:"Search",w:"100%",onChange:function(e){M(e.target.value)},onFocus:function(){m($()),Q&&!v&&T()},onKeyDown:function(e){var n;"ArrowUp"===e.code&&W>-1?D(W-1):"ArrowDown"===e.code&&W<x.length+(null!==(n=null==V?void 0:V.length)&&void 0!==n?n:0)-1?D(W+1):"Enter"===e.code&&W>-1&&(W<x.length?J(x[W]):J(V[W-x.length]))},value:P,borderColor:"#aaa",focusBorderColor:c,color:"white",_placeholder:{color:"gray.300"},variant:u}),P.length&&(0,k.jsx)(nQ.x,{children:(0,k.jsx)(n$.P,{onClick:function(){M(""),p(5),A()}})})]}),(0,k.jsx)(N.xu,{position:"relative",bg:"#272523",w:"100%",mt:1,rounded:"md",display:v?"block":"none",borderWidth:"1px",borderColor:"#aaa",boxShadow:"dark-lg",children:(0,k.jsx)(n3.ZP,{autoHeight:!0,autoHeightMax:"calc(100vh - 74px)",universal:!0,children:(0,k.jsx)(N.xu,{fontSize:"12px",p:2,children:(0,k.jsx)(N.xu,{display:(null==P?void 0:P.length)>=3?"inherit":"none",children:"loading"===status?(0,k.jsx)(H.M,{children:(0,k.jsx)(K.$,{})}):"error"===status?(0,k.jsx)(H.M,{children:(0,k.jsxs)(I.x,{children:["Error: ",null===(t=Error)||void 0===t?void 0:t.message]})}):(0,k.jsx)(k.Fragment,{children:(null==U?void 0:U.length)>0?(0,k.jsxs)(N.xu,{children:[(0,k.jsx)(I.x,{textTransform:"uppercase",ms:1,color:o,children:"Factions"}),(0,k.jsx)(E.g,{children:U.slice(0,h).map(function(e,n){return(0,k.jsx)(n4,{collection:e,onClick:J,isFocused:W===n+x.length,faction:e,collectionNames:Y(e.addresses),imgSize:a},e.address)})}),h<25&&h<V.length&&(0,k.jsx)(N.xu,{mt:2,ms:1,children:(0,k.jsx)(R.z,{variant:"link",onClick:function(){return p(25)},rightIcon:(0,k.jsx)(n2.v,{}),children:"View More"})})]}):(0,k.jsx)(H.M,{children:(0,k.jsx)(I.x,{children:"No results found"})})})})})})})]})},n8={recall:"recall",deploy:"deploy"},n7=function(e){var n,t,s,r,a,i,o=e.controlPoint,l=e.refreshControlPoint,c=e.allFactions,u=(0,nG.I0)(),d=(0,er.C)(function(e){return e.user}),h=(0,w._)((0,eP.Z)(),2),p=(h[0],h[1]),f=(0,w._)((0,C.useState)(n8.deploy),2),x=f[0],m=f[1],g=(0,C.useContext)(eB),y=(0,w._)((0,C.useState)(""),2),b=y[0],j=y[1],v=(0,w._)((0,C.useState)(""),2),T=v[0],A=v[1],F=(0,w._)((0,C.useState)(!1),2),R=F[0],E=F[1],M=(0,w._)((0,C.useState)({faction:"",quantity:0}),2),L=M[0];M[1];var O=(0,w._)((0,C.useState)(0),2),W=O[0],D=O[1],B=(0,w._)((0,C.useState)(L.faction),2),V=B[0],Z=B[1],q=(0,w._)((0,C.useState)(),2),G=q[0],K=q[1],Y=(0,w._)((0,C.useState)(!1),2),Q=Y[0],J=Y[1],$=(0,w._)((0,C.useState)(0),2),ee=$[0],en=$[1],et=(0,w._)((0,C.useState)(0),2),es=et[0],ea=et[1],ei=(n=(0,S._)(function(){return(0,_.__generator)(this,function(e){return d.address||(d.needsOnboard?new nX.Z().startOnboarding():d.address?d.correctChain||u((0,nq.Ns)()):u((0,nq.Yn)())),[2]})}),function(){return n.apply(this,arguments)}),eo=(t=(0,S._)(function(){var e,n,t,s;return(0,_.__generator)(this,function(r){switch(r.label){case 0:if(!d.address)return[2];if(n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,p()];case 1:n=r.sent().signature,r.label=2;case 2:if(!n)return[3,6];r.label=3;case 3:return r.trys.push([3,5,,6]),[4,nv(d.address.toLowerCase(),n,o.id,null===(s=g)||void 0===s?void 0:null===(t=s.game)||void 0===t?void 0:t.game.id)];case 4:return ea(r.sent()),[3,6];case 5:return console.log(r.sent()),[3,6];case 6:return[2]}})}),function(){return t.apply(this,arguments)}),el=(s=(0,S._)(function(){var e,n,t,s;return(0,_.__generator)(this,function(r){switch(r.label){case 0:if(!d.address)return[2];if(n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,p()];case 1:n=r.sent().signature,r.label=2;case 2:if(!n)return[3,6];r.label=3;case 3:return r.trys.push([3,5,,6]),[4,nu(d.address.toLowerCase(),n)];case 4:return(null===(t=(s=r.sent()).data.data)||void 0===t?void 0:t.isEnabled)?(J(!0),K(s.data.data)):J(!1),[3,6];case 5:return console.log(r.sent()),[3,6];case 6:return[2]}})}),function(){return s.apply(this,arguments)});(0,C.useEffect)(function(){var e,n,t,s,r,a;(null===(t=g.user)||void 0===t?void 0:null===(n=t.season)||void 0===n?void 0:null===(e=n.troops)||void 0===e?void 0:e.undeployed)!==void 0&&en(null===(a=g.user)||void 0===a?void 0:null===(r=a.season)||void 0===r?void 0:null===(s=r.troops)||void 0===s?void 0:s.undeployed)},[g]),(0,C.useEffect)(function(){g.refreshUser()},[]);var ec=(r=(0,S._)(function(){var e;return(0,_.__generator)(this,function(n){if(!d.address)return[2];if((null===(e=g.game)||void 0===e?void 0:e.state)===eD.pf.RESET)return A("Game has ended. Please wait until the next game begins"),[2];if(""===V)return A("You must select a faction"),[2];if(0===c.filter(function(e){return e.name===V})[0].addresses.length)return A("Faction must have addresses to participate"),[2];if(A(""),x===n8.deploy){if(W>ee||W<=0)return j("You cant deploy more troops than you have available"),[2];if(0===W)return j("You must deploy at least 1 troop"),[2];j(""),ed()}else if(x===n8.recall){if(W>es||W<0)return j("You can't recall more troops than you have deployed"),[2];if(0===W)return j("You must recall at least 1 troop"),[2];j(""),eh()}return[2]})}),function(){return r.apply(this,arguments)}),ed=(a=(0,S._)(function(){var e,n,t,s,r,a,i;return(0,_.__generator)(this,function(l){switch(l.label){case 0:if(n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,p()];case 1:n=l.sent().signature,l.label=2;case 2:if(!n)return[3,9];l.label=3;case 3:return l.trys.push([3,7,8,9]),E(!0),a=c.filter(function(e){return e.name===V})[0].id,[4,np(null===(t=d.address)||void 0===t?void 0:t.toLowerCase(),n,null===(r=g)||void 0===r?void 0:null===(s=r.game)||void 0===s?void 0:s.game.id,W,o.id,a)];case 4:return l.sent(),[4,el()];case 5:return l.sent(),D(0),[4,g.refreshUser()];case 6:return l.sent(),eu.Am.success("You deployed "+W+" troops to on behalf of "+V),[3,9];case 7:return console.log(i=l.sent()),eu.Am.error((0,e1.O)(i)),[3,9];case 8:return E(!1),[7];case 9:return[2]}})}),function(){return a.apply(this,arguments)}),eh=(i=(0,S._)(function(){var e,n,t,s,r,a,i;return(0,_.__generator)(this,function(u){switch(u.label){case 0:if(n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,p()];case 1:n=u.sent().signature,u.label=2;case 2:if(!n)return[3,9];u.label=3;case 3:return u.trys.push([3,7,8,9]),E(!0),a=c.filter(function(e){return e.name===V})[0].id,[4,nf(null===(t=d.address)||void 0===t?void 0:t.toLowerCase(),n,null===(r=g)||void 0===r?void 0:null===(s=r.game)||void 0===s?void 0:s.game.id,W,o.id,a)];case 4:return u.sent(),[4,el()];case 5:return u.sent(),D(0),[4,g.refreshUser()];case 6:return u.sent(),l(),eu.Am.success("You recalled "+W+" troops from "+o.name+" on behalf of "+V),[3,9];case 7:return console.log(i=u.sent()),eu.Am.error((0,e1.O)(i)),[3,9];case 8:return E(!1),[7];case 9:return[2]}})}),function(){return i.apply(this,arguments)});return(0,C.useEffect)(function(){eo()},[V]),(0,C.useEffect)(function(){el()},[d.address]),(0,C.useEffect)(function(){},[c]),(0,k.jsx)(z.k,{flexDirection:"column",textAlign:"center",justifyContent:"space-around",children:d.address?(0,k.jsx)(z.k,{direction:"row",justify:"space-between",justifyContent:"center",children:(0,k.jsxs)(N.xu,{mb:4,bg:"#272523",p:2,rounded:"md",w:"90%",justifyContent:"center",children:[(0,k.jsx)(H.M,{children:(0,k.jsxs)(z.k,{direction:"row",justify:"center",mb:2,children:[(0,k.jsx)(eA.Z,{isActive:x===n8.deploy,onClick:function(){return m(n8.deploy)},children:" Deploy"}),(0,k.jsx)(eA.Z,{isActive:x===n8.recall,onClick:function(){return m(n8.recall)},children:" Recall"})]})}),(0,k.jsxs)(nL.NI,{isInvalid:!!T,mb:"24px",bg:"none",children:[Q?(0,k.jsx)(k.Fragment,{}):(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(nO.r,{templateColumns:{base:"repeat(1, 1fr)",sm:"repeat(5, 1fr)"},gap:6,marginBottom:"4",children:[(0,k.jsx)(nW.P,{w:"100%",h:"5",children:(0,k.jsx)(nD.l,{children:" Faction:"})}),(0,k.jsx)(nW.P,{colSpan:{base:5,sm:4},w:"100%",children:(0,k.jsx)(n6,{handleSelectCollectionCallback:function(e){Z(e)},allFactions:c,imgSize:"lrg"})})]})}),(0,k.jsxs)(nB.P,{me:2,bg:"none",style:{background:"#272523"},value:V,name:"faction",onChange:function(e){Z(e.target.value)},children:[(0,k.jsx)("option",{selected:!0,hidden:!0,disabled:!0,value:"",children:"Please select a faction"}),Q?(0,k.jsxs)("option",{style:{background:"#272523"},value:G.name,children:[(0,k.jsx)(U.E,{src:G.image,width:"20px",height:"20px"}),G.name]},0):c.map(function(e,n){return(0,k.jsxs)("option",{style:{background:"#272523"},value:e.name,children:[(0,k.jsx)(U.E,{src:e.image,width:"50px",height:"50px"}),e.name]},n)})]}),(0,k.jsx)(nV.J1,{children:T})]}),(0,k.jsxs)(nL.NI,{isInvalid:!!b,children:[(0,k.jsx)(nD.l,{children:(0,k.jsxs)(X.U,{justifyContent:"space-between",children:[(0,k.jsxs)(I.x,{children:["Troops To ",x===n8.recall?"Recall":"Deploy",":"]}),x===n8.deploy&&(0,k.jsx)(N.xu,{children:(0,k.jsxs)(X.U,{justifyContent:"space-between",children:[(0,k.jsx)(I.x,{fontSize:14,color:"#aaa",align:"right",children:" Troops Available: "}),(0,k.jsx)(I.x,{fontWeight:"bold",children:ee})]})}),x===n8.recall&&(0,k.jsx)(N.xu,{children:(0,k.jsxs)(X.U,{justifyContent:"space-between",children:[(0,k.jsx)(I.x,{fontSize:14,color:"#aaa",align:"right",children:" Troops Deployed: "}),(0,k.jsx)(I.x,{fontWeight:"bold",children:es})]})})]})}),(0,k.jsxs)(nZ.Y2,{defaultValue:1,min:1,max:x===n8.deploy?ee>0?ee:0:x===n8.recall&&es>0?es:0,name:"quantity",onChange:function(e,n){return D(n)},value:W,children:[(0,k.jsx)(nZ.zu,{}),(0,k.jsxs)(nZ.Fi,{children:[(0,k.jsx)(nZ.WQ,{color:"#ffffff"}),(0,k.jsx)(nZ.Y_,{color:"#ffffff"})]})]}),(0,k.jsx)(nV.J1,{children:b})]}),(0,k.jsx)(P.L,{h:"8"}),(0,k.jsx)(H.M,{children:(0,k.jsx)(nU.Z,{w:"250px",fontSize:{base:"lg",sm:"lg"},onClick:ec,disabled:R,children:x===n8.deploy?"Deploy":"Recall"})})]})}):(0,k.jsx)(N.xu,{textAlign:"center",pt:8,pb:4,px:2,children:(0,k.jsx)(N.xu,{ps:"20px",children:(0,k.jsx)(nU.Z,{w:"250px",fontSize:{base:"xl",sm:"2xl"},stickyIcon:!0,onClick:ei,children:"Connect"})})})})},n9=t(28650),te=t(36526),tn=t(577),tt=t(36354),ts=t(36557),tr=t(24304),ta=t(75421),ti=function(e){var n,t,s=e.controlPoint,r=e.refreshControlPoint,a=(0,w._)((0,C.useState)(),2),i=(a[0],a[1]),o=(0,C.useContext)(eB).game,l=(0,w._)((0,C.useState)(""),2),c=l[0],u=l[1],d=(0,w._)((0,C.useState)(!1),2),h=d[0],p=d[1];(0,C.useRef)(null);var f=(n=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){return o&&u(x(null===(n=o)||void 0===n?void 0:null===(e=n.game)||void 0===e?void 0:e.endAt)),[2]})}),function(){return n.apply(this,arguments)}),x=function(e){return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})},m=(0,nR.S)({base:{stringLength:15},sm:{stringLength:30},md:{stringLength:50},lg:{stringLength:50},xl:{stringLength:50},"2xl":{stringLength:50}}),g=function(e){return e.length>(null==m?void 0:m.stringLength)?e.substring(0,null==m?void 0:m.stringLength)+"...":e};return(0,C.useEffect)(function(){void 0!==s.leaderBoard&&(f(),i((0,k.jsx)(n9.p,{children:s.leaderBoard.filter(function(e,n){return n<5}).map(function(e,n){return(0,k.jsxs)(te.Tr,{children:[(0,k.jsx)("img",{width:40,height:40,src:e.image}),(0,k.jsx)(tn.Td,{textAlign:"center",children:(0,k.jsx)(I.x,{fontSize:{base:14,sm:14},children:e.totalTroops})}),(0,k.jsx)(tn.Td,{textAlign:"center",children:(0,k.jsx)(I.x,{fontSize:{base:14,sm:14},children:g(e.name)})})]},n)})})),p(!0))},[s]),(0,C.useEffect)(function(){p(!1),r()},[]),(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(z.k,{marginLeft:"4",marginRight:"4",children:h&&(null==s?void 0:null===(t=s.leaderBoard[0])||void 0===t?void 0:t.totalTroops)!==0?(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(z.k,{flexDirection:"column",textAlign:"center",justifyContent:"space-around",children:[(0,k.jsx)(tt.x,{children:(0,k.jsxs)(ts.i,{size:"m",children:[(0,k.jsx)(tr.h,{children:(0,k.jsxs)(te.Tr,{children:[(0,k.jsx)(ta.Th,{textAlign:"center",textColor:"#a0aec0"}),(0,k.jsx)(ta.Th,{textAlign:"center",textColor:"#a0aec0",children:"Troops"}),(0,k.jsx)(ta.Th,{textAlign:"center",textColor:"#a0aec0",children:"Faction"})]})}),(0,k.jsx)(n9.p,{children:s.leaderBoard.filter(function(e,n){return n<5}).map(function(e,n){return(0,k.jsxs)(te.Tr,{children:[(0,k.jsx)(nI.q,{src:eC.Z.translate(e.image).avatar(),rounded:"xs"}),(0,k.jsx)(tn.Td,{textAlign:"center",children:(0,k.jsx)(I.x,{fontSize:{base:14,sm:14},children:e.totalTroops})}),(0,k.jsx)(tn.Td,{textAlign:"center",children:(0,k.jsx)(I.x,{fontSize:{base:14,sm:14},children:g(e.name)})})]},n)})})]})}),(0,k.jsx)(z.k,{marginTop:"8",marginBottom:"8",children:(0,k.jsxs)("p",{children:["The faction with the highest troop count on ",c," will receive ",s.points," points"]})})]})}):(0,k.jsxs)(z.k,{flexDirection:"column",textAlign:"center",justifyContent:"space-around",children:[(0,k.jsx)(N.xu,{minH:"200px",children:(0,k.jsx)(H.M,{children:(0,k.jsx)(I.x,{margin:"100",children:" No Troops currently deployed "})})}),(0,k.jsx)(z.k,{marginTop:"12",marginLeft:"8",marginRight:"8",marginBottom:"8",children:(0,k.jsxs)("p",{children:["The faction with the highest troop count on ",c," will recieve rewards!"]})})]})})})},to=t(73292),tl=t(25559),tc=t(68055),tu=t(66946),td=t(26274),th=t.n(td),tp=function(e){var n,t=e.attackerTroops,s=e.defenderTroops,r=e.battleAttack,a=e.displayConclusionCallback,i=e.CheckForKoban,o=e.attackerImage,l=e.defenderImage,c=e.attackersFaction,u=e.defendersFaction,d=function(){console.log("ShowAttackConclusion");for(var e=0,n=0,a="",o=r[0].diceScores1,l=r[0].diceScores2,c=0;c<o.length;c++)o[c]<=l[c]?e++:n++,a+="Attacker: "+o[c]+" Defender: "+l[c]+"<br>";Y.current.innerHTML=a,e<n?(U.current.textContent="Victory!",q.current.textContent="You slew more defenders than you lost",x("brightness(1)"),y("brightness(0.4)"),v({position:"relative",background:"whitesmoke",display:"flex",justifyContent:"center",padding:"5px",borderRadius:"50%",boxSize:"border-box",boxShadow:"0 20px 50px rgba(255, 255, 255, 0.8)"}),R({borderRadius:"50%",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.8)"})):e>n?(U.current.textContent="Defeat!",q.current.textContent="The defenders slew more of your troops than you slew of theirs",x("brightness(0.4)"),y("brightness(1"),R({position:"relative",background:"whitesmoke",display:"flex",justifyContent:"center",padding:"5px",borderRadius:"50%",boxSize:"border-box",boxShadow:"0 20px 50px rgba(255, 255, 255, 0.8)"}),v({borderRadius:"50%",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.8)"})):e==n&&(U.current.textContent="Draw",q.current.textContent="Neither side was able to gain an advantage over the other",x("brightness(1)"),y("brightness(1)"),v({borderRadius:"50%"}),R({borderRadius:"50%"})),G.current.textContent="lost "+e+"/"+Number(t)+" troops",K.current.textContent="lost "+n+"/"+s+" troops",i(),n>0&&et()};(0,ek.eG)();var h=(0,er.C)(function(e){return e.user}),p=(0,w._)((0,C.useState)("brightness(1)"),2),f=p[0],x=p[1],m=(0,w._)((0,C.useState)("brightness(1)"),2),g=m[0],y=m[1],b=(0,w._)((0,C.useState)({}),2),j=b[0],v=b[1],T=(0,w._)((0,C.useState)({}),2),A=T[0],R=T[1],M=(0,w._)((0,C.useState)([]),2),L=M[0],O=M[1],W=(0,w._)((0,C.useState)(!1),2),D=W[0],B=W[1],V=(0,w._)((0,eP.Z)(),2),Z=(V[0],V[1]),U=(0,C.useRef)(),q=(0,C.useRef)(),G=(0,C.useRef)(),K=(0,C.useRef)(),Y=(0,C.useRef)(),Q=(0,C.useRef)(),J=(0,F.q)(),$=J.isOpen,ee=J.onOpen,en=J.onClose;(0,C.useEffect)(function(){if(console.log("useEffect battleAttack",r),0!==r.length){d();return}},[r]);var et=(n=(0,S._)(function(){var e,n,t;return(0,_.__generator)(this,function(s){switch(s.label){case 0:if(n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,Z()];case 1:n=s.sent().signature,s.label=2;case 2:if(!n)return[3,6];s.label=3;case 3:return s.trys.push([3,5,,6]),[4,nj(null===(t=h.address)||void 0===t?void 0:t.toLowerCase(),n)];case 4:return O(s.sent()),[3,6];case 5:return console.log(s.sent()),[3,6];case 6:return[2]}})}),function(){return n.apply(this,arguments)});return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)(E.g,{spacing:"2",children:[(0,k.jsx)(I.x,{fontSize:{base:"28px",sm:"28px"},className:th().className,ref:U,as:"b",children:"Victory!"}),(0,k.jsx)(I.x,{fontSize:{base:"14px",sm:"14px"},className:th().className,ref:q,as:"i",children:"The defenders slew more of your troops than you slew of theirs"})]}),(0,k.jsx)(z.k,{direction:"row",justify:"space-between",justifyContent:"center",children:(0,k.jsx)(N.xu,{mb:4,bg:"#272523",p:2,rounded:"md",w:"90%",justifyContent:"center",children:(0,k.jsxs)(X.U,{justify:"space-between",children:[(0,k.jsx)(N.xu,{w:"45",children:(0,k.jsxs)(E.g,{children:[""!==o?(0,k.jsx)("div",{style:j,children:(0,k.jsx)(nI.q,{boxSize:{base:"50px",sm:"100px"},objectFit:"cover",src:eC.Z.translate(o).fixedWidth(100,100),filter:f})}):(0,k.jsx)(k.Fragment,{}),(0,k.jsx)(I.x,{textAlign:"left",fontSize:{base:"16px",sm:"24px"},children:c})]})}),(0,k.jsx)(N.xu,{w:"10",children:(0,k.jsx)(I.x,{textAlign:"left",fontSize:{base:"12px",sm:"16px"},children:"VS"})}),(0,k.jsx)(N.xu,{w:"45",children:(0,k.jsxs)(E.g,{children:[""!==l?(0,k.jsxs)("div",{style:A,children:[(0,k.jsx)(nI.q,{boxSize:{base:"50px",sm:"100px"},objectFit:"cover",src:eC.Z.translate(l).fixedWidth(100,100),filter:g})," "]}):(0,k.jsx)(k.Fragment,{}),(0,k.jsx)(I.x,{textAlign:"right",fontSize:{base:"16px",sm:"24px"},children:u})]})})]})})}),(0,k.jsx)(z.k,{direction:"row",justify:"space-between",justifyContent:"center",children:(0,k.jsxs)(N.xu,{mb:4,bg:"#272523",p:2,rounded:"md",w:"90%",justifyContent:"center",children:[(0,k.jsx)(H.M,{children:(0,k.jsxs)(X.U,{w:"90%",justify:"space-between",children:[(0,k.jsxs)(I.x,{style:{textAlign:"left"},children:["Attackers ",c]}),(0,k.jsxs)(I.x,{style:{textAlign:"left"},children:["Defenders ",u]})]})}),(0,k.jsx)(H.M,{children:(0,k.jsxs)(X.U,{w:"90%",justify:"space-between",children:[(0,k.jsx)(I.x,{ref:G,children:"This is the attacker outcome"}),(0,k.jsx)(I.x,{ref:K,children:" This is the defender outcome"})]})})]})})]}),(0,k.jsx)(H.M,{children:(0,k.jsxs)(X.U,{w:"90%",justify:"space-between",children:[(0,k.jsx)(nU.Z,{onClick:function(){return a()},w:"200px",fontSize:{base:"sm",sm:"md"},hoverIcon:!1,marginTop:"2",marginBottom:"2",children:"Attack Again"}),(0,k.jsx)(nU.Z,{onClick:function(){Q.current.style.display="block"===Q.current.style.display?"none":"block"},w:"250px",fontSize:{base:"sm",sm:"md"},hoverIcon:!1,marginTop:"2",marginBottom:"2",children:"Detailed Results"}),!L||0===L.length||D?(0,k.jsx)(k.Fragment,{}):(0,k.jsx)(nU.Z,{onClick:function(){return ee()},fontSize:{base:"sm",sm:"md"},children:"Claim Rewards"})]})}),(0,k.jsx)(nT,{isOpen:$,onClose:function(){B(!0),en(),console.log("claimedRewards")},battleRewards:L}),(0,k.jsx)(P.L,{m:"4"}),(0,k.jsx)("div",{ref:Q,style:{display:"none",overflowY:"scroll",height:"300px"},children:(0,k.jsx)(z.k,{direction:"row",justify:"space-between",justifyContent:"center",children:(0,k.jsx)(N.xu,{mb:4,bg:"#272523",p:2,rounded:"md",w:"90%",justifyContent:"center",children:(0,k.jsxs)("form",{children:[(0,k.jsx)(eg.X,{id:"",children:"Results:"}),(0,k.jsx)("p",{ref:Y})]})})})})]})},tf=t(30381),tx=t.n(tf),tm=(0,ek.eG)(),tg=function(e){var n,t,s=e.isOpen,r=e.onClose,a=e.forceRefresh,i=(0,nG.I0)(),o=(0,C.useContext)(eB),l=(0,er.C)(function(e){return e.user}),c=(0,w._)((0,eP.Z)(),2),u=(c[0],c[1]),d=(0,w._)((0,C.useState)(0),2),h=d[0],p=d[1],f=(0,w._)((0,C.useState)(0),2),x=f[0],m=f[1],g=(0,w._)((0,C.useState)(""),2),y=g[0],b=g[1],j=(0,w._)((0,C.useState)(!1),2),v=j[0],T=j[1],A=(0,w._)((0,C.useState)(!1),2),F=A[0],z=A[1],R=(n=(0,S._)(function(){var e,n,t,s,r,i,c;return(0,_.__generator)(this,function(d){switch(d.label){case 0:if(!l.address)return[2];d.label=1;case 1:if(d.trys.push([1,8,9,10]),z(!0),n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,3];return[4,u()];case 2:n=d.sent().signature,d.label=3;case 3:if(!n)return[3,7];return[4,eo.s.withoutKey().ryoshiDynasties.claimDailyRewards(l.address,n)];case 4:return s=(t=d.sent()).data.signature,r=JSON.parse(t.data.metadata),[4,new ez.CH(tm.contracts.resources,nn,l.provider.getSigner()).mintWithSig(r,s)];case 5:return[4,d.sent().wait()];case 6:i=d.sent(),eu.Am.success((0,ey.aS)(i.transactionHash)),T(!1),b("in 24 hours"),o.refreshUser(),a(),d.label=7;case 7:return[3,10];case 8:return console.log(c=d.sent()),eu.Am.error((0,e1.O)(c)),[3,10];case 9:return z(!1),[7];case 10:return[2]}})}),function(){return n.apply(this,arguments)}),E=(t=(0,S._)(function(){return(0,_.__generator)(this,function(e){return l.needsOnboard?new nX.Z().startOnboarding():l.address?l.correctChain||i((0,nq.Ns)()):i((0,nq.Yn)()),[2]})}),function(){return t.apply(this,arguments)});return(0,C.useEffect)(function(){if(s){if(!l.address||!o.user){T(!1),p(0);return}var e=o.user.dailyRewards;if(p(e.streak),m(e.streak%o.config.rewards.daily.length),e.nextClaim){if(Date.parse(e.nextClaim)<=Date.now())T(!0);else{T(!1);var n=new Date(e.nextClaim);b("at "+n.getHours()+":"+tx()(new Date(n)).format("mm")+" on "+tx()(new Date(n)).format("MMM")+" "+n.getDate()+" "+n.getFullYear())}}else T(!0)}},[l.address,s,o.user]),(0,k.jsx)(L.x,{isOpen:s,onClose:r,title:"Claim Daily Reward",children:(0,k.jsxs)(N.xu,{mx:1,pb:4,children:[(0,k.jsx)(I.x,{align:"center",children:"Earn Koban by checking in daily. Multiply your rewards by claiming multiple days in a row!"}),l.address?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Z.M,{columns:{base:4,sm:o.config.rewards.daily.length},gap:1,padding:2,my:4,children:o.config.rewards.daily.map(function(e,n){return(0,k.jsxs)(N.xu,{w:"100%",h:"55",rounded:"lg",color:"#FFD700",border:x==n+1?"2px":"",children:[(0,k.jsxs)(I.x,{fontSize:16,color:"#aaa",textAlign:"center",children:["Day ",n+1]}),(0,k.jsxs)(X.U,{justifyContent:"center",spacing:.5,children:[(0,k.jsx)(I.x,{fontSize:18,color:"white",fontWeight:"bold",textAlign:"center",children:e}),(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/koban.png").convert(),alt:"walletIcon",boxSize:4})]})]},n)})}),(0,k.jsxs)(N.xu,{textAlign:"center",children:[(0,k.jsxs)(I.x,{as:"span",children:["Your current streak is ",(0,k.jsxs)("strong",{children:[h," ",(0,ey._6)(h,"day")]}),". "]}),v?(0,k.jsxs)(I.x,{as:"span",children:["Claim now to increase your streak and earn ",o.config.rewards.daily[x]," Koban"]}):(0,k.jsxs)(I.x,{as:"span",children:["Claim again ",y]})]}),v&&(0,k.jsx)(N.xu,{textAlign:"center",mt:4,children:(0,k.jsx)(L.t,{stickyIcon:!0,onClick:R,isLoading:F,disabled:F,loadingText:"Claiming",children:"Claim Koban"})})]}):(0,k.jsx)(N.xu,{textAlign:"center",mt:4,children:(0,k.jsx)(L.t,{onClick:E,children:"Connect Wallet"})})]})})},ty=t(16441),tb=JSON.parse('[{"type":"constructor","stateMutability":"nonpayable","inputs":[]},{"type":"event","name":"AdminChanged","inputs":[{"type":"address","name":"previousAdmin","internalType":"address","indexed":false},{"type":"address","name":"newAdmin","internalType":"address","indexed":false}],"anonymous":false},{"type":"event","name":"AttackFactionEvent","inputs":[{"type":"address","name":"attacker","internalType":"address","indexed":true},{"type":"uint256","name":"attackId","internalType":"uint256","indexed":true},{"type":"uint256","name":"timestamp","internalType":"uint256","indexed":false}],"anonymous":false},{"type":"event","name":"BeaconUpgraded","inputs":[{"type":"address","name":"beacon","internalType":"address","indexed":true}],"anonymous":false},{"type":"event","name":"Initialized","inputs":[{"type":"uint8","name":"version","internalType":"uint8","indexed":false}],"anonymous":false},{"type":"event","name":"RoleAdminChanged","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32","indexed":true},{"type":"bytes32","name":"previousAdminRole","internalType":"bytes32","indexed":true},{"type":"bytes32","name":"newAdminRole","internalType":"bytes32","indexed":true}],"anonymous":false},{"type":"event","name":"RoleGranted","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32","indexed":true},{"type":"address","name":"account","internalType":"address","indexed":true},{"type":"address","name":"sender","internalType":"address","indexed":true}],"anonymous":false},{"type":"event","name":"RoleRevoked","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32","indexed":true},{"type":"address","name":"account","internalType":"address","indexed":true},{"type":"address","name":"sender","internalType":"address","indexed":true}],"anonymous":false},{"type":"event","name":"Upgraded","inputs":[{"type":"address","name":"implementation","internalType":"address","indexed":true}],"anonymous":false},{"type":"function","stateMutability":"view","outputs":[{"type":"uint8","name":"","internalType":"uint8"}],"name":"CONQUEST","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes32","name":"","internalType":"bytes32"}],"name":"DEFAULT_ADMIN_ROLE","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint8","name":"","internalType":"uint8"}],"name":"SKIRMISH","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes32","name":"","internalType":"bytes32"}],"name":"_hashAttack","inputs":[{"type":"tuple","name":"attack","internalType":"struct BattleField.Attack","components":[{"type":"uint256","name":"timestamp","internalType":"uint256"},{"type":"address","name":"attacker","internalType":"address"},{"type":"uint256","name":"attackId","internalType":"uint256"},{"type":"uint256","name":"quantity","internalType":"uint256"},{"type":"uint8","name":"battleType","internalType":"uint8"}]}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"attackFaction","inputs":[{"type":"tuple","name":"attack","internalType":"struct BattleField.Attack","components":[{"type":"uint256","name":"timestamp","internalType":"uint256"},{"type":"address","name":"attacker","internalType":"address"},{"type":"uint256","name":"attackId","internalType":"uint256"},{"type":"uint256","name":"quantity","internalType":"uint256"},{"type":"uint8","name":"battleType","internalType":"uint8"}]},{"type":"bytes","name":"signature","internalType":"bytes"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint8","name":"","internalType":"uint8"}],"name":"conquestPrice","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes32","name":"","internalType":"bytes32"}],"name":"domainSeparator","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes32","name":"","internalType":"bytes32"}],"name":"getRoleAdmin","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"grantRole","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"},{"type":"address","name":"account","internalType":"address"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"hasRole","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"},{"type":"address","name":"account","internalType":"address"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"initialize","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"bytes32","name":"","internalType":"bytes32"}],"name":"proxiableUUID","inputs":[]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"renounceRole","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"},{"type":"address","name":"account","internalType":"address"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"address","name":"","internalType":"contract IERC1155Burnable"}],"name":"resources","inputs":[]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"revokeRole","inputs":[{"type":"bytes32","name":"role","internalType":"bytes32"},{"type":"address","name":"account","internalType":"address"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"setConquestPrice","inputs":[{"type":"uint8","name":"_conquestPrice","internalType":"uint8"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"setResources","inputs":[{"type":"address","name":"_resources","internalType":"address"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"setSkirmishPrice","inputs":[{"type":"uint8","name":"_skirmishPrice","internalType":"uint8"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint8","name":"","internalType":"uint8"}],"name":"skirmishPrice","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"bool","name":"","internalType":"bool"}],"name":"supportsInterface","inputs":[{"type":"bytes4","name":"interfaceId","internalType":"bytes4"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"upgradeTo","inputs":[{"type":"address","name":"newImplementation","internalType":"address"}]},{"type":"function","stateMutability":"payable","outputs":[],"name":"upgradeToAndCall","inputs":[{"type":"address","name":"newImplementation","internalType":"address"},{"type":"bytes","name":"data","internalType":"bytes"}]}]'),tj=t(9367),tv=function(e){var n,t,s,r,a,i,o,l=e.controlPoint,c=e.refreshControlPoint,u=e.skirmishPrice,d=e.conquestPrice,h=e.allFactions,p=function(){return 2==eR?u:d},f=function(){if(eL(!1),""==e5.attackersFaction){eV("Must select an attacker faction"),eL(!0);return}if(2===eR&&q>Y){eV("Cannot attack with more troops than you have available"),eL(!0);return}if(2===eR&&q>ei){eV("Cannot attack with more troops than the defender has"),eL(!0);return}if(1===eR&&q>3){eV("Max troops for conquest attacks are 3"),eL(!0);return}if(e5.attackersFaction==e5.defendersFaction){eV("Cannot attack your own faction"),eL(!0);return}if(Y<=1){eV("You must have at least 2 troops on the point to attack"),eL(!0);return}if(ei<=0){eV("Defender must have at least 1 troop"),eL(!0);return}if(q<=0){eV("Must attack with atleast 1 troop"),eL(!0);return}(null==A?void 0:A.state)===eD.pf.RESET&&(eV("Game has ended. Please wait until the next game begins"),eL(!0)),ne()},x=function(){l.leaderBoard.forEach(function(e){e.name===e5.defendersFaction&&(eo(e.totalTroops),ef(e.image))})},m=(0,nG.I0)(),g=(0,ek.eG)(),y=(0,er.C)(function(e){return e.user}),b=(0,w._)((0,eP.Z)(),2),j=(b[0],b[1]),v=(0,C.useContext)(eB),T=(v.config,v.user),A=v.game,R=(0,w._)((0,C.useState)(!1),2),M=R[0],L=R[1],D=(0,F.q)(),B=D.isOpen,V=D.onOpen,Z=D.onClose,U=(0,w._)((0,C.useState)(0),2),q=U[0],G=U[1],K=(0,w._)((0,C.useState)(1),2),Y=K[0],Q=K[1],J=(0,w._)((0,C.useState)([]),2),$=J[0],ee=J[1],en=(0,w._)((0,C.useState)(""),2),et=en[0],es=en[1],ea=(0,w._)((0,C.useState)(0),2),ei=ea[0],eo=ea[1],el=(0,w._)((0,C.useState)([]),2),ec=el[0],ed=el[1],eh=(0,w._)((0,C.useState)(""),2),ep=eh[0],ef=eh[1],ex=(0,w._)((0,C.useState)(!1),2),em=ex[0],eg=ex[1],eb=(0,w._)((0,C.useState)([]),2),ej=eb[0],ev=eb[1],ew=(0,w._)((0,C.useState)([]),2),eS=ew[0],e_=ew[1],eT=(0,w._)((0,C.useState)(1),2),eR=eT[0],eI=eT[1],eE=(0,w._)((0,C.useState)(!1),2),eM=eE[0],eL=eE[1],eO=(0,w._)((0,C.useState)(""),2),eW=eO[0],eV=eO[1],eZ=(0,w._)((0,C.useState)(0),2),eU=eZ[0],eX=eZ[1],eq=(0,w._)((0,C.useState)(!1),2),eG=eq[0],eK=eq[1],eY=(0,w._)((0,C.useState)("Attacking..."),2),eQ=eY[0],eJ=eY[1],e$=(0,w._)((0,C.useState)([]),2),e0=e$[0],e2=e$[1],e4=[{id:1,name:"Conquest",maxTroops:3,desc:"Launch a relentless assault, battling until all troops are eliminated or the opposing faction is defeated"},{id:2,name:"Skirmish",maxTroops:1/0,desc:"Engage in a single attack using the number of troops you wager"}],e3=(0,w._)((0,C.useState)({attackersFaction:"",defendersFaction:""}),2),e5=e3[0],e6=e3[1],e8=(n=(0,S._)(function(){return(0,_.__generator)(this,function(e){return y.address||(y.needsOnboard?new nX.Z().startOnboarding():y.address?y.correctChain||m((0,nq.Ns)()):m((0,nq.Yn)())),[2]})}),function(){return n.apply(this,arguments)}),e7=(t=(0,S._)(function(){var e,n,t;return(0,_.__generator)(this,function(s){switch(s.label){case 0:if(n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,j()];case 1:n=s.sent().signature,s.label=2;case 2:if(!n)return[3,6];s.label=3;case 3:return s.trys.push([3,5,,6]),[4,nl(null===(t=y.address)||void 0===t?void 0:t.toLowerCase(),n)];case 4:return ev(s.sent().data.data.filter(function(e){return e.controlPointId==l.id})),[3,6];case 5:return console.log(s.sent()),[3,6];case 6:return[2]}})}),function(){return t.apply(this,arguments)}),e9=(s=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:return n=new eF.r(g.rpc.read),[4,new ez.CH(g.contracts.resources,nn,n).isApprovedForAll(null===(e=y.address)||void 0===e?void 0:e.toLowerCase(),g.contracts.battleField)];case 1:return[2,t.sent()]}})}),function(){return s.apply(this,arguments)}),ne=(r=(0,S._)(function(){var e,n,t,s,r,a,i,o,c,u,d,h,f,x,m,b;return(0,_.__generator)(this,function(v){switch(v.label){case 0:if(eK(!0),n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,j()];case 1:n=v.sent().signature,v.label=2;case 2:if(!n)return[3,12];v.label=3;case 3:return v.trys.push([3,10,11,12]),[4,e9()];case 4:if(s=v.sent(),eU<Number(p())*Number(q))return eu.Am.error("You need at least "+p()+" Koban per troop to attack"),eK(!1),[2];if(s)return[3,7];return eu.Am.error("Please approve the pop up to allow the contract to spend your resources"),eJ("Approving contract..."),[4,new ez.CH(g.contracts.resources,nn,y.provider.getSigner()).setApprovalForAll(g.contracts.battleField,!0)];case 5:return[4,v.sent().wait()];case 6:r=v.sent(),eu.Am.success((0,ey.aS)(r.transactionHash)),v.label=7;case 7:return a=l.id,i=l.leaderBoard.filter(function(e){return e.name===e5.attackersFaction})[0].id,o=l.leaderBoard.filter(function(e){return e.name===e5.defendersFaction})[0].id,eJ("Attacking..."),[4,nb(null===(t=y.address)||void 0===t?void 0:t.toLowerCase(),n,Number(q),a,i,o,eR)];case 8:return u=Number((c=v.sent()).data.data.timestampInSeconds),d=c.data.data.attacker,h=Number(c.data.data.attackId),f=Number(c.data.data.troops),x=c.data.data.signature,m={timestamp:u,attacker:d,attackId:h,quantity:f,battleType:eR},[4,new ez.CH(g.contracts.battleField,tb,y.provider.getSigner()).attackFaction(m,x)];case 9:return v.sent(),[3,12];case 10:return console.log(b=v.sent()),eu.Am.error((0,e1.O)(b)),[3,12];case 11:return eK(!1),[7];case 12:return[2]}})}),function(){return r.apply(this,arguments)}),nt=(a=(0,S._)(function(){var e,n,t;return(0,_.__generator)(this,function(s){switch(s.label){case 0:return n=new eF.r(g.rpc.read),[4,new ez.CH(g.contracts.resources,nn,n).balanceOf(null===(e=y.address)||void 0===e?void 0:e.toLowerCase(),1)];case 1:return t=s.sent(),eX(Number(ty.hexValue(eN.O$.from(t)))),[2]}})}),function(){return a.apply(this,arguments)}),ns=function(){L(!M),console.log("displayConclusion",M)};(0,C.useEffect)(function(){l&&ed(l.leaderBoard.map(function(e,n){return e.totalTroops>0?(0,k.jsx)("option",{style:{background:"#272523"},value:e.name,children:e.name},n):null}))},[l]),(0,C.useEffect)(function(){e5.defendersFaction&&(eL(!1),x())},[e5.defendersFaction]),(0,C.useEffect)(function(){c(),nt(),e7()},[]),(0,C.useEffect)(function(){if(!T)return},[T]),(0,C.useEffect)(function(){if(ej.length>0&&h.length>0&&!em){var e=[];ej.forEach(function(n){var t=e.find(function(e){return e.factionId===n.factionId});void 0===t?e.push({name:h.find(function(e){return e.id===n.factionId}).name,factionId:n.factionId,troops:n.troops,image:h.find(function(e){return e.id===n.factionId}).image}):t.troops+=n.troops}),e_(e)}},[ej,h]),(0,C.useEffect)(function(){eS.length>0&&!em&&(ee(eS.map(function(e,n){return(0,k.jsx)("option",{style:{background:"#272523"},value:e.name,children:e.name},n)})),eg(!0))},[eS]),(0,C.useEffect)(function(){if(0!==e0.length){eK(!1);return}},[e0]);var nr=(0,w._)((0,C.useState)(!1),2),na=(nr[0],nr[1]);return(0,C.useEffect)(function(){var e=function(){na(!0),console.log("connected")},n=function(){na(!1),console.log("disconnected")},t=function(e){console.log("BATTLE_ATTACK",e);var n=JSON.parse(e);ns(),e2(n)};if(y.address){var s=(0,tj.io)("".concat(g.urls.cmsSocket,"ryoshi-dynasties/battles?walletAddress=").concat(y.address.toLowerCase()));return s.on("connect",e),s.on("disconnect",n),s.on("BATTLE_ATTACK",t),function(){s.off("connect",e),s.off("disconnect",n),s.off("BATTLE_ATTACK",t)}}},[!!y.address]),(0,k.jsxs)(z.k,{flexDirection:"column",textAlign:"center",justifyContent:"space-around",children:[y.address?(0,k.jsx)(k.Fragment,{children:M?(0,k.jsx)(tp,{attackerTroops:q,defenderTroops:ei,battleAttack:e0,displayConclusionCallback:ns,CheckForKoban:nt,attackerImage:et,defenderImage:ep,attackersFaction:e5.attackersFaction,defendersFaction:e5.defendersFaction}):(0,k.jsxs)("div",{children:[(0,k.jsx)(H.M,{children:(0,k.jsx)(z.k,{justifyContent:"center",w:"90%",children:(0,k.jsx)(I.x,{textAlign:"center",fontSize:"14px",children:"Faction owners can use deployed troops to attack other factions"})})}),(0,k.jsx)(P.L,{m:"4"}),(0,k.jsx)(H.M,{children:(0,k.jsxs)(E.g,{justifyContent:"space-between",children:[(0,k.jsxs)(nB.P,{name:"attackersFaction",backgroundColor:"#292626",w:"90%",value:e5.attackersFaction,onChange:function(e){if(e6((0,W._)((0,O._)({},e5),(0,to._)({},e.target.name,e.target.value))),""!==e.target.value){var n=eS.filter(function(n){return(null==n?void 0:n.name)===e.target.value})[0];console.log("faction",n),Q(n.troops),es(n.image)}else Q(0)},children:[(0,k.jsx)("option",{selected:!0,hidden:!0,disabled:!0,value:"",children:"Select Attacker"}),$]}),(0,k.jsxs)(nB.P,{name:"defendersFaction",backgroundColor:"#292626",w:"90%",value:e5.defendersFaction,onChange:function(e){e6((0,W._)((0,O._)({},e5),(0,to._)({},e.target.name,e.target.value))),""!==e.target.value?eo(l.leaderBoard.filter(function(n){return n.name===e.target.value})[0].totalTroops):eo(0)},children:[(0,k.jsx)("option",{selected:!0,hidden:!0,disabled:!0,value:"",children:"Select Defender"}),ec]}),""!==e5.attackersFaction?(0,k.jsxs)(I.x,{textAlign:"left",fontSize:"16px",children:["Troops You Deployed: ",Y]}):(0,k.jsx)(k.Fragment,{}),(0,k.jsxs)(nZ.Y2,{defaultValue:1,min:1,max:null===(i=e4.find(function(e){return e.id===eR}))||void 0===i?void 0:i.maxTroops,name:"quantity",w:"80%",onChange:function(e){return G(e)},value:q,bgColor:"#292626",borderRadius:"10px",children:[(0,k.jsx)(nZ.zu,{}),(0,k.jsxs)(nZ.Fi,{children:[(0,k.jsx)(nZ.WQ,{color:"#ffffff"}),(0,k.jsx)(nZ.Y_,{color:"#ffffff"})]})]}),(0,k.jsx)(H.M,{children:(0,k.jsxs)(z.k,{direction:"row",justify:"center",mb:2,children:[(0,k.jsx)(eA.Z,{isActive:1===eR,onClick:function(){return eI(1)},children:"Conquest"}),(0,k.jsx)(eA.Z,{isActive:2===eR,onClick:function(){return eI(2)},children:"Skirmish"})]})}),(0,k.jsx)(I.x,{as:"i",children:null===(o=e4.find(function(e){return e.id===eR}))||void 0===o?void 0:o.desc})]})}),(0,k.jsx)(P.L,{m:"4"}),(0,k.jsx)(P.L,{m:"4"}),(0,k.jsx)(z.k,{direction:"row",justify:"space-between",justifyContent:"center",children:(0,k.jsx)(N.xu,{mb:4,bg:"#272523",p:2,rounded:"md",w:"90%",justifyContent:"center",children:(0,k.jsxs)(X.U,{justify:"space-between",children:[(0,k.jsx)(N.xu,{w:"45",children:(0,k.jsxs)(E.g,{children:[""!==et?(0,k.jsx)(nI.q,{boxSize:{base:"50px",sm:"100px"},objectFit:"cover",src:eC.Z.translate(et).fixedWidth(100,100)}):(0,k.jsx)(k.Fragment,{}),(0,k.jsx)(I.x,{textAlign:"left",fontSize:{base:"16px",sm:"24px"},children:e5.attackersFaction}),(0,k.jsxs)(I.x,{textAlign:"left",fontSize:{base:"12px",sm:"16px"},children:["Attack Strength: ",q]})]})}),(0,k.jsx)(N.xu,{w:"10",children:(0,k.jsx)(I.x,{textAlign:"left",fontSize:{base:"12px",sm:"16px"},children:"VS"})}),(0,k.jsx)(N.xu,{w:"45",children:(0,k.jsxs)(E.g,{children:[""!==ep?(0,k.jsx)(nI.q,{boxSize:{base:"50px",sm:"100px"},objectFit:"cover",src:eC.Z.translate(ep).fixedWidth(100,100)}):(0,k.jsx)(k.Fragment,{}),(0,k.jsx)(I.x,{textAlign:"right",fontSize:{base:"16px",sm:"24px"},children:e5.defendersFaction}),(0,k.jsxs)(I.x,{textAlign:"right",fontSize:{base:"12px",sm:"16px"},children:["Troops stationed: ",ei]})]})})]})})}),(0,k.jsx)(z.k,{justify:"center",align:"center",children:(0,k.jsx)(N.xu,{p:"1",children:eM&&(0,k.jsxs)(tl.b,{status:"error",children:[(0,k.jsx)(tc.z,{}),(0,k.jsx)(tu.C,{children:eW})]})})}),(0,k.jsx)(H.M,{children:(0,k.jsxs)(X.U,{children:[(0,k.jsx)(I.x,{fontSize:"14px",children:"Costs"}),(0,k.jsxs)(I.x,{cursor:"pointer",fontSize:"14px",onClick:function(){return V()},children:[p()," $Koban"]}),(0,k.jsxs)(I.x,{fontSize:"14px",children:["per troop you attack with (",p()*q,")"]})]})}),(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)(N.xu,{ps:"20px",children:(0,k.jsx)(nU.Z,{minW:"200px",size:{base:"md",sm:"lg"},stickyIcon:!0,onClick:function(){return f()},isLoading:eG,disabled:eG,marginTop:"2",marginBottom:"2",loadingText:eQ,children:y.address?"Attack":"Connect"})})}),(0,k.jsx)(H.M,{children:(0,k.jsx)(z.k,{justifyContent:"space-between",w:"90%",children:(0,k.jsxs)(I.x,{fontSize:"12px",children:["Your $Koban: ",eU]})})})]})}):(0,k.jsx)(N.xu,{textAlign:"center",pt:8,pb:4,px:2,children:(0,k.jsx)(N.xu,{ps:"20px",children:(0,k.jsx)(nU.Z,{w:"250px",fontSize:{base:"xl",sm:"2xl"},stickyIcon:!0,onClick:e8,children:"Connect"})})}),(0,k.jsx)(tg,{isOpen:B,onClose:Z,forceRefresh:function(){}})]})},tw=t(41093),tk={info:"info",deploy:"deploy",attack:"attack"},tC=function(e){var n=e.isOpen,t=e.onClose,s=e.controlPoint,r=e.refreshControlPoint,a=e.skirmishPrice,i=e.conquestPrice,o=e.regionName,l=e.allFactions,c=(0,C.useContext)(eB).game,u=(0,w._)((0,C.useState)(!0),2),d=u[0],h=u[1],p=(0,w._)((0,C.useState)(""),2),f=p[0],x=p[1];(0,er.C)(function(e){return e.user});var m=(0,w._)((0,C.useState)(0),2),g=m[0],y=m[1],b=(0,w._)((0,C.useState)(tk.info),2),j=b[0],v=b[1],S=(0,w._)((0,C.useState)(!1),2),_=S[0],T=S[1],A=(0,w._)((0,C.useState)(),2),F=A[0],R=A[1],E=(0,C.useCallback)(function(){v(tk.info),t()},[]),P=function(){"Kagutsuma"===o?y(3):"Seashrine Isles"===o?y(5):"The Palisades"===o?y(4):"Izanami's Cradle"===o?y(3):"Jurojin Highlands"===o?y(7):"Kuraokami's Expanse"===o?y(5):"Dunes of Bishamon"===o&&y(2)};return(0,C.useEffect)(function(){x(s.name+" : "+s.points+" points"),P(),h(!1),T((null==c?void 0:c.state)===eD.pf.IN_PROGRESS)},[s]),(0,k.jsx)(L.x,{isOpen:n,onClose:E,title:f,isCentered:!1,utilBtnTitle:F?(0,k.jsx)(e_.R,{}):(0,k.jsx)(k.Fragment,{children:"?"}),onUtilBtnClick:function(){F?R(void 0):R("faq")},children:"faq"===F?(0,k.jsx)(tw.Z,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(H.M,{children:(0,k.jsxs)(I.x,{as:"i",marginBottom:"2",children:[" Region: ",o,", Total Control Bonus: ",g," "]})}),d?(0,k.jsx)(nM.Z,{animation:"border",role:"status",size:"sm",className:"ms-1",children:(0,k.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("div",{className:"row mt-2 mt-sm-2",children:(0,k.jsxs)("div",{className:"",children:[(0,k.jsx)(H.M,{children:(0,k.jsxs)(z.k,{direction:"row",justify:"center",mb:2,children:[(0,k.jsx)(eA.Z,{isActive:j===tk.info,onClick:function(){return v(tk.info)},fontSize:{base:"12",sm:"14"},padding:{base:"0 10px",sm:"0 20px"},margin:{base:"0 5px",sm:"0 10px"},children:"Leaders"}),(0,k.jsx)(eA.Z,{isActive:j===tk.deploy,onClick:function(){return v(tk.deploy)},fontSize:{base:"12",sm:"14"},padding:{base:"0 10px",sm:"0 20px"},margin:{base:"0 5px",sm:"0 10px"},children:"Dispatch"}),(0,k.jsx)(eA.Z,{isActive:j===tk.attack,onClick:function(){return v(tk.attack)},fontSize:{base:"12",sm:"14"},padding:{base:"0 10px",sm:"0 20px"},margin:{base:"0 5px",sm:"0 10px"},children:"Attack"})]})}),(0,k.jsxs)(N.xu,{mt:4,children:[j===tk.info&&(0,k.jsx)(ti,{controlPoint:s,refreshControlPoint:r}),j===tk.deploy&&(_?(0,k.jsx)(n7,{controlPoint:s,refreshControlPoint:r,allFactions:l.sort(function(e,n){return e.name.localeCompare(n.name)})}):(0,k.jsx)(N.xu,{minH:"200px",children:(0,k.jsx)(H.M,{children:(0,k.jsx)(I.x,{margin:"100",children:" No game currently active "})})})),j===tk.attack&&(_?(0,k.jsx)(tv,{controlPoint:s,refreshControlPoint:r,skirmishPrice:a,conquestPrice:i,allFactions:l}):(0,k.jsx)(N.xu,{minH:"200px",children:(0,k.jsx)(H.M,{children:(0,k.jsx)(I.x,{margin:"100",children:" No game currently active "})})}))]})]})})})]})})},tS=t(4453),t_=t(80743),tT=t(89594),tA=t(24368),tF=(0,ek.eG)(),tz=function(e){var n,t,s,r=e.onBack,a=(0,er.C)(function(e){return e.user}),i=(0,C.useRef)(null),o=(0,C.useRef)(null),l=(0,w._)((0,C.useState)("00:00:00"),2),c=l[0],u=l[1],d=(0,w._)((0,C.useState)(""),2),h=d[0],p=d[1],f=(0,C.useContext)(eB),x=(0,C.useContext)(eB),m=x.game,g=x.user,y=(0,w._)((0,C.useState)(0),2),b=y[0],j=y[1],v=(0,w._)((0,C.useState)(!1),2),T=v[0],A=v[1],F=(0,w._)((0,tS.a)("(max-width: 768px)"),1)[0],R=(0,w._)((0,C.useState)(0),2),E=R[0],M=R[1],L=(0,w._)((0,C.useState)(0),2),O=L[0],W=L[1],D=(n=(0,S._)(function(){var e;return(0,_.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),A(!0),[4,ei.Z.getWallet(a.address,{collection:tF.contracts.resources})];case 1:return(e=n.sent().data.find(function(e){return"1"===e.nftId}))&&j((0,ey.lY)(e.balance)),[3,4];case 2:return console.log(n.sent()),[3,4];case 3:return A(!1),[7];case 4:return[2]}})}),function(){return n.apply(this,arguments)}),B=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=Date.parse(e)-Date.now()-n;return{total:t,days:Math.floor(t/864e5),hours:Math.floor(t/1e3/60/60%24),minutes:Math.floor(t/1e3/60%60),seconds:Math.floor(t/1e3%60)}},V=function(e){var n=B(e,36e5),t=n.total,s=n.hours,r=n.days,a=n.minutes,i=n.seconds;t>=0&&u(r>0?r+" days ":(s>9?s:"0"+s)+":"+(a>9?a:"0"+a)+":"+(i>9?i:"0"+i))},q=function(e){var n=B(e),t=n.total,s=(n.hours,n.days,n.minutes),r=n.seconds;t>=0?p((s>9?s:"0"+s)+":"+(r>9?r:"0"+r)):p("")},G=function(e){V(e),i.current&&clearInterval(i.current);var n=setInterval(function(){V(e)},1e3);i.current=n},K=function(e){q(e),o.current&&clearInterval(o.current);var n=setInterval(function(){q(e)},1e3);o.current=n},Y=(t=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){return m&&G(null===(n=m)||void 0===n?void 0:null===(e=n.game)||void 0===e?void 0:e.endAt),[2]})}),function(){return t.apply(this,arguments)}),Q=function(){if(g){var e=null==g?void 0:g.armies.redeploymentDelay,n=new Date;n.setSeconds(n.getSeconds()+e),K(n)}};(0,C.useEffect)(function(){Y()},[null==m?void 0:null===(s=m.game)||void 0===s?void 0:s.endAt]),(0,C.useEffect)(function(){var e,n,t,s,r,a,i,o,l,c,u,d,h,p,x,m,g,y;f&&((null===(t=f.user)||void 0===t?void 0:null===(n=t.season)||void 0===n?void 0:null===(e=n.troops)||void 0===e?void 0:e.undeployed)!==void 0&&M(null===(d=f.user)||void 0===d?void 0:null===(u=d.season)||void 0===u?void 0:null===(c=u.troops)||void 0===c?void 0:c.undeployed),(null===(a=f.user)||void 0===a?void 0:null===(r=a.season)||void 0===r?void 0:null===(s=r.troops)||void 0===s?void 0:s.deployed)!==void 0&&(null===(l=f.user)||void 0===l?void 0:null===(o=l.season)||void 0===o?void 0:null===(i=o.troops)||void 0===i?void 0:i.undeployed)!==void 0&&W((null===(x=f.user)||void 0===x?void 0:null===(p=x.season)||void 0===p?void 0:null===(h=p.troops)||void 0===h?void 0:h.deployed)+(null===(y=f.user)||void 0===y?void 0:null===(g=y.season)||void 0===g?void 0:null===(m=g.troops)||void 0===m?void 0:m.undeployed)),Q())},[f]),(0,C.useEffect)(function(){a.address&&D()},[a.address]);var J=(0,w._)((0,C.useState)(-1),2),$=(J[0],J[1]);return(0,C.useEffect)(function(){F?$(0):$(-1)},[F]),(0,k.jsx)(N.xu,{position:"absolute",top:0,left:0,w:"100%",pointerEvents:"none",children:(0,k.jsxs)(z.k,{direction:"row",justify:"space-between",children:[(0,k.jsx)(tA.Z,{onBack:r}),(0,k.jsx)(P.L,{}),(0,k.jsxs)(N.xu,{mb:4,mt:6,mr:2,justifyContent:"right",bg:(a.theme,"#272523EE"),rounded:"md",w:{base:"200px",sm:"200px"},children:[(0,k.jsx)(eX.U,{defaultIndex:[0],allowToggle:!0,paddingRight:0,justifyContent:"right",children:(0,k.jsxs)(eq.Q,{border:"none",children:[(0,k.jsx)(eG.K,{pointerEvents:"auto",children:T?(0,k.jsx)(t_.E,{size:"xs",colorScheme:"orange",isIndeterminate:!0,w:"full"}):(0,k.jsx)(k.Fragment,{children:a.address?(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(z.k,{justify:"right",align:"right",children:(0,k.jsxs)(X.U,{justifyContent:"right",marginTop:"0",children:[(0,k.jsx)(I.x,{fontSize:"xs",color:"#aaa",zIndex:"9",children:"Game End:"}),(0,k.jsxs)(I.x,{fontWeight:"bold",zIndex:"9",children:[" ",c]}),(0,k.jsx)(eK.X,{color:"#ffffff"})]})})}):(0,k.jsx)(I.x,{align:"center",children:"Connect wallet for stats"})})}),(0,k.jsxs)(eY.H,{pb:4,alignItems:"right",children:[(0,k.jsx)(H.M,{children:(0,k.jsxs)(tT.Vp,{variant:"outline",children:[(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/koban.png").convert(),alt:"troopsIcon",boxSize:4}),(0,k.jsx)(N.xu,{ms:1,children:T?(0,k.jsx)(t_.E,{size:"xs",colorScheme:"orange",isIndeterminate:!0,w:"full"}):(0,k.jsx)(k.Fragment,{children:b})})]})}),(0,k.jsx)(z.k,{justify:"right",align:"right",children:(0,k.jsxs)(Z.M,{columns:2,my:4,px:1,children:[(0,k.jsx)(N.xu,{color:"#aaa",children:"Available:"}),(0,k.jsx)(z.k,{textAlign:"end",fontWeight:"bold",alignContent:"space-between",children:(0,k.jsxs)(X.U,{textAlign:"end",children:[(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/troops.png").convert(),alt:"troopsIcon",boxSize:4}),(0,k.jsx)(I.x,{children:E})]})}),(0,k.jsx)(N.xu,{color:"#aaa",children:"Total:"}),(0,k.jsx)(N.xu,{textAlign:"end",fontWeight:"bold",children:(0,k.jsxs)(X.U,{textAlign:"end",children:[(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/troops.png").convert(),alt:"troopsIcon",boxSize:4}),(0,k.jsx)(I.x,{children:O})]})})]})})]})]})}),""!==h&&(0,k.jsx)(N.xu,{mt:-3,bg:"#cc2828",p:2,roundedBottom:"md",w:{base:"200px",sm:"200px"},h:{base:"35px",sm:"35px"},children:(0,k.jsxs)(X.U,{justifyContent:"space-between",children:[(0,k.jsx)(I.x,{fontSize:"xs",children:"Troop Cooldown:"}),(0,k.jsx)(I.x,{verticalAlign:"bottom",fontWeight:"bold",children:h})]})})]})]})})},tN=t(90138),tR=t(16944),tI=t.n(tR),tE=(0,C.createContext)(null),tP=t(64362),tH=function(e){var n,t,s,r,a,i,o=e.onChange,l=function(e){eh(e)},c=(0,C.useContext)(tE).getPreloadedImage,u=(0,er.C)(function(e){return e.user}),d=(0,ek.eG)(),h=(0,C.useContext)(eB),p=(h.config,h.user,h.game),f=(0,w._)((0,C.useState)(""),2),x=f[0],m=f[1],g=(0,C.useRef)(null),y=(0,F.q)(),b=y.isOpen,j=y.onOpen,v=y.onClose,T=(0,w._)((0,C.useState)([]),2),A=T[0],R=T[1],E=(0,w._)((0,C.useState)({offsetX:0,offsetY:0,scale:1}),2),P=(E[0],E[1]),H=(0,w._)((0,C.useState)(0),2),M=H[0],O=H[1],W=(0,w._)((0,C.useState)(0),2),D=W[0],B=W[1],V=(0,w._)((0,C.useState)([]),2),Z=V[0];V[1];var X=(0,w._)((0,C.useState)([]),2),q=X[0];X[1];var G=(0,w._)((0,C.useState)(0),2),K=G[0],Y=G[1],Q=(0,w._)((0,C.useState)(),2),J=Q[0],$=Q[1],ee=(0,F.q)(),en=ee.isOpen,et=ee.onOpen;ee.onClose,(0,C.useEffect)(function(){g.current&&(0,g.current.zoomToElement)(x)},[x]);var es=function(e,n){P({offsetX:e.state.positionX,offsetY:e.state.positionY,scale:e.state.scale})};(0,S._)(function(){return(0,_.__generator)(this,function(e){return[2]})});var ea=(0,w._)((0,C.useState)(""),2),ei=ea[0],eo=ea[1],el=(0,w._)((0,C.useState)(0),2),ec=el[0],eu=el[1];(0,C.useEffect)(function(){ed(ec)},[ec]);var ed=(n=(0,S._)(function(e){var n,t;return(0,_.__generator)(this,function(s){switch(s.label){case 0:if(0===e||0===Z.length)return[2];return n=0,t=0,Z.forEach(function(s){s.props.alt===e&&(n=s.props.coords.split(",")[0],t=s.props.coords.split(",")[1])}),$((0,k.jsx)(U.E,{position:"relative",src:"/img/battle-bay/explosion.png",width:1250,height:1035,left:n-625,top:t-517.5,zIndex:"9"})),[4,new Promise(function(e){return setTimeout(e,1e3)})];case 1:return s.sent(),$((0,k.jsx)(U.E,{position:"relative",src:"/img/battle-bay/bld0.png",width:0,height:0,left:0,top:0,zIndex:"9"})),eu(0),[2]}})}),function(e){return n.apply(this,arguments)}),eh=(t=(0,S._)(function(e){var n;return(0,_.__generator)(this,function(t){return ny(e,null===(n=p)||void 0===n?void 0:n.game.id).then(function(e){R(e)}),[2]})}),function(e){return t.apply(this,arguments)}),ep=(s=(0,S._)(function(){var e;return(0,_.__generator)(this,function(n){return ny(K,null===(e=p)||void 0===e?void 0:e.game.id).then(function(e){R(e)}),[2]})}),function(){return s.apply(this,arguments)});(0,C.useEffect)(function(){if(0===Z.length)return},[Z]),(0,C.useEffect)(function(){(null==g?void 0:g.current)&&m("fancyMenu")},[null==g?void 0:g.current]),(0,S._)(function(){return(0,_.__generator)(this,function(e){return[2]})});var ef=(r=(0,S._)(function(){var e,n,t,s;return(0,_.__generator)(this,function(r){switch(r.label){case 0:return e=new eF.r(d.rpc.read),[4,(n=new ez.CH(d.contracts.battleField,tb,e)).skirmishPrice()];case 1:return t=r.sent(),[4,n.conquestPrice()];case 2:return s=r.sent(),O(Number(ty.hexValue(eN.O$.from(t)))),B(Number(ty.hexValue(eN.O$.from(s)))),[2]}})}),function(){return r.apply(this,arguments)}),ex=(0,w._)((0,C.useState)([]),2),em=ex[0],eg=ex[1],ey=(a=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:return[4,nx(null===(e=p)||void 0===e?void 0:e.game.id,null===(n=p)||void 0===n?void 0:n.season.id)];case 1:return eg(t.sent()),[2]}})}),function(){return a.apply(this,arguments)}),eb=(0,w._)((0,C.useState)(!1),2),ej=eb[0],ev=eb[1],ew=(0,nR.S)({base:{scale:.4,initialPosition:{x:-400,y:-127},minScale:.15},sm:{scale:.41,initialPosition:{x:-335,y:-113},minScale:.2},md:{scale:.42,initialPosition:{x:-185,y:-163},minScale:.3},lg:{scale:.43,initialPosition:{x:281,y:-33},minScale:.45},xl:{scale:.44,initialPosition:{x:.78,y:-123},minScale:.44},"2xl":{scale:.45,initialPosition:{x:268,y:-33},minScale:.45},xxl:{scale:1,initialPosition:{x:-20,y:-35},minScale:1.1}});(0,C.useEffect)(function(){ev(!0),ef()},[]),(0,C.useEffect)(function(){p&&ey()},[p]);var eS=(0,w._)((0,C.useState)(!1),2),e_=(eS[0],eS[1]);(0,C.useEffect)(function(){var e=function(){e_(!0),console.log("connected")},n=function(){e_(!1),console.log("disconnected")},t=function(e){console.log("BATTLE_FINISHED",e),eu(JSON.parse(e).controlPointId)};if(u.address){console.log("connecting to socket...");var s=(0,tj.io)("".concat(d.urls.cmsSocket,"ryoshi-dynasties/battles?walletAddress=").concat(u.address.toLowerCase()));return s.on("connect",e),s.on("disconnect",n),s.on("BATTLE_FINISHED",t),function(){s.off("connect",e),s.off("disconnect",n),s.off("BATTLE_FINISHED",t)}}},[!!u.address]);var eT=function(e,n){eo(n),Y(e),l(e),j()},eA=function(e){if(!p)return 0;p.game.parent.map.regions.map(function(n){return n.controlPoints.map(function(t,s){return t.name==e?eT(t.id,n.name):null})})},eR=(0,w._)((0,C.useState)(!1),2),eI=eR[0],eE=eR[1],eP=(0,w._)((0,C.useState)([]),2),eH=eP[0],eM=eP[1],eL=(i=(0,S._)(function(){var e;return(0,_.__generator)(this,function(n){return eI||!p||(e=[],p.game.parent.map.regions.map(function(n){return n.controlPoints.map(function(n){return e.push({name:n.name,image:"img/avatar.jpg"})})}),e.forEach(function(e){return p.gameLeaders.forEach(function(n){return e.name===n.name?e.image=n.factions[0].image:null})}),eM(e),eE(!0)),[2]})}),function(){return i.apply(this,arguments)});(0,C.useEffect)(function(){p&&(eL(),p.state===eD.pf.RESET&&et())},[p]),(0,C.useEffect)(function(){if(!eI)return},[eI]);var eO=function(e){if(!eI)return"img/avatar.jpg";var n=eH.find(function(n){return n.name===e});if(n)return n.image};return(0,k.jsxs)("section",{children:[(0,k.jsx)(tC,{isOpen:b,onClose:v,controlPoint:A,refreshControlPoint:ep,skirmishPrice:M,conquestPrice:D,regionName:ei,allFactions:em}),(0,k.jsxs)(N.xu,{position:"relative",h:"calc(100vh - 74px)",backgroundImage:eC.Z.translate("/img/ryoshi-dynasties/village/background-".concat(u.theme,".png")).convert(),backgroundSize:"cover",children:[ej&&(0,k.jsx)(nE.d$,{ref:g,onZoom:es,onPinching:es,onPinchingStop:es,onPanningStop:es,initialScale:null==ew?void 0:ew.scale,initialPositionX:null==ew?void 0:ew.initialPosition.x,initialPositionY:null==ew?void 0:ew.initialPosition.y,minScale:null==ew?void 0:ew.minScale,maxScale:1,children:function(e){return(0,k.jsx)(C.Fragment,{children:(0,k.jsx)(nE.Uv,{wrapperStyle:{height:"100%",width:"100%",objectFit:"cover"},children:(0,k.jsxs)(tN.Z,{gridHeight:"50px 1fr 50px",gridWidth:"50px 1fr 50px",w:"2930px",h:"2061px",children:[(0,k.jsx)(N.xu,{as:"img",src:c(eC.Z.translate("/img/ryoshi-dynasties/battle/world-map-background.jpg").custom({width:2880,height:2021})),maxW:"none",useMap:"#imageMap",className:"".concat(nH().mapImageArea),id:"fancyMenu"}),(0,k.jsx)("map",{name:"imageMap",children:Z}),(0,k.jsxs)(z.k,{position:"absolute",zIndex:"0",width:"100%",height:"100%",children:[q," ",J,(0,k.jsxs)("div",{className:nN().className,children:[(0,k.jsx)("div",{className:tI().water}),(0,k.jsxs)("div",{id:"beach",className:[tI().buccaneer_beach,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("Buccaneer Beach")},children:[(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().buccaneer_beach_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("Buccaneer Beach")}),"Buccaneer Beach"]})," "]}),(0,k.jsxs)("div",{className:[tI().mitagi_retreat,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("Mitagi Retreat")},children:[(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().mitagi_retreat_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("Mitagi Retreat")}),"Mitagi Retreat"]})," "]}),(0,k.jsxs)("div",{className:[tI().omoikanes_athenaeum,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("Omoikanes Athenaeum")},children:[(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().omoikanes_athenaeum_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("Omoikanes Athenaeum")}),"Omoikane's Athenaeum"]})," "]}),(0,k.jsxs)("div",{className:[tI().clutch_of_fukurokuju,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("Clutch Of Fukurokujo")},children:[(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().clutch_of_fukurokuju_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("Clutch Of Fukurokujo")}),"Clutch of Fukurokuju"]})," "]}),(0,k.jsxs)("div",{className:[tI().orcunheim,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("Orcunheim")},children:[(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().orcunheim_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("Orcunheim")}),"Orcunheim"]})," "]}),(0,k.jsxs)("div",{className:[tI().ice_shrine,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("Ice Shrine")},children:[(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().ice_shrine_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("Ice Shrine")}),"Ice Shrine"]})," "]}),(0,k.jsxs)("div",{className:[tI().felisgarde,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("Felisgarde")},children:[(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().felisgarde_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("Felisgarde")}),"Felisgarde"]})," "]}),(0,k.jsxs)("div",{className:[tI().ebisusbay,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("Ebisus Bay")},children:[(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().ebisusbay_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("Ebisus Bay")}),"Ebisu's Bay"]})," "]}),(0,k.jsxs)("div",{className:[tI().verdant_forest,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("Verdant Forest")},children:[(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().verdant_forest_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("Verdant Forest")}),"Verdant Forest"]})," "]}),(0,k.jsx)("div",{className:[tI().infinite_nexus,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("The Infinte Nexus")},children:(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().infinite_nexus_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("The Infinte Nexus")}),"Infinite Nexus"]})}),(0,k.jsx)("div",{className:[tI().venoms_descent,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("Venoms Descent")},children:(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().venoms_descent_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("Venoms Descent")}),"Venom's Descent"]})}),(0,k.jsx)("div",{className:[tI().mitamic_fissure,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("Mitamic Fissure")},children:(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().mitamic_fissure_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("Mitamic Fissure")}),"Mitamic Fissure"]})}),(0,k.jsx)("div",{className:[tI().seashrine,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("Seashrine")},children:(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().seashrine_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("Seashrine")}),"Seashrine"]})}),(0,k.jsx)("div",{className:[tI().classy_keep,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("Classy Keep")},children:(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().classy_keep_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("Classy Keep")}),"Classy Keep"]})}),(0,k.jsx)("div",{className:[tI().ancestors_final_rest,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("Ancestors Final Rest")},children:(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().ancestors_final_rest_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("Ancestors Final Rest")}),"Ancestor's Final Rest"]})}),(0,k.jsx)("div",{className:[tI().dragon_roost,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("Dragons Roost")},children:(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().dragon_roost_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("Dragons Roost")}),"Dragon Roost"]})}),(0,k.jsx)("div",{className:[tI().nyar_spire,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("N'yar Spire")},children:(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().nyar_spire_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("N'yar Spire")}),"N'yar Spire"]})}),(0,k.jsx)("div",{className:[tI().iron_bastion,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("The Iron Bastion")},children:(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().iron_bastion_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("The Iron Bastion")}),"Iron Bastion"]})}),(0,k.jsx)("div",{className:[tI().volcanic_reach,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("Volcanic Reach")},children:(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().volcanic_reach_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("Volcanic Reach")}),"Volcanic Reach"]})}),(0,k.jsx)("div",{className:[tI().the_conflagration,tI().enlarge].filter(function(e){return!!e}).join(" "),onClick:function(){return eA("The Conflagration")},children:(0,k.jsxs)("div",{className:[tI().worldmap_label,tI().the_conflagration_label].filter(function(e){return!!e}).join(" "),children:[(0,k.jsx)(nI.q,{position:"absolute",size:"xl",className:tI().leader_flag,src:eO("The Conflagration")}),"The Conflagration"]})})]})]})]})})})}}),(0,k.jsx)(tz,{onBack:o})]}),(0,k.jsx)(L.x,{isOpen:en,onClose:function(){o()},title:"Game Ended",children:(0,k.jsx)(tP.kQ,{children:(0,k.jsx)(I.x,{children:"The current game has ended and rewards are being calculated. A new game will begin shortly!"})})})]})},tM=t(6182),tL=t.n(tM),tO=t(50174),tW=t(99188),tD=t(47580),tB=t(97822),tV=t(82580),tZ=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"previousAdmin","type":"address"},{"indexed":false,"internalType":"address","name":"newAdmin","type":"address"}],"name":"AdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"beacon","type":"address"}],"name":"BeaconUpgraded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint8","name":"version","type":"uint8"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"leader","type":"address"},{"indexed":false,"internalType":"uint16","name":"season","type":"uint16"}],"name":"RegisteredSeason","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"implementation","type":"address"}],"name":"Upgraded","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"fortune","outputs":[{"internalType":"contract IERC20Burnable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"leader","type":"address"},{"internalType":"uint256","name":"cost","type":"uint256"},{"internalType":"uint16","name":"season","type":"uint16"}],"internalType":"struct AllianceCenter.Registration","name":"_registration","type":"tuple"}],"name":"hashRegistration","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"contract IGameLoop","name":"_gameLoop","type":"address"},{"internalType":"contract IERC20Burnable","name":"_fortune","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"proxiableUUID","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"leader","type":"address"},{"internalType":"uint256","name":"cost","type":"uint256"},{"internalType":"uint16","name":"season","type":"uint16"}],"internalType":"struct AllianceCenter.Registration","name":"_registration","type":"tuple"},{"internalType":"bytes","name":"_signature","type":"bytes"}],"name":"registerFaction","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IGameLoop","name":"_address","type":"address"}],"name":"setGameLoop","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newImplementation","type":"address"}],"name":"upgradeTo","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newImplementation","type":"address"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"upgradeToAndCall","outputs":[],"stateMutability":"payable","type":"function"}]'),tU=t(27011),tX=t.n(tU),tq=t(68076),tG=(0,ek.eG)(),tK=function(e){var n,t,s,r=e.isOpen,a=e.onClose,i=e.src,o=e.setPreview,l=(0,w._)((0,C.useState)(10),2),c=l[0],u=l[1],d=(0,C.useContext)(eB),h=(0,C.useRef)(null),p=(0,er.C)(function(e){return e.user}),f=(0,w._)((0,eP.Z)(),2),x=(f[0],f[1]),m=(n=(0,S._)(function(e,n){var t,s,r;return(0,_.__generator)(this,function(a){switch(a.label){case 0:if(s=null===(t=(0,eH.ms)())||void 0===t?void 0:t.signature)return[3,2];return[4,x()];case 1:s=a.sent().signature,a.label=2;case 2:if(!s)return[3,6];a.label=3;case 3:return a.trys.push([3,5,,6]),[4,y(null===(r=p.address)||void 0===r?void 0:r.toLowerCase(),s,n.name,Number(n.id),e)];case 4:return a.sent(),eu.Am.success("Faction icon updated! Refreshing..."),[3,6];case 5:return console.log(a.sent()),eu.Am.error("Icon too large, please use a smaller image"),[3,6];case 6:return[2]}})}),function(e,t){return n.apply(this,arguments)}),g=nt.Z.create({baseURL:tG.urls.cms}),y=(t=(0,S._)(function(e,n,t,s,r){return(0,_.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,g.patch("ryoshi-dynasties/factions?",{name:t,id:s,image:r},{params:{address:e,signature:n}})];case 1:return[2,a.sent()];case 2:throw a.sent();case 3:return[2]}})}),function(e,n,s,r,a){return t.apply(this,arguments)}),b=(s=(0,S._)(function(){var e,n,t,s;return(0,_.__generator)(this,function(r){switch(r.label){case 0:if(!h)return[3,3];return t=null===(e=h.current)||void 0===e?void 0:e.getImageScaledToCanvas().toDataURL(),[4,fetch(t)];case 1:return[4,r.sent().blob()];case 2:s=r.sent(),o(URL.createObjectURL(s)),m(t,null===(n=d.user)||void 0===n?void 0:n.faction),a(),r.label=3;case 3:return[2]}})}),function(){return s.apply(this,arguments)});return(0,k.jsxs)(Y.u_,{isOpen:r,onClose:a,children:[(0,k.jsx)(Q.Z,{}),(0,k.jsx)(J.h,{children:(0,k.jsxs)(N.xu,{children:[(0,k.jsx)(tX(),{ref:h,image:i,style:{width:"100%",height:"100%"},border:50,borderRadius:150,color:[0,0,0,.72],scale:c/10,rotate:0}),(0,k.jsxs)(E.g,{spacing:4,mt:4,children:[(0,k.jsxs)(N.xu,{w:"100%",children:[(0,k.jsx)(I.x,{fontSize:{base:"12",sm:"14"},p:"4",fontWeight:"bold",children:"Zoom"}),(0,k.jsx)(H.M,{children:(0,k.jsxs)(tq.iR,{"aria-label":"slider-ex-1",min:10,max:50,defaultValue:c,value:c,onChange:function(e){return u(e)},w:{base:"80%",sm:"80%"},children:[(0,k.jsx)(tq.Uj,{children:(0,k.jsx)(tq.Ms,{})}),(0,k.jsx)(tq.gs,{})]})})]}),(0,k.jsx)(N.xu,{paddingBottom:"4",children:(0,k.jsxs)(eU.K,{direction:{base:"column",sm:"row"},mt:4,children:[(0,k.jsx)(R.z,{onClick:b,fontSize:{base:"12",sm:"14"},children:" Save"}),(0,k.jsx)(R.z,{onClick:function(e){return a()},fontSize:{base:"12",sm:"14"},children:" Cancel"})]})})]})]})})]})},tY=function(){var e,n=(0,F.q)(),t=n.isOpen,s=n.onOpen,r=n.onClose,a=(0,C.useContext)(eB),i=(0,w._)((0,C.useState)(""),2),o=i[0],l=i[1],c=(0,w._)((0,C.useState)(null),2),u=c[0],d=c[1],h=(0,C.useRef)(null);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(tK,{isOpen:t,onClose:r,src:o,setPreview:d}),(0,k.jsxs)(E.g,{children:[(0,k.jsx)(H.M,{children:(0,k.jsx)("div",{className:"img-container",children:(0,k.jsx)(nI.q,{size:"2xl",src:u||(null===(e=a.user)||void 0===e?void 0:e.faction.image)})})}),(0,k.jsx)(z.k,{maxW:{base:"300",sm:"100%"},justifyContent:"center",children:(0,k.jsx)(H.M,{children:(0,k.jsx)(nJ.I,{variant:"ghost",type:"file",ref:h,onChange:function(e){l(URL.createObjectURL(e.target.files[0])),s()},placeholder:"Upload Image"})})})]})]})},tQ=t(35534),tJ=t(92491),t$=(0,ek.eG)("collections"),t0=function(e){var n=e.handleSelectCollectionCallback,t=(0,ec.useRouter)(),s=(0,eb.ff)("black","gray.300"),r=(0,eb.ff)("white","gray.300");(0,eb.ff)("white","gray.700"),(0,eb.ff)("gray.100","gray.800"),(0,eb.ff)("gray.300","gray.600");var a=(0,eb.ff)("gray.100","blue.500"),i=(0,eb.ff)("flushed","outline"),o=(0,w._)((0,C.useState)(5),2),l=o[0],c=o[1],u=(0,w._)((0,C.useState)([]),2),d=u[0],h=u[1],p=(0,F.q)(),f=p.isOpen,x=p.onOpen,m=p.onClose,g=(0,w._)((0,C.useState)(""),2),y=g[0],b=g[1],j=C.useRef(null);(0,nK.O)({ref:j,handler:m});var v=(0,n1.Z)(y,500),S=(0,w._)((0,C.useState)(-1),2),_=S[0],T=S[1],A=(0,ea.useQuery)(["Search",v],function(){return(0,tQ.y)(v)},{enabled:!!v&&v.length>=3,refetchOnWindowFocus:!1,select:function(e){return e.data.collections.filter(function(e){var n=t$.find(function(n){return(0,ey.w4)(n.address,e.address)});return!!n&&!n.mergedWith}).sort(function(e,n){var t,s;return(null===(t=n.verification)||void 0===t?void 0:t.verified)-(null===(s=e.verification)||void 0===s?void 0:s.verified)})}}),z=A.data,P=A.status,M=A.error;A.refetch;var L=d.length>0||z&&z.length>0,O=(0,C.useCallback)(function(e){n(e.address),(0,eH.It)(e),m(),b("")},[m,t,b]),W=function(e){(0,eH.OX)(e.address);var n=D();h(n),(null==n?void 0:n.length)<1&&(!z||z.length<1)&&m()},D=function(){var e=(0,eH.b0)();return y&&y.length>=3?e.filter(function(e){return e.name.toLowerCase().includes(y.toLowerCase())}):e};return(0,C.useEffect)(function(){h(D()),y.length>=3&&!f&&x(),y.length<3&&f&&!L&&m(),y.length<1&&c(5)},[y]),(0,k.jsxs)(N.xu,{position:"relative",maxW:"100%",ref:j,marginTop:2,children:[(0,k.jsxs)(nY.B,{children:[(0,k.jsx)(nQ.Z,{pointerEvents:"none",children:(0,k.jsx)(n0.W,{color:r})}),(0,k.jsx)(nJ.I,{placeholder:"Search for a collection",w:"100%",onChange:function(e){b(e.target.value)},onFocus:function(){h(D()),L&&!f&&x()},onKeyDown:function(e){var n;"ArrowUp"===e.code&&_>-1?T(_-1):"ArrowDown"===e.code&&_<d.length+(null!==(n=null==z?void 0:z.length)&&void 0!==n?n:0)-1?T(_+1):"Enter"===e.code&&_>-1&&(_<d.length?O(d[_]):O(z[_-d.length]))},value:y,borderColor:"#aaa",focusBorderColor:a,color:"white",_placeholder:{color:"gray.300"},variant:i}),y.length&&(0,k.jsx)(nQ.x,{children:(0,k.jsx)(n$.P,{onClick:function(){b(""),c(5),m()}})})]}),(0,k.jsx)(N.xu,{position:"relative",bg:"#272523",w:"100%",mt:1,rounded:"md",display:f?"block":"none",borderWidth:"1px",borderColor:"#aaa",boxShadow:"dark-lg",children:(0,k.jsx)(n3.ZP,{autoHeight:!0,autoHeightMax:"calc(100vh - 74px)",universal:!0,children:(0,k.jsxs)(N.xu,{fontSize:"12px",p:2,children:[d.length>0&&(0,k.jsxs)(N.xu,{mb:2,children:[(0,k.jsx)(I.x,{textTransform:"uppercase",ms:1,color:s,children:"Recent"}),(0,k.jsx)(E.g,{children:d.slice(0,5).map(function(e,n){return(0,k.jsx)(tJ.Z,{collection:e,onClick:O,useCloseButton:!0,onRemove:W,isFocused:_===n},e.address)})})]}),(0,k.jsx)(N.xu,{display:(null==y?void 0:y.length)>=3?"inherit":"none",children:"loading"===P?(0,k.jsx)(H.M,{children:(0,k.jsx)(K.$,{})}):"error"===P?(0,k.jsx)(H.M,{children:(0,k.jsxs)(I.x,{children:["Error: ",null==M?void 0:M.message]})}):(0,k.jsx)(k.Fragment,{children:(null==z?void 0:z.length)>0?(0,k.jsxs)(N.xu,{children:[(0,k.jsx)(I.x,{textTransform:"uppercase",ms:1,color:s,children:"Collections"}),(0,k.jsx)(E.g,{children:z.slice(0,l).map(function(e,n){return(0,k.jsx)(tJ.Z,{collection:e,floorPrice:e.stats.total.floorPrice,onClick:O,isFocused:_===n+d.length},e.address)})}),l<25&&l<z.length&&(0,k.jsx)(N.xu,{mt:2,ms:1,children:(0,k.jsx)(R.z,{variant:"link",onClick:function(){return c(25)},rightIcon:(0,k.jsx)(n2.v,{}),children:"View More"})})]}):(0,k.jsx)(H.M,{children:(0,k.jsx)(I.x,{children:"No results found"})})})})]})})})]})},t2=(0,ek.eG)(),t1=function(e){var n,t,s,r,a,i=e.isOpen,o=e.onClose,l=e.faction,c=e.handleClose,u=e.isRegistered,d=function(e){if(B(!1),x.includes(e))m(x.filter(function(n){return n!==e}));else{U("The address you are trying to remove does not exist"),B(!0);return}b("")},h=function(){return"COLLECTION"===T?3:15},p=(0,C.useRef)(null),f=(0,w._)((0,C.useState)([]),2),x=f[0],m=f[1],g=(0,w._)((0,C.useState)(""),2),y=g[0],b=g[1],j=(0,C.useRef)(null),v=(0,w._)((0,C.useState)(""),2),T=v[0],A=v[1],F=(0,w._)((0,C.useState)([]),2),H=F[0],M=F[1],O=(0,w._)((0,C.useState)(!1),2),W=O[0],B=O[1],V=(0,w._)((0,C.useState)(""),2),Z=V[0],U=V[1],q=(0,w._)((0,eP.Z)(),2),G=q[0],K=q[1],Y=(0,er.C)(function(e){return e.user}),Q=(0,w._)((0,C.useState)(!1),2),J=Q[0],$=Q[1],ee=(0,C.useContext)(eB),en=(0,w._)((0,C.useState)(!1),2),et=en[0];en[1];var es=(0,C.useRef)(null);(0,S._)(function(e){var n,t,s;return(0,_.__generator)(this,function(e){switch(e.label){case 0:if(!u)return[3,1];return console.log("Already Registered"),[3,8];case 1:if(t=null===(n=(0,eH.ms)())||void 0===n?void 0:n.signature)return[3,3];return[4,K()];case 2:t=e.sent().signature,e.label=3;case 3:if(!t)return[3,8];e.label=4;case 4:return e.trys.push([4,7,,8]),[4,new ez.CH(t2.contracts.allianceCenter,tZ,Y.provider.getSigner()).registerFaction(Y.address.toLowerCase())];case 5:return[4,e.sent().wait()];case 6:return s=e.sent(),u=!0,eu.Am.success((0,ey.aS)(s.transactionHash)),[3,8];case 7:return console.log(e.sent()),eu.Am.error("ERROR: This account has already registered a faction this season."),[3,8];case 8:return[2]}})});var ea=(n=(0,S._)(function(){var e,n,t;return(0,_.__generator)(this,function(s){switch(s.label){case 0:if(void 0===j.current||""===el.values.factionName)return U("You must enter a faction name"),B(!0),[2];if(x.length>h())return U("You are over the maximum number of addresses for this faction type"),B(!0),[2];if(B(!1),n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,K()];case 1:n=s.sent().signature,s.label=2;case 2:if(!n)return[3,6];s.label=3;case 3:return s.trys.push([3,5,,6]),[4,nd(Y.address.toLowerCase(),n,l.id,el.values.factionName,x,T)];case 4:return s.sent(),c(),o(),eu.Am.success("Changes Saved"),[3,6];case 5:return console.log(t=s.sent()),eu.Am.error((0,e1.O)(t)),[3,6];case 6:return[2]}})}),function(){return n.apply(this,arguments)}),ei=(t=(0,S._)(function(){var e,n,t;return(0,_.__generator)(this,function(s){switch(s.label){case 0:if(n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,K()];case 1:n=s.sent().signature,s.label=2;case 2:if(!n)return[3,6];s.label=3;case 3:return s.trys.push([3,5,,6]),[4,nk(Y.address.toLowerCase(),n,"DEACTIVATE")];case 4:return s.sent(),c(),o(),$(!1),ee.refreshUser(),eu.Am.success("Faction disbanded"),[3,6];case 5:return console.log(t=s.sent()),eu.Am.error((0,e1.O)(t)),[3,6];case 6:return[2]}})}),function(){return t.apply(this,arguments)}),eo=(s=(0,S._)(function(){var e,n,t;return(0,_.__generator)(this,function(s){switch(s.label){case 0:if(n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,K()];case 1:n=s.sent().signature,s.label=2;case 2:if(!n)return[3,6];s.label=3;case 3:return s.trys.push([3,5,,6]),[4,nk(Y.address.toLowerCase(),n,"ACTIVE")];case 4:return s.sent(),c(),o(),ee.refreshUser(),eu.Am.success("Faction reenabled"),[3,6];case 5:return console.log(t=s.sent()),eu.Am.error((0,e1.O)(t)),[3,6];case 6:return[2]}})}),function(){return s.apply(this,arguments)}),el=(0,tV.TA)({initialValues:{factionName:l.name,addresses:l.addresses},onSubmit:function(e){},enableReinitialize:!0});(0,C.useEffect)(function(){m(l.addresses),A(l.type)},[l]);var ec=(0,w._)((0,tS.a)("(max-width: 768px)"),1)[0];return(0,C.useEffect)(function(){void 0!==x&&M(x.map(function(e,n){return(0,k.jsx)(eQ.HC,{marginTop:"2",color:"#aaa",children:(0,k.jsxs)(z.k,{justifyContent:"space-between",margin:"auto",border:"1px",rounded:"md",children:[(0,k.jsx)(I.x,{color:"#ffffffeb",fontSize:{base:"12",sm:"14"},marginTop:"auto",marginBottom:"auto",marginLeft:"2",children:ec?(0,ey.sC)(e):e}),(0,k.jsx)(R.z,{h:"30px",w:"30px",padding:0,onClick:function(){return d(e)},fontSize:{base:"12",sm:"14"},children:"x"})]})},n)}))},[x]),(0,k.jsx)(L.x,{isOpen:i,onClose:o,title:"Edit Faction",children:G?(0,k.jsx)(nM.Z,{animation:"border",role:"status",size:"sm",className:"ms-1",children:(0,k.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):(0,k.jsxs)(N.xu,{pb:1,children:[(0,k.jsx)(N.xu,{mx:1,mb:1,roundedBottom:"lrg",children:Y.address?(0,k.jsx)(N.xu,{textAlign:"center",w:"full",children:(0,k.jsxs)(z.k,{children:[(0,k.jsx)(P.L,{}),(0,k.jsxs)(E.g,{spacing:2,align:"center",justify:"center",w:"full",h:"full",p:2,bg:"#272523",children:[(0,k.jsx)(tY,{}),et&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(tX(),{ref:es,image:null===(r=ee.user)||void 0===r?void 0:r.faction.image,width:200,height:200,border:50,color:[255,255,255,.6],scale:1.2,rotate:0})," "]}),(0,k.jsxs)(z.k,{w:"95%",direction:"row",justify:"space-between",mt:2,mb:2,children:[(0,k.jsx)(I.x,{fontWeight:"bold",fontSize:{base:"sm",sm:"md"},children:"Current Status:"}),(0,k.jsx)(I.x,{as:"i",color:"#aaa",fontSize:{base:"12",sm:"14"},children:!0===u?"Registered":"Not Registered"})]}),(0,k.jsxs)(z.k,{w:"95%",direction:"row",justify:"space-between",mt:2,mb:2,children:[(0,k.jsx)(I.x,{fontWeight:"bold",fontSize:{base:"sm",sm:"md"},children:"Faction Type:"}),(0,k.jsx)(I.x,{as:"i",color:"#aaa",fontSize:{base:"12",sm:"14"},children:T})]}),J?(0,k.jsx)(tl.b,{status:"error",children:(0,k.jsxs)(E.g,{children:[(0,k.jsxs)(X.U,{children:[(0,k.jsx)(tc.z,{}),(0,k.jsx)(tu.C,{children:"Warning! If you disband a registered faction you will be unable to register another faction this season."})]}),(0,k.jsxs)(X.U,{children:[(0,k.jsx)(R.z,{type:"submit",style:{display:"flex",marginTop:"4px"},onClick:ei,variant:"outline",colorScheme:"red",children:"Confirm Disband"}),(0,k.jsx)(R.z,{type:"submit",style:{display:"flex",marginTop:"4px"},onClick:function(){return $(!1)},variant:"outline",colorScheme:"white",children:"Cancel"})]})]})}):(0,k.jsx)(k.Fragment,{children:(null===(a=ee.user)||void 0===a?void 0:a.faction.isEnabled)?(0,k.jsx)(R.z,{type:"submit",onClick:function(){$(!0)},colorScheme:"red",fontSize:{base:"12",sm:"14"},variant:"outline",children:"x Disband Faction"}):(0,k.jsx)(R.z,{type:"submit",onClick:eo,colorScheme:"green",fontSize:{base:"12",sm:"14"},variant:"outline",children:"Reenable Faction"})})]}),(0,k.jsx)(P.L,{})]})}):(0,k.jsx)(N.xu,{fontSize:"sm",textAlign:"center",w:"full",children:"Connect wallet to purchase"})}),(0,k.jsxs)(N.xu,{mx:1,bg:"#272523",p:2,roundedBottom:"xl",children:[(0,k.jsx)(N.xu,{margin:"auto",mb:"4",children:(0,k.jsx)("form",{onSubmit:el.handleSubmit,style:{marginTop:"24px"},children:(0,k.jsx)(nL.NI,{isRequired:!0,children:(0,k.jsxs)(z.k,{direction:"row",justify:"space-between",mb:2,children:[(0,k.jsx)(nD.l,{w:"40%",children:"Faction name:"}),(0,k.jsx)(nJ.I,{id:"factionName",name:"factionName",value:el.values.factionName,onChange:el.handleChange,placeholder:el.values.factionName})]})})})}),(0,k.jsx)(tB.i,{}),(0,k.jsx)(z.k,{direction:"row",justify:"space-between",mb:2,children:(0,k.jsxs)(nD.l,{style:{display:"flex",marginTop:"24px"},children:["Addresses of","COLLECTION"===T?" Collections":" Wallets"]})}),(0,k.jsxs)(eU.K,{direction:{base:"column",sm:"row"},mt:"auto",marginBottom:"auto",children:[(0,k.jsx)(nJ.I,{ref:p,value:y,onChange:function(e){console.log(e.target.value),b(e.target.value)},placeholder:"Add address here",size:"sm"}),(0,k.jsx)(R.z,{onClick:function(){if(B(!1),""===y){U("You must enter an address"),B(!0);return}if(x.includes(y)){U("You already have this address in your faction"),B(!0);return}if(x.length>=h()){U("You are over the maximum number of addresses for this faction type"),B(!0);return}m(function(e){return(0,D._)(e).concat([y])}),p.current&&(p.current.value=""),b("")},fontSize:{base:"12",sm:"14"},children:"Add +"})]}),"COLLECTION"===T?(0,k.jsx)(t0,{handleSelectCollectionCallback:function(e){console.log(e),b(e)}}):(0,k.jsx)(k.Fragment,{}),(0,k.jsx)(eQ.GS,{children:H}),(0,k.jsx)("ul",{id:"addresseslist"}),(0,k.jsx)(z.k,{justify:"center",align:"center",style:{marginTop:"16px"},children:(0,k.jsx)(N.xu,{p:"3",children:W&&(0,k.jsxs)(tl.b,{status:"error",children:[(0,k.jsx)(tc.z,{}),(0,k.jsx)(tu.C,{children:Z})]})})}),(0,k.jsx)(z.k,{justifyContent:"center",align:"center",children:(0,k.jsx)(N.xu,{p:"3",children:(0,k.jsx)(L.t,{onClick:ea,children:"Save Changes"})})}),(0,k.jsx)(z.k,{justifyContent:"right",align:"right"})]})]})})},t4=t(92015),t3={page1:"page1",page2:"page2",page3:"page3"},t5=function(e){var n,t=e.isOpen,s=e.onClose,r=e.handleClose,a=function(e){if(y(!1),en.includes(e))et(en.filter(function(n){return n!==e}));else{$("The address you are trying to remove does not exist"),y(!0);return}Y("")},i=function(){return"COLLECTION"===l?3:15},o=(0,w._)((0,C.useState)("COLLECTION"),2),l=o[0],c=o[1],u=(0,w._)((0,eP.Z)(),2),d=(u[0],u[1]),h=(0,er.C)(function(e){return e.user}),p=(0,w._)((0,C.useState)(!1),2),f=p[0],x=p[1],m=(0,w._)((0,C.useState)(!1),2),g=m[0],y=m[1],b=(0,w._)((0,C.useState)(!1),2),j=b[0],v=b[1],T=(0,C.useContext)(eB),A=(0,F.q)(),M=A.isOpen,O=A.onOpen,W=A.onClose,B=(0,w._)((0,C.useState)(t3.page1),2),V=B[0];B[1];var U=(0,C.useRef)(null),G=(0,w._)((0,C.useState)(""),2),K=G[0],Y=G[1],Q=(0,w._)((0,C.useState)(""),2),J=Q[0],$=Q[1],ee=(0,w._)((0,C.useState)([]),2),en=ee[0],et=ee[1],es=(0,w._)((0,C.useState)([]),2),ea=es[0],ei=es[1],eo=["Radiant","Mystic","Valiant","Shadowed","Eternal","Enigmatic","Whispering","Arcane","Celestial","Luminous","Aetherial","Sylvan","Noble","Dread","Crimson","Forgotten","Twilight","Ethereal","Sorcerer's","Wandering","Silver","Ancient","Vibrant","Whirling","Frostborn","Moonlit","Thundering","Starforged","Clockwork","Mechanical","Ingenious","Steam-powered","Gilded","Alchemical","Tesla","Resilient","Enchanted","Swift","Pristine","Lunar","Harmonic","Emerald","Sapphire","Fiery","Golden","Dusk","Sage","Enigmatic","Celestial","Whispering","Enchanted","Pulsating","Ethereal","Mystical","Epic","Fabled","Supreme","Divine","Shadowy","Ethereal","Twilight","Whirling","Legendary","Everlasting","Arcane","Majestic","Celestial","Sacred","Mystic","Timeless","Resplendent","Spectral","Evolving","Mythical","Luminous","Eternal","Cerulean","Ornate","Venerable","Immaculate","Astral","Serene","Verdant","Mossy","Blossoming","Whispering","Enchanted","Ethereal","Emerald","Sapphire","Golden","Lunar","Harmonic","Sylvan","Mystical","Serenity","Enlightened","Mythical","Celestial","Primal","Nurturing","Exquisite","Timeless","Vivid","Fragrant","Enigmatic","Vibrant","Stellar","Stormy","Aurora","Lush","Noble","Rustic","Silent","Majestic","Seraphic","Ingenious","Cerulean","Exalted","Sapphire","Luminary","Burning","Harmonic","Silver","Effervescent","Frosty","Moonlit","Thunderous","Resilient","Wandering","Resplendent","Dusk","Astral","Sage","Illustrious","Enchanting","Resonant","Crimson","Celestial","Mystified","Arcane","Nebulous","Ebon","Epic","Ravishing","Ethereal","Supreme","Vibrating","Gossamer","Resplendent","Pristine","Sorcerous","Emerald","Sapphire","Stellar","Flickering","Ornate","Divine","Verdant","Blossoming","Mythical","Astral","Whispering","Enchanted","Sylvan","Ethereal","Cerulean","Lunar","Sage","Majestic","Resilient","Epic","Crimson","Golden","Silver","Twilight","Enigmatic","Ingenious","Steam-powered","Mechanical","Luminous","Arcane","Celestial","Shadowed","Mystical","Eternal","Radiant","Noble","Whirling","Frostborn","Moonlit","Thundering","Starforged","Resplendent","Sorcerer's","Wandering","Dread","Sylvan","Aetherial","Ebon","Vibrant","Dusk","Immaculate","Ornate","Venerable","Enchanted","Enlightened","Evolving","Mythical","Spectral","Cerulean","Primal","Burning","Effervescent","Harmonic","Fragrant","Stellar","Exquisite","Aurora","Majestic","Rustic","Serene","Ravishing","Gossamer","Nebulous","Epic","Whispering","Sorcerous","Lush","Nurturing","Illustrious","Noble","Silent","Ethereal","Nebulous","Ebon","Enchanted","Divine","Resonant","Ornate","Flickering","Sorcerous","Resplendent","Pristine","Gossamer","Vibrating","Astral","Blossoming","Lunar","Emerald","Sapphire","Effervescent","Crimson","Celestial","Mystified","Arcane","Epic","Ravishing","Ethereal","Supreme","Vibrating","Gossamer","Resplendent","Pristine","Sorcerous","Emerald","Sapphire","Stellar","Flickering","Ornate","Divine","Verdant","Blossoming","Mythical","Astral","Whispering","Enchanted","Sylvan","Ethereal","Cerulean","Lunar","Sage","Majestic","Resilient","Epic","Crimson","Golden","Silver","Twilight","Enigmatic","Ingenious","Steam-powered","Mechanical","Luminous","Arcane","Celestial","Shadowed","Mystical","Eternal","Radiant","Noble","Whirling","Frostborn","Moonlit","Thundering","Starforged","Resplendent","Sorcerer's","Wandering","Dread","Sylvan","Aetherial","Ebon","Vibrant","Dusk","Immaculate","Ornate","Venerable","Enchanted","Enlightened","Evolving","Mythical","Spectral","Cerulean","Primal","Burning","Effervescent","Harmonic","Fragrant","Stellar","Exquisite","Aurora","Majestic","Rustic","Serene","Ravishing","Gossamer","Nebulous","Epic"],el=["Order","Brotherhood","Serpent","Empire","Knights","Syndicate","Phoenix","Avalon","Valkyries","Titans","Lorekeepers","Moon","Storm","Grove","Tide","Sands","Starlight","Cogworks","Gizmos","Tesla","Vapor","Clockwork","Mechanica","Infinity","Prime","Chronicles","Oracle","Harmony","Labyrinth","Shadows","Apex","Vortex","Sanctuary","Haven","Enigma","Cogs","Radiance","Citadel","Elysium","Nexus","Phantom","Legion","Sentinels","Eclipse","Whisper","Cascade","Helm","Regalia","Chalice","Cogs","Radiance","Citadel","Elysium","Nexus","Phantom","Legion","Sentinels","Eclipse","Whisper","Cascade","Helm","Regalia","Chalice","Enigma","Dynamo","Chronicle","Arcanum","Armada","Vapor","Astro","Gizmos","Cogs","Radiance","Citadel","Elysium","Nexus","Phantom","Legion","Sentinels","Eclipse","Whisper","Cascade","Helm","Regalia","Chalice","Sanctum","Harmony","Synthesis","Dreamers","Stardust","Chronicles","Enigma","Lore","Armada","Vortex","Oracle","Abyss","Voyagers","Innovators","Cogworks","Radiance","Infinity","Prime","Citadel","Elysium","Nexus","Phantom","Legion","Sentinels","Eclipse","Whisper","Cascade","Helm","Regalia","Chalice","Enigma","Dynamo","Chronicle","Astro","Arcanum","Armada","Vapor","Astro","Gizmos","Cogs","Radiance","Citadel","Elysium","Nexus","Phantom","Legion","Sentinels","Eclipse","Whisper","Cascade","Helm","Regalia","Chalice","Sanctum","Harmony","Synthesis","Dreamers","Stardust","Chronicles","Enigma","Lore","Armada","Vortex","Oracle","Abyss","Voyagers","Innovators"],ec=(n=(0,S._)(function(){var e,n,t,a;return(0,_.__generator)(this,function(i){switch(i.label){case 0:if(!h.address)return[2];y(!1),W(),i.label=1;case 1:if(i.trys.push([1,6,7,8]),n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,3];return[4,d()];case 2:n=i.sent().signature,i.label=3;case 3:if(!n)return[3,5];return x(!0),console.log("Creating a faction"),t=eo[Math.floor(Math.random()*eo.length)]+" "+eo[Math.floor(Math.random()*eo.length)]+" "+el[Math.floor(Math.random()*el.length)],[4,nc(h.address.toLowerCase(),n,l,t.toString(),en,"data:image/jpeg;base64,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")];case 4:i.sent(),eu.Am.success("Faction has been created!"),T.refreshUser(),r(),s(),i.label=5;case 5:return[3,8];case 6:return console.log(a=i.sent()),eu.Am.error((0,e1.O)(a)),[3,8];case 7:return x(!1),[7];case 8:return[2]}})}),function(){return n.apply(this,arguments)}),ep=(0,w._)((0,tS.a)("(max-width: 768px)"),1)[0];return(0,C.useEffect)(function(){void 0!==en&&ei(en.map(function(e,n){return(0,k.jsx)(eQ.HC,{marginTop:"2",color:"#aaa",children:(0,k.jsxs)(z.k,{justifyContent:"space-between",margin:"auto",border:"1px",rounded:"md",children:[(0,k.jsx)(I.x,{color:"#ffffffeb",fontSize:{base:"12",sm:"14"},marginTop:"auto",marginBottom:"auto",marginLeft:"2",children:ep?(0,ey.sC)(e):e}),(0,k.jsx)(R.z,{h:"30px",w:"30px",padding:0,onClick:function(){return a(e)},fontSize:{base:"12",sm:"14"},children:"x"})]})},n)}))},[en]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(L.x,{isOpen:t,onClose:s,title:"Create a Faction",children:[(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:V===t3.page1&&(0,k.jsxs)(N.xu,{p:"3",children:[(0,k.jsxs)(Z.M,{columns:2,my:4,px:1,marginBottom:0,children:[(0,k.jsx)(N.xu,{children:"Season Subscription Fee:"}),(0,k.jsxs)(N.xu,{textAlign:"end",fontWeight:"bold",children:[T.config.factions.registration.cost," $Fortune"]})]}),(0,k.jsx)(I.x,{as:"i",fontSize:{base:"14",md:"14"},textColor:"#cfcfcf",children:" Wallets that participated in the fortune presale will have their season 1 fee waived"}),(0,k.jsx)(P.L,{my:8}),(0,k.jsx)(I.x,{children:"NFT collections MUST register as a faction each season in order to participate in battle and be considered for listing rewards. Must be holding at least 20 $Mitama in your wallet."}),(0,k.jsx)(P.L,{my:8}),(0,k.jsxs)(z.k,{direction:"row",justify:"space-between",mt:2,mb:2,maxW:"100%",children:[(0,k.jsxs)(N.xu,{w:"40%",margin:"auto",children:[(0,k.jsx)(I.x,{children:"Select Faction Type:"}),(0,k.jsxs)(eU.K,{direction:"row",align:"center",p:1,rounded:"sm",children:[(0,k.jsx)(q.J,{as:eh.G,icon:ed.eHv,color:"#f8a211",boxSize:6}),(0,k.jsx)(I.x,{fontSize:"12",color:"#aaa",as:"b",children:"Cannot be changed once set"})]})]}),(0,k.jsx)(N.xu,{w:"60%",children:(0,k.jsxs)(E.g,{children:[(0,k.jsxs)(X.U,{alignContent:"right",children:[(0,k.jsx)(eA.Z,{onClick:function(){return c("COLLECTION")},isActive:"COLLECTION"===l,fontSize:{base:"12",sm:"14"},children:"Collection"}),(0,k.jsx)(eA.Z,{onClick:function(){return c("WALLET")},isActive:"WALLET"===l,fontSize:{base:"12",sm:"14"},children:"Wallet"})]}),(0,k.jsx)(I.x,{w:"100%",as:"i",color:"#aaa",fontSize:{base:"12",sm:"14"},children:"COLLECTION"===l?"Rewards will be distributed to all wallets who hold an NFT from the collection. Maximum 3 collection addresses":"Rewards will be distributed to individual wallets added. Maximum of 15 individual wallet addresses"})]})})]}),(0,k.jsx)(P.L,{my:8}),(0,k.jsx)(tB.i,{}),(0,k.jsxs)(z.k,{direction:"row",justify:"space-between",mb:2,children:[(0,k.jsxs)(nD.l,{style:{display:"flex",marginTop:"24px"},fontSize:{base:"12",sm:"14"},children:["Addresses of","COLLECTION"===l?" Collections":" Wallets"]}),(0,k.jsx)(I.x,{marginTop:"24px",as:"i",color:"#aaa",fontSize:{base:"12",sm:"14"},children:"can be added/ updated later"})]}),(0,k.jsxs)(eU.K,{direction:{base:"column",sm:"row"},mt:"auto",marginBottom:"auto",children:[(0,k.jsx)(nJ.I,{ref:U,value:K,onChange:function(e){Y(e.target.value)},placeholder:"Add address here",size:"sm"}),(0,k.jsx)(R.z,{onClick:function(){if(y(!1),""===K){$("You must enter an address"),y(!0);return}if(en.includes(K)){$("You already have this address in your faction"),y(!0);return}if(en.length>=i()){$("You are over the maximum number of addresses for this faction type"),y(!0);return}et(function(e){return(0,D._)(e).concat([K])}),U.current&&(U.current.value=""),Y("")},fontSize:{base:"12",sm:"14"},children:"Add +"})]}),"COLLECTION"===l?(0,k.jsx)(t0,{handleSelectCollectionCallback:function(e){console.log(e),Y(e)}}):(0,k.jsx)(k.Fragment,{}),(0,k.jsx)(eQ.GS,{children:ea}),(0,k.jsx)("ul",{id:"addresseslist"}),(0,k.jsx)(N.xu,{mt:4,children:(0,k.jsxs)(E.g,{children:[(0,k.jsxs)(eU.K,{direction:"row",align:"center",bg:"#f8a211",p:2,rounded:"sm",children:[(0,k.jsx)(q.J,{as:eh.G,icon:ed.eHv,color:"#333",boxSize:8}),(0,k.jsx)(I.x,{fontSize:"14",color:"#333",as:"b",children:" Warning: If you create a faction, you will be unable to delegate troops to other factions for the remainder of the season"})]}),(0,k.jsx)(t4.X,{onChange:function(e){return v(e.target.checked)},children:"I Understand"}),g&&(0,k.jsxs)(tl.b,{status:"error",children:[(0,k.jsx)(tc.z,{}),(0,k.jsx)(tu.C,{children:J})]}),(0,k.jsx)(H.M,{children:(0,k.jsx)(L.t,{onClick:function(){if(h.address){if(en.length>i()){$("You are over the maximum number of addresses for this faction type"),y(!0);return}if(!j){$("Acknowledgement required"),y(!0);return}y(!1),O()}},size:"lg",stickyIcon:!0,isLoading:f,isDisabled:f,children:"Continue"})})]})})]})}),(0,k.jsx)(tP.Ni,{})]}),(0,k.jsxs)(L.x,{isOpen:M,onClose:W,title:"Confirm",children:[(0,k.jsx)(tP.kQ,{children:(0,k.jsx)(I.x,{children:"Warning: If you create a faction, you will be unable to delegate troops to other factions for the remainder of the season"})}),(0,k.jsx)(tP.Ni,{children:(0,k.jsxs)(eU.K,{justify:"center",direction:"row",spacing:6,children:[(0,k.jsx)(L.t,{onClick:W,size:"lg",isLoading:f,isDisabled:f,children:"Cancel"}),(0,k.jsx)(L.t,{onClick:ec,size:"lg",isLoading:f,isDisabled:f,children:"Create"})]})})]})]})},t6=function(e){var n,t,s=e.isOpen,r=e.onClose,a=e.delegateMode,i=(0,w._)((0,C.useState)({faction:""}),2),o=i[0];i[1];var l=(0,er.C)(function(e){return e.user}),c=(0,w._)((0,eP.Z)(),2),u=(c[0],c[1]),d=(0,w._)((0,C.useState)(0),2),h=d[0],p=d[1],f=(0,w._)((0,C.useState)(o.faction),2),x=f[0],m=f[1],g=(0,w._)((0,C.useState)(!1),2),y=g[0],b=g[1],j=(0,w._)((0,C.useState)(0),2),v=j[0],T=j[1],A=(0,C.useContext)(eB),F=(A.config,A.user),R=A.game,E=(0,C.useContext)(eB),P=(0,w._)((0,C.useState)([]),2),M=P[0],O=P[1],W=(0,w._)((0,C.useState)(""),2),D=W[0],B=W[1],V=(0,w._)((0,C.useState)(""),2),Z=V[0],X=V[1],q=(n=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:return[4,nx(null===(e=R)||void 0===e?void 0:e.game.id,null===(n=R)||void 0===n?void 0:n.season.id)];case 1:return O(t.sent().sort(function(e,n){return e.name.localeCompare(n.name)})),[2]}})}),function(){return n.apply(this,arguments)}),G=(t=(0,S._)(function(){var e,n,t,s;return(0,_.__generator)(this,function(r){switch(r.label){case 0:if(!l.address)return[2];if(""===x)return X("You must select a faction"),[2];if(0===M.filter(function(e){return e.name===x})[0].addresses.length)return X("Faction must have addresses to participate"),[2];if(v>h||h<=0)return B("You can't delegate more troops than you have available"),[2];if(0===v)return B("You must delegate at least 1 troop"),[2];if(B(""),X(""),n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,u()];case 1:n=r.sent().signature,r.label=2;case 2:if(!n)return[3,8];r.label=3;case 3:return r.trys.push([3,6,7,8]),b(!0),t=M.filter(function(e){return e.name===x})[0].id,[4,nh(l.address.toLowerCase(),n,v,t)];case 4:return r.sent(),[4,E.refreshUser()];case 5:return r.sent(),T(0),eu.Am.success("You delegated "+v+" troops to on behalf of "+x),[3,8];case 6:return console.log(s=r.sent()),eu.Am.error((0,e1.O)(s)),[3,8];case 7:return b(!1),[7];case 8:return[2]}})}),function(){return t.apply(this,arguments)});return(0,C.useEffect)(function(){var e,n,t,s;F&&(null===(n=F.season)||void 0===n?void 0:null===(e=n.troops)||void 0===e?void 0:e.undeployed)!==void 0&&p(null===(s=F.season)||void 0===s?void 0:null===(t=s.troops)||void 0===t?void 0:t.undeployed)},[F]),(0,C.useEffect)(function(){q()},[]),(0,k.jsx)(L.x,{onClose:r,isOpen:s,title:"Delegate Troops",size:"lg",children:(0,k.jsx)(z.k,{direction:"row",justify:"space-between",justifyContent:"center",children:(0,k.jsxs)(N.xu,{mb:1,bg:"#272523",p:2,roundedBottom:"xl",w:"98%",justifyContent:"center",children:[(0,k.jsxs)(nO.r,{templateColumns:{base:"repeat(1, 1fr)",sm:"repeat(5, 1fr)"},gap:6,marginBottom:"4",children:[(0,k.jsx)(nW.P,{w:"100%",h:"5",children:(0,k.jsx)(nD.l,{children:" Faction:"})}),(0,k.jsx)(nW.P,{colSpan:{base:5,sm:4},w:"100%",children:(0,k.jsx)(n6,{handleSelectCollectionCallback:function(e){m(e)},allFactions:M,imgSize:"md"})})]}),(0,k.jsxs)(nL.NI,{mb:"24px",isInvalid:!!Z,children:[(0,k.jsxs)(nB.P,{me:2,value:x,style:{background:"#272523"},name:"faction",onChange:function(e){m(e.target.value)},children:[(0,k.jsx)("option",{selected:!0,hidden:!0,disabled:!0,value:"",children:"Please select a faction"}),M.map(function(e,n){return(0,k.jsxs)("option",{style:{background:"#272523"},value:e.name,children:[(0,k.jsx)(U.E,{src:e.image,width:"50px",height:"50px"}),e.name]},n)})]}),(0,k.jsx)(nV.J1,{children:Z})]}),(0,k.jsxs)(nL.NI,{isInvalid:!!D,children:[(0,k.jsxs)(nD.l,{children:["Quantity: (Max ",h,")"]}),(0,k.jsxs)(nZ.Y2,{defaultValue:0,min:0,max:h,name:"quantity",onChange:function(e,n){return T(n)},value:v,children:[(0,k.jsx)(nZ.zu,{}),(0,k.jsxs)(nZ.Fi,{children:[(0,k.jsx)(nZ.WQ,{}),(0,k.jsx)(nZ.Y_,{})]})]}),(0,k.jsx)(nV.J1,{children:D})]}),(0,k.jsx)(z.k,{mt:"16px",children:(0,k.jsxs)(I.x,{as:"i",fontSize:14,color:"#aaa",children:["delegate"===a?"Once delegated, troops may be recalled but will not be unallocated until the end of the game.":"Recalling troops will return them to you at the end of the game"," "]})}),(0,k.jsx)(z.k,{mt:"16px",justifyContent:"center",children:(0,k.jsx)(N.xu,{ps:"20px"})}),(0,k.jsx)(H.M,{children:(0,k.jsx)(nU.Z,{w:{base:"200px",sm:"200px"},disabled:y,fontSize:{base:"lg",sm:"xl"},stickyIcon:!0,marginTop:"16px",marginBottom:{base:"16px",sm:"16px"},onClick:"delegate"===a?G:function(){},children:"delegate"===a?"Delegate":"Recall"})})]})})})},t8=(0,ek.eG)(),t7=function(e){var n,t=e.onClose,s=(0,nG.I0)(),r=(0,er.C)(function(e){return e.user}),a=(n=(0,S._)(function(){return(0,_.__generator)(this,function(e){return r.address||(r.needsOnboard?new nX.Z().startOnboarding():r.address?r.correctChain||s((0,nq.Ns)()):s((0,nq.Yn)())),[2]})}),function(){return n.apply(this,arguments)});return(0,k.jsxs)(z.k,{border:"1px solid #FFD700",backgroundColor:"#292626",flexDirection:"column",textAlign:"center",borderRadius:"10px",justifyContent:"space-around",padding:4,minW:{base:"100%",xl:"450px"},boxShadow:"0px 0px 10px 0px #000000",className:tL().className,children:[(0,k.jsxs)(z.k,{justify:"space-between",children:[(0,k.jsx)(N.xu,{left:6,top:6,rounded:"full",zIndex:1,_groupHover:{cursor:"pointer"},"data-group":!0,children:(0,k.jsx)(R.z,{bg:"#C17109",rounded:"full",border:"8px solid #F48F0C",w:14,h:14,onClick:t,_groupHover:{bg:"#de8b08",borderColor:"#f9a50b"},children:(0,k.jsx)(e_.R,{boxSize:8})})}),(0,k.jsxs)(N.xu,{textAlign:"end",ms:2,children:[(0,k.jsx)(I.x,{textColor:"#ffffffeb",fontSize:{base:"28px",md:"32px"},fontWeight:"bold",children:"Alliance Center"}),(0,k.jsx)(I.x,{textColor:"#ffffffeb",fontSize:"sm",fontStyle:"italic",children:"Manage your Faction, Delegate your troops"})]})]}),(0,k.jsx)(N.xu,{children:r.address?(0,k.jsx)(t9,{}):(0,k.jsx)(N.xu,{textAlign:"center",pt:8,pb:4,px:2,children:(0,k.jsx)(N.xu,{ps:"20px",children:(0,k.jsx)(nU.Z,{w:"250px",fontSize:{base:"xl",sm:"2xl"},stickyIcon:!0,onClick:a,children:"Connect"})})})})]})},t9=function(){var e,n,t,s,r,a,i,o,l,c=(0,er.C)(function(e){return e.user}),u=(0,w._)((0,eP.Z)(),2),d=(u[0],u[1]),h=(0,C.useContext)(eB),p=(0,F.q)(),f=p.isOpen,x=p.onOpen,m=p.onClose,g=(0,F.q)(),y=g.isOpen,b=g.onOpen,j=g.onClose,v=(0,F.q)(),T=v.isOpen,A=v.onOpen,z=v.onClose,R=(0,w._)((0,C.useState)(!1),2),M=R[0],L=R[1],O=(0,ea.useQuery)({queryKey:["GetAllFactions"],queryFn:function(){var e;return eo.s.withoutKey().ryoshiDynasties.getFactions(null===(e=h.game)||void 0===e?void 0:e.game.id)},enabled:!!c.address&&!!(null===(a=h.game)||void 0===a?void 0:a.game.id),initialData:[],refetchOnWindowFocus:!1}),W=(O.data,O.status),D=O.error,B=(e=(0,S._)(function(){return(0,_.__generator)(this,function(e){switch(e.label){case 0:return m(),j(),z(),[4,h.refreshUser()];case 1:return e.sent(),[2]}})}),function(){return e.apply(this,arguments)});(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:if(!c.address)return[2];if(n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,d()];case 1:n=t.sent().signature,t.label=2;case 2:if(!n)return[3,7];t.label=3;case 3:return t.trys.push([3,6,,7]),[4,nm(c.address.toLowerCase(),n,8)];case 4:return t.sent(),[4,h.refreshUser()];case 5:return t.sent(),[3,7];case 6:return console.log(t.sent()),[3,7];case 7:return[2]}})});var V=(n=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:return n=new eF.r(t8.rpc.read),[4,new ez.CH(t8.contracts.fortune,e0,n).allowance(null===(e=c.address)||void 0===e?void 0:e.toLowerCase(),t8.contracts.allianceCenter)];case 1:return[2,t.sent()]}})}),function(){return n.apply(this,arguments)}),U=(t=(0,S._)(function(){var e,n,t,s,r,a,i,o,l,u,p,f,x,m;return(0,_.__generator)(this,function(g){switch(g.label){case 0:if(!c.address)return[2];if(!(null===(e=h.user)||void 0===e?void 0:e.season.faction))return[3,1];return console.log("Already Registered"),[3,14];case 1:if(g.trys.push([1,12,13,14]),L(!0),t=null===(n=(0,eH.ms)())||void 0===n?void 0:n.signature)return[3,3];return[4,d()];case 2:t=g.sent().signature,g.label=3;case 3:if(!t)return[3,11];return[4,nw(null===(s=c.address)||void 0===s?void 0:s.toLowerCase(),t,null===(r=h.game)||void 0===r?void 0:r.season.blockId,null===(a=h.game)||void 0===a?void 0:a.game.id,null===(i=h.user)||void 0===i?void 0:i.faction.id)];case 4:return u=g.sent(),[4,V()];case 5:if(!g.sent().lt(u.cost))return[3,8];return eu.Am.error("Please approve the contract to spend your tokens"),[4,new ez.CH(t8.contracts.fortune,e0,c.provider.getSigner()).approve(t8.contracts.allianceCenter,u.cost)];case 6:return[4,g.sent().wait()];case 7:p=g.sent(),eu.Am.success((0,ey.aS)(p.transactionHash)),g.label=8;case 8:return console.log(f={leader:null===(o=c.address)||void 0===o?void 0:o.toLowerCase(),cost:u.cost,season:null===(l=h.game)||void 0===l?void 0:l.season.blockId}),console.log(Number(eR.formatEther(u.cost))),[4,new ez.CH(t8.contracts.allianceCenter,tZ,c.provider.getSigner()).registerFaction(f,u.signature)];case 9:return[4,g.sent().wait()];case 10:x=g.sent(),h.refreshUser(),eu.Am.success((0,ey.aS)(x.transactionHash)),g.label=11;case 11:return[3,14];case 12:return console.log(m=g.sent()),eu.Am.error((0,e1.O)(m)),[3,14];case 13:return L(!1),[7];case 14:return[2]}})}),function(){return t.apply(this,arguments)}),X=(0,tV.TA)({onSubmit:function(){return console.log("submit")},initialValues:{},enableReinitialize:!0}),q=(0,w._)((0,C.useState)(0),2),K=q[0],Y=q[1],Q=(0,w._)((0,C.useState)(0),2),J=(Q[0],Q[1]),$=(0,w._)((0,C.useState)(!1),2),ee=$[0],en=$[1];return(0,C.useEffect)(function(){var e,n,t,s,r,a,i,o,l,c,u,d,p,f,x,m,g,y,b,j,v;h.user&&((null===(t=h.user)||void 0===t?void 0:null===(n=t.season)||void 0===n?void 0:null===(e=n.troops)||void 0===e?void 0:e.undeployed)!==void 0&&Y(null===(x=h.user)||void 0===x?void 0:null===(f=x.season)||void 0===f?void 0:null===(p=f.troops)||void 0===p?void 0:p.undeployed),(null===(a=h.user)||void 0===a?void 0:null===(r=a.season)||void 0===r?void 0:null===(s=r.troops)||void 0===s?void 0:s.deployed)!==void 0&&(null===(l=h.user)||void 0===l?void 0:null===(o=l.season)||void 0===o?void 0:null===(i=o.troops)||void 0===i?void 0:i.undeployed)!==void 0&&J((null===(y=h.user)||void 0===y?void 0:null===(g=y.season)||void 0===g?void 0:null===(m=g.troops)||void 0===m?void 0:m.deployed)+(null===(v=h.user)||void 0===v?void 0:null===(j=v.season)||void 0===j?void 0:null===(b=j.troops)||void 0===b?void 0:b.undeployed)),(null===(u=h.user)||void 0===u?void 0:null===(c=u.faction)||void 0===c?void 0:c.id)!==void 0&&(null===(d=h.user)||void 0===d?void 0:d.faction.isEnabled)?(console.log("Faction Created and Enabled"),en(!0)):(console.log("Faction Not Created or Enabled"),en(!1)))},[h]),X.values,X.errors,X.touched,X.handleChange,X.setFieldValue,X.setFieldTouched,X.handleBlur,X.validateForm,X.handleSubmit,(0,k.jsxs)(N.xu,{mt:4,children:["loading"===W?(0,k.jsxs)(N.xu,{padding:6,children:[(0,k.jsx)(H.M,{children:(0,k.jsx)(tO.s,{size:"20",startColor:"#ccc"})}),(0,k.jsx)(tW.N,{mt:4,noOfLines:2,spacing:"4",skeletonHeight:"2",startColor:"#ccc"}),(0,k.jsx)(tW.N,{mt:8,noOfLines:2,spacing:"4",skeletonHeight:"2",startColor:"#ccc"}),(0,k.jsx)(tW.N,{mt:8,noOfLines:2,spacing:"4",skeletonHeight:"2",startColor:"#ccc"})]}):"error"===W?(0,k.jsx)(H.M,{children:(0,k.jsx)(I.x,{children:D.message})}):(0,k.jsxs)(k.Fragment,{children:[(null===(i=h.user)||void 0===i?void 0:i.faction)?(0,k.jsxs)(E.g,{children:[(0,k.jsx)(nI.q,{size:"2xl",src:null===(o=h.user)||void 0===o?void 0:o.faction.image,filter:ee?"none":"grayscale(100%)"}),(0,k.jsx)(I.x,{paddingTop:"40px",position:"absolute",fontSize:"lg",as:"i",fontWeight:"bold",textColor:"red",children:ee?"":"Faction Disbanded"}),(0,k.jsxs)(eU.K,{direction:"row",align:"center",children:[(0,k.jsx)(I.x,{fontSize:"lg",fontWeight:"bold",children:h.user.faction.name}),(0,k.jsx)(G.h,{"aria-label":"Edit Faction",icon:(0,k.jsx)(tD.d,{}),variant:"ghost",color:"#FFD700",onClick:x})]}),ee&&(0,k.jsxs)(N.xu,{bg:"#564D4A",p:2,rounded:"lg",w:"full",children:[(0,k.jsxs)(Z.M,{columns:2,children:[(0,k.jsxs)(E.g,{align:"start",spacing:0,my:"auto",children:[(0,k.jsx)(I.x,{fontSize:"sm",children:"Current Season"}),(0,k.jsx)(I.x,{fontSize:"lg",fontWeight:"bold",children:h.user.season.faction?"Registered":"Unregistered"})]}),!h.user.season.faction&&(0,k.jsx)(nU.Z,{hoverIcon:!1,onClick:U,isLoading:M,isDisabled:M,children:"Register"})]}),!h.user.season.faction&&(0,k.jsxs)(N.xu,{textAlign:"start",mt:2,fontSize:"sm",children:[(0,k.jsxs)(I.x,{children:["Regular Cost: ",(0,eJ.commify)(h.config.factions.registration.cost)," Fortune + ",h.config.factions.registration.troopsCost," Troops"]}),(0,k.jsx)(I.x,{children:"Presale Users: Free for first season"})]})]})]}):(0,k.jsx)(H.M,{children:(0,k.jsxs)(E.g,{spacing:6,mb:2,children:[(0,k.jsx)(I.x,{children:"You are not the owner of any faction yet"}),(0,k.jsx)(nU.Z,{stickyIcon:!0,onClick:b,children:"Create Faction"})]})}),!!h.user&&(0,k.jsx)(N.xu,{bg:"#564D4A",p:2,rounded:"lg",w:"full",mt:2,children:(0,k.jsxs)(Z.M,{columns:2,children:[(0,k.jsx)(I.x,{textAlign:"left",marginTop:"auto",fontSize:"sm",children:"Total"}),(0,k.jsx)(I.x,{textAlign:"right",marginTop:"auto",fontSize:"lg",fontWeight:"bold",children:h.user.armiesInfo.total.nativeTroops+h.user.armiesInfo.total.delegatedTroops}),(0,k.jsx)(P.L,{}),(0,k.jsxs)(I.x,{textColor:"#aaa",textAlign:"right",marginTop:"auto",fontSize:"sm",as:"i",children:["Native (",h.user.armiesInfo.total.nativeTroops,") + Delegated(",h.user.armiesInfo.total.delegatedTroops,")"]}),(0,k.jsx)(I.x,{textAlign:"left",marginTop:"auto",fontSize:"sm",children:"Available Troops"}),(0,k.jsx)(I.x,{textAlign:"right",marginTop:"auto",fontSize:"lg",fontWeight:"bold",children:K}),(0,k.jsx)(P.L,{}),(0,k.jsxs)(I.x,{textColor:"#aaa",textAlign:"right",marginTop:"auto",fontSize:"sm",as:"i",children:["Native (",h.user.armiesInfo.available.availableTroops-h.user.armiesInfo.total.delegatedTroops,") + Delegated(",h.user.armiesInfo.total.delegatedTroops,")"]}),(0,k.jsx)(I.x,{textAlign:"left",marginTop:"auto",fontSize:"sm",children:"Deployed Troops"}),(0,k.jsx)(I.x,{textAlign:"right",marginTop:"auto",fontSize:"lg",fontWeight:"bold",children:h.user.armiesInfo.available.availableControlPoint}),(0,k.jsx)(P.L,{}),(0,k.jsxs)(I.x,{textColor:"#aaa",textAlign:"right",marginTop:"auto",fontSize:"sm",as:"i",children:["You (",h.user.armiesInfo.available.ownDeployedTroops,") + Other Players(",h.user.armiesInfo.deployed.deployedTroopsPerOthersPlayers,")"]}),(0,k.jsx)(I.x,{textAlign:"left",marginTop:"auto",fontSize:"sm",children:"Slain Troops"}),(0,k.jsx)(I.x,{textAlign:"right",marginTop:"auto",fontSize:"lg",fontWeight:"bold",children:(r=0,null===(s=h.user)||void 0===s||s.armiesInfo.slain.slainTroopsPerControlPoint.forEach(function(e){r+=e.troops}),r)}),(!!h.user.season.troops.undeployed&&!h.user.season.faction||!(null===(l=h.user.faction)||void 0===l?void 0:l.isEnabled))&&(0,k.jsx)(nU.Z,{hoverIcon:!1,onClick:A,maxH:"50px",children:"Delegate"})]})})]}),!!h.user&&(0,k.jsxs)(k.Fragment,{children:[h.user.faction?(0,k.jsx)(t1,{isOpen:f,onClose:m,faction:h.user.faction,handleClose:B,isRegistered:!!h.user.season.faction}):(0,k.jsx)(t5,{isOpen:y,onClose:j,handleClose:B}),(0,k.jsx)(t6,{isOpen:T,onClose:z,delegateMode:"delegate"})]})]})},se=function(e){var n=e.onBack;return(0,k.jsxs)("section",{className:"gl-legacy container",children:[(0,k.jsx)(tA.Z,{onBack:n}),(0,k.jsx)(eg.X,{className:"title text-center",children:"Academy - Wiki"}),(0,k.jsxs)(nO.r,{templateColumns:"repeat(2, 1fr)",gap:6,children:[(0,k.jsx)(nW.P,{w:"100%",h:"100%",children:(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)(U.E,{src:"img/battle-bay/alliancecenter_day.png"})})}),(0,k.jsx)(nW.P,{w:"100%",h:"100%",children:(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)(U.E,{src:"img/battle-bay/townhall_day.png"})})}),(0,k.jsxs)(nW.P,{w:"100%",h:"150",margin:"auto",children:[(0,k.jsx)(eg.X,{className:"title text-center",children:"Alliance Center"}),(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)("p",{children:"Allows for faction management"})})]}),(0,k.jsxs)(nW.P,{w:"100%",h:"150",margin:"auto",children:[(0,k.jsx)(eg.X,{className:"title text-center",children:"Town Hall"}),(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)("p",{children:'The Town Hall provides a Community Wallet, acts as a staking contract for rewarding "no listings" and requires players to own a clan and costs Koban, wood, and fortune.'})})]}),(0,k.jsx)(nW.P,{w:"100%",h:"100%",children:(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)(U.E,{src:"img/battle-bay/academy_day.png"})})}),(0,k.jsx)(nW.P,{w:"100%",h:"100%",children:(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)(U.E,{src:"img/battle-bay/academy_day.png"})})}),(0,k.jsxs)(nW.P,{w:"100%",h:"150",margin:"auto",children:[(0,k.jsx)(eg.X,{className:"title text-center",children:"Announcement Board"}),(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)("p",{children:"includes News (recent game changes/patches/etc.)"})})]}),(0,k.jsxs)(nW.P,{w:"100%",h:"150",margin:"auto",children:[(0,k.jsx)(eg.X,{className:"title text-center",children:"Leaderboard"}),(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)("p",{children:"Shows the amount of Battle Units (which factions have the most units), and Leaderboard Victory Points (which factions have won the most battles)."})})]}),(0,k.jsx)(nW.P,{w:"100%",h:"100%",children:(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)(U.E,{src:"img/battle-bay/bank_day.png"})})}),(0,k.jsx)(nW.P,{w:"100%",h:"100%",children:(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)(U.E,{src:"img/battle-bay/fishmarket_day.png"})})}),(0,k.jsxs)(nW.P,{w:"100%",h:"150",margin:"auto",children:[(0,k.jsx)(eg.X,{className:"title text-center",children:"Bank"}),(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)("p",{children:"Provides Fortune Staking"})})]}),(0,k.jsxs)(nW.P,{w:"100%",h:"150",margin:"auto",children:[(0,k.jsx)(eg.X,{className:"title text-center",children:"Fish Market"}),(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)("p",{children:"Allows for NFT Trading of Ryoshi items only"})})]}),(0,k.jsx)(nW.P,{w:"100%",h:"100%",children:(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)(U.E,{src:"img/battle-bay/tavern_day.png"})})}),(0,k.jsx)(nW.P,{w:"100%",h:"100%",children:(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)(U.E,{src:"img/battle-bay/barracks_day.png"})})}),(0,k.jsxs)(nW.P,{w:"100%",h:"150",margin:"auto",children:[(0,k.jsx)(eg.X,{className:"title text-center",children:"Tavern"}),(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)("p",{children:"includes Ryoshi Quests"})})]}),(0,k.jsxs)(nW.P,{w:"100%",h:"150",margin:"auto",children:[(0,k.jsx)(eg.X,{className:"title text-center",children:"Barracks"}),(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)("p",{children:"allows players to stake Ryoshi NFTs for battle bonus."})})]})]})]})},sn=t(16393),st=t(81247),ss=t.n(st),sr=function(){var e=(0,w._)((0,C.useState)(!1),2);return e[0],e[1],(0,er.C)(function(e){return e.user}),(0,k.jsxs)(eU.K,{spacing:3,className:ss().className,fontSize:{base:"xs",md:"sm"},children:[(0,k.jsx)(I.x,{p:4,children:"Stake $Fortune to receive Troops and earn $Fortune rewards. Troops are essential to play Ryoshi Dynasties, by battling other Factions and taking victory over control points to earn additional rewards. The more you stake, the more Troops you will receive and a higher APR% will be earned. Stake in multiple vaults to match your gameplay strategies."}),(0,k.jsxs)(eX.U,{fontSize:"sm",defaultIndex:[0],children:[(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"How do I stake?"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsxs)(I.x,{children:["To stake $Fortune, simply create a vault by clicking the ",(0,k.jsx)("strong",{children:'"+ New Vault"'})," button. From there, choose how much to stake and for how long."]}),(0,k.jsx)(I.x,{mt:2,children:"Note that once staked, the Fortune amount cannot be returned until either the staking duration has ended, or the emergency withdraw is used."})]})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"How is APR and Troop count calculated?"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsx)(I.x,{children:"APR is based on the length of time in the staking vault. The longer the staking term, the higher the APR"}),(0,k.jsx)(I.x,{mt:2,children:"Troops are based on how much staked and for how long. Minimum requirement is 120 Fortune staked for 1 season to earn 1 Troop"})]})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Can a vault be modified?"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsx)(eY.H,{pb:4,children:(0,k.jsxs)(I.x,{children:["Yes, a vault can have either its Fortune amount or staking duration changed. To update the amount to stake, click the ",(0,k.jsx)("strong",{children:'"+ Add Fortune"'})," button. To update the staking duration, click the ",(0,k.jsx)("strong",{children:'"+ Increase duration"'})," button. From here, you can modify the values and also see a preview of the vault's new APR, Troop count and end date."]})})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Can the APR be increased?"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsx)(eY.H,{pb:4,children:(0,k.jsxs)(I.x,{children:["Other than increasing the staking duration, APR can be increased by staking ",(0,k.jsx)("strong",{children:"Ryoshi NFTs"}),". Stake these NFTs by clicking the ",(0,k.jsx)("strong",{children:'"Stake NFTs"'})," button in the main Bank area. Higher ranked NFTs will add a higher APR."]})})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"How do I withdraw staked Fortune?"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsx)(eY.H,{pb:4,children:(0,k.jsx)(I.x,{children:"Staked Fortune is locked until the end of the staking duration. However, it is possible to withdraw early with the Emergency Withdraw function. This will withdraw all the Fortune in the vault, but will burn 50% of the Fortune value. Take caution of this if using this feature."})})]})]})]})},sa=t(68121),si=(0,ek.eG)(),so=function(e){var n,t=e.onEditVault,s=e.onCreateVault,r=e.onWithdrawVault,a=(0,nG.I0)(),i=(0,er.C)(function(e){return e.user}),o=(0,ea.useQuery)(["UserStakeAccount",i.address],function(){return eo.s.withoutKey().ryoshiDynasties.getBankStakingAccount(i.address)},{enabled:!!i.address}),l=o.data,c=o.status,u=o.error,d=o.refetch,h=(n=(0,S._)(function(){return(0,_.__generator)(this,function(e){return i.address||(i.needsOnboard?new nX.Z().startOnboarding():i.address?i.correctChain||a((0,nq.Ns)()):a((0,nq.Yn)())),[2]})}),function(){return n.apply(this,arguments)});return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(N.xu,{mx:1,pb:6,children:i.address?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(I.x,{align:"center",pt:2,px:2,fontSize:"sm",children:"Stake & earn $Fortune and receive troops for battle. Stake more to receive more troops and higher APRs."}),(0,k.jsx)(N.xu,{mt:4,children:"loading"===c?(0,k.jsx)(H.M,{children:(0,k.jsx)(K.$,{size:"lg"})}):"error"===c?(0,k.jsx)(H.M,{children:(0,k.jsx)(I.x,{children:u.message})}):(0,k.jsx)(k.Fragment,{children:!!l&&l.vaults.length>0&&(0,k.jsx)(eX.U,{defaultIndex:[0],allowToggle:!0,children:l.vaults.map(function(e,n){return(0,k.jsx)(N.xu,{mt:2,children:(0,k.jsx)(sl,{vault:e,index:n,onEditVault:function(n){return t(e,n)},onWithdrawVault:function(){return r(e)},onClosed:d})},e.vaultId)})})})}),(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",mt:8,children:(0,k.jsx)(N.xu,{ps:"20px",children:(0,k.jsx)(nU.Z,{fontSize:{base:"xl",sm:"2xl"},stickyIcon:!0,onClick:function(){return s(l?l.vaults.length:0)},children:"+ New Vault"})})})]}):(0,k.jsxs)(E.g,{fontSize:"sm",mt:2,spacing:8,children:[(0,k.jsx)(I.x,{children:"Receive Troops and $Mitama by staking $Fortune. Receive more by staking longer."}),(0,k.jsx)(nU.Z,{fontSize:{base:"xl",sm:"2xl"},stickyIcon:!0,onClick:h,children:"Connect"})]})})})},sl=function(e){var n,t=e.vault,s=e.index,r=e.onEditVault,a=e.onWithdrawVault,i=e.onClosed,o=(0,C.useContext)(eB),l=o.config,c=o.user,u=(0,er.C)(function(e){return e.user}),d=Number(eR.formatEther(t.balance)),h=Number(t.length/86400),p=Math.floor(h/l.bank.staking.fortune.termLength),f=l.bank.staking.fortune.apr,x=(0,ey.sI)(Object.keys(f),p),m=(null!==(n=f[x])&&void 0!==n?n:f[1])*100,g=tx()(1e3*t.endTime).format("MMM D yyyy"),y=(0,w._)((0,C.useState)(!1),2),b=y[0],j=y[1],v=(0,w._)((0,C.useState)(!0),2),T=v[0],A=v[1],F=(0,C.useCallback)((0,S._)(function(){var e,n;return(0,_.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,4,5]),j(!0),[4,new ez.CH(si.contracts.bank,sa,u.provider.getSigner()).emergencyClose(t.index)];case 1:return[4,s.sent().wait()];case 2:return e=s.sent(),eu.Am.success((0,ey.aS)(e.transactionHash)),i(),[3,5];case 3:return console.log(n=s.sent()),void 0!==n.response?eu.Am.error(n.response.data.error.metadata.message):eu.Am.error(n),[3,5];case 4:return j(!1),[7];case 5:return[2]}})}),[]),P=(0,w._)((0,C.useState)(m),2),M=P[0],L=P[1],O=(0,w._)((0,C.useState)(0),2),W=O[0],D=O[1];(0,C.useEffect)(function(){A(t.length/86400<l.bank.staking.fortune.maxTerms*l.bank.staking.fortune.termLength);var e=0;c&&(e=(m+c.bank.bonus.aApr)*(1+c.bank.bonus.mApr)-m),D(e),L(m+e)},[t,l,c,m]);var B=(0,w._)((0,C.useState)(0),2),V=B[0],q=B[1];return(0,C.useEffect)(function(){var e=Math.floor(d*h/1080/l.bank.staking.fortune.mitamaTroopsRatio);e<1&&d>0&&(e=1),q(e)},[d,h,l]),(0,k.jsx)(N.xu,{children:(0,k.jsxs)(eq.Q,{bgColor:"#292626",rounded:"md",children:[(0,k.jsx)(eG.K,{w:"full",py:4,children:(0,k.jsx)(z.k,{direction:"column",w:"full",align:"start",children:(0,k.jsxs)(z.k,{w:"full",align:"center",children:[(0,k.jsxs)(N.xu,{flex:"1",textAlign:"left",my:"auto",children:[(0,k.jsxs)(I.x,{fontSize:"xs",color:"#aaa",children:["Vault ",s+1]}),(0,k.jsxs)(N.xu,{fontWeight:"bold",children:[h," days"]})]}),(0,k.jsx)(N.xu,{children:(0,k.jsxs)(E.g,{align:"end",spacing:2,fontSize:"sm",children:[(0,k.jsxs)(X.U,{fontWeight:"bold",children:[(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/fortune.svg").convert(),alt:"fortuneIcon",boxSize:6}),(0,k.jsx)(N.xu,{children:(0,eJ.commify)(d)})]}),(0,k.jsxs)(z.k,{children:[(0,k.jsxs)(tT.Vp,{variant:"outline",children:[(0,ey.NM)(M,2),"%"]}),(0,k.jsxs)(tT.Vp,{ms:2,variant:"outline",children:[(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/troops.png").convert(),alt:"troopsIcon",boxSize:4}),(0,k.jsx)(N.xu,{ms:1,children:(0,eJ.commify)(V)})]})]})]})}),(0,k.jsx)(N.xu,{ms:4,children:(0,k.jsx)(eK.X,{})})]})})}),(0,k.jsxs)(eY.H,{pb:0,children:[(0,k.jsxs)(Z.M,{columns:2,children:[(0,k.jsx)(N.xu,{children:"APR"}),(0,k.jsx)(N.xu,{textAlign:"end",children:(0,k.jsxs)(E.g,{align:"end",spacing:0,children:[(0,k.jsxs)(N.xu,{fontWeight:"bold",children:[M,"%"]}),(0,k.jsxs)(N.xu,{fontSize:"xs",children:[m,"% Fortune stake + ",(0,ey.NM)(W,2),"% NFT stake"]})]})}),(0,k.jsx)(N.xu,{children:"Troops"}),(0,k.jsx)(N.xu,{textAlign:"end",fontWeight:"bold",children:(0,eJ.commify)(V)}),(0,k.jsx)(N.xu,{children:"End Date"}),(0,k.jsx)(N.xu,{textAlign:"end",fontWeight:"bold",children:g})]}),Date.now()<1e3*t.endTime?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(H.M,{children:(0,k.jsxs)(eU.K,{direction:{base:"column",sm:"row"},mt:4,children:[(0,k.jsx)(R.z,{onClick:function(){return r("amount")},children:"+ Add Fortune"}),T&&(0,k.jsx)(R.z,{onClick:function(){return r("duration")},children:"+ Increase Duration"})]})}),(0,k.jsx)(H.M,{mt:4,children:(0,k.jsx)(R.z,{variant:"unstyled",size:"sm",fontWeight:"normal",onClick:a,children:"Emergency Withdraw"})})]}):(0,k.jsxs)(E.g,{mb:2,mt:4,children:[(0,k.jsx)(I.x,{textAlign:"center",children:"Vault staking term is complete! Close this vault to return the staked Fortune back to your account."}),(0,k.jsx)(nU.Z,{w:"200px",hoverIcon:!1,onClick:F,isLoading:b,isDisabled:b,loadingText:"Closing",children:"Close Vault"})]})]})]})})},sc=(0,ek.eG)(),su={form:"form",complete:"complete"},sd=function(e){var n=e.amount,t=e.duration,s=e.onReturn;return(0,k.jsxs)(N.xu,{py:4,children:[!!n&&n>0&&(0,k.jsxs)(N.xu,{textAlign:"center",mt:2,children:["An extra ",n," $Fortune has now been staked to this vault!"]}),!!t&&t>0&&(0,k.jsxs)(N.xu,{textAlign:"center",mt:2,children:["An extra ",t," days has now been added to this vault!"]}),(0,k.jsx)(N.xu,{textAlign:"center",mt:8,mx:2,children:(0,k.jsx)(N.xu,{ps:"20px",children:(0,k.jsx)(nU.Z,{fontSize:{base:"xl",sm:"2xl"},stickyIcon:!0,onClick:s,children:"Back To Vaults"})})})]})},sh=function(e){var n,t,s,r,a,i=e.vault,o=e.type,l=e.onReturn,c=(0,nG.I0)(),u=(0,er.C)(function(e){return e.user}),d=(0,C.useContext)(eB),h=d.config,p=d.refreshUser;(0,ea.useQueryClient)();var f=(0,w._)((0,C.useState)(su.form),2),x=f[0],m=f[1],g=(0,w._)((0,C.useState)(!1),2),y=g[0],b=g[1],j=(0,w._)((0,C.useState)("Staking..."),2),v=j[0],T=j[1],A=(0,w._)((0,C.useState)(!1),2),F=A[0],P=A[1],H=(0,w._)((0,C.useState)(h.bank.staking.fortune.maxTerms),2),M=H[0],L=H[1],O=(0,w._)((0,C.useState)(1e3),2),W=O[0],B=O[1],V=(0,w._)((0,C.useState)(h.bank.staking.fortune.termLength),2),X=V[0],q=V[1],G=(0,w._)((0,C.useState)(0),2),Y=G[0],Q=G[1],J=(0,w._)((0,C.useState)(""),2),$=J[0],ee=J[1],en=(0,w._)((0,C.useState)(""),2),et=en[0],ei=en[1],eo=(0,w._)((0,C.useState)(0),2),el=eo[0],ec=eo[1],ed=(0,w._)((0,C.useState)(0),2),eh=ed[0];ed[1];var ep=(0,w._)((0,C.useState)(0),2),ef=ep[0],ex=ep[1],em=(0,w._)((0,C.useState)(0),2),eg=em[0],eb=em[1],ej=(0,w._)((0,C.useState)(i.endTime),2),ev=ej[0],ew=ej[1],ek=(n=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:return n=new eF.r(sc.rpc.read),[4,new ez.CH(sc.contracts.fortune,e0,n).allowance(null===(e=u.address)||void 0===e?void 0:e.toLowerCase(),sc.contracts.bank)];case 1:return[2,t.sent()]}})}),function(){return n.apply(this,arguments)}),eS=(t=(0,S._)(function(){var e,n,t;return(0,_.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,,2,3]),P(!0),n=new eF.r(sc.rpc.read),[4,new ez.CH(sc.contracts.fortune,e0,n).balanceOf(null===(e=u.address)||void 0===e?void 0:e.toLowerCase())];case 1:return t=s.sent(),Q(Number(ty.hexValue(eN.O$.from(t)))/1e18),[3,3];case 2:return P(!1),[7];case 3:return[2]}})}),function(){return t.apply(this,arguments)}),e_=(0,C.useCallback)(function(e){B(Math.floor(Y*(e/100)))},[Y]),eT=(s=(0,S._)(function(){var e;return(0,_.__generator)(this,function(n){return(T("Validating"),(e="duration"===o)||!(Y<W))?!e&&W<1?(ei("At least 1 Fortune required"),[2,!1]):(ei(""),e&&X<h.bank.staking.fortune.termLength)?(ee("At least ".concat(h.bank.staking.fortune.termLength," days required")),[2,!1]):(ee(""),[2,!0]):(eu.Am.error("Not enough Fortune"),[2])})}),function(){return s.apply(this,arguments)}),eA=(r=(0,S._)(function(){return(0,_.__generator)(this,function(e){switch(e.label){case 0:if(!u.address)return[3,3];return[4,eT()];case 1:if(!e.sent())return[2];return[4,eI()];case 2:return e.sent(),[3,4];case 3:u.needsOnboard?new nX.Z().startOnboarding():u.address?u.correctChain||c((0,nq.Ns)()):c((0,nq.Yn)()),e.label=4;case 4:return[2]}})}),function(){return r.apply(this,arguments)}),eI=(a=(0,S._)(function(){var e,n,t,s,r,a,l;return(0,_.__generator)(this,function(c){switch(c.label){case 0:if(c.trys.push([0,11,12,13]),b(!0),T("Staking"),e=new ez.CH(sc.contracts.bank,sa,u.provider.getSigner()),"duration"!==o)return[3,3];return[4,e.increaseLengthForVault(86400*X,i.index)];case 1:case 5:return[4,c.sent().wait()];case 2:return n=c.sent(),eu.Am.success((0,ey.aS)(n.transactionHash)),[3,10];case 3:return[4,ek()];case 4:if(t=c.sent(),s=eR.parseEther(Math.floor(W).toString()),!t.lt(s))return[3,7];return[4,new ez.CH(sc.contracts.fortune,e0,u.provider.getSigner()).approve(sc.contracts.bank,s)];case 6:r=c.sent(),eu.Am.success((0,ey.aS)(r.transactionHash)),c.label=7;case 7:return[4,e.increaseDepositForVault(eR.parseEther(String(W)),i.index)];case 8:return[4,c.sent().wait()];case 9:a=c.sent(),eu.Am.success((0,ey.aS)(a.transactionHash)),c.label=10;case 10:return p(),m(su.complete),[3,13];case 11:return console.log(l=c.sent()),void 0!==l.response?(console.log(l),eu.Am.error(l.response.data.error.metadata.message)):eu.Am.error(l),[3,13];case 12:return b(!1),[7];case 13:return[2]}})}),function(){return a.apply(this,arguments)});return(0,C.useEffect)(function(){var e,n=i.length/86400;"duration"===o&&(n+=X);var t=Math.floor(n/h.bank.staking.fortune.termLength),s=h.bank.staking.fortune.apr,r=(0,ey.sI)(Object.keys(s),t);ex(null!==(e=s[r])&&void 0!==e?e:s[1]),eR.formatEther(i.balance);var a=Math.floor(W*X/1080/h.bank.staking.fortune.mitamaTroopsRatio);a<1&&W>0&&(a=1),eb(a),ew((Number(i.endTime)+86400*X)*1e3)},[X,W]),(0,C.useEffect)(function(){var e,n=Number(i.length/86400);eR.formatEther(i.balance);var t=Math.floor(n/h.bank.staking.fortune.termLength),s=h.bank.staking.fortune.apr,r=(0,ey.sI)(Object.keys(s),t);ec(null!==(e=s[r])&&void 0!==e?e:s[1]);var a=Math.floor(W*X/1080/h.bank.staking.fortune.mitamaTroopsRatio);a<1&&W>0&&(a=1),eb(a)},[i]),(0,C.useEffect)(function(){u.address&&eS()},[u.address]),(0,C.useEffect)(function(){var e=i.length/86400/h.bank.staking.fortune.termLength;L(h.bank.staking.fortune.maxTerms-e)},[i,h]),(0,k.jsx)(N.xu,{mx:1,pb:6,children:x===su.complete?(0,k.jsx)(sd,{amount:"amount"===o?W:0,duration:"duration"===o?X:0,onReturn:l}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N.xu,{textAlign:"center",bgColor:"#292626",roundedBottom:"md",p:4,children:(0,k.jsxs)(Z.M,{columns:{base:2,sm:4},gap:2,children:[(0,k.jsxs)(N.xu,{children:[(0,k.jsx)(I.x,{fontSize:"sm",children:"Staked"}),(0,k.jsx)(I.x,{fontWeight:"bold",children:(0,eJ.commify)((0,ey.NM)(Number(eR.formatEther(i.balance))))})]}),(0,k.jsxs)(N.xu,{children:[(0,k.jsx)(I.x,{fontSize:"sm",children:"APR"}),(0,k.jsxs)(I.x,{fontWeight:"bold",children:[100*el,"%"]})]}),(0,k.jsxs)(N.xu,{children:[(0,k.jsx)(I.x,{fontSize:"sm",children:"Troops"}),(0,k.jsx)(I.x,{fontWeight:"bold",children:eh})]}),(0,k.jsxs)(N.xu,{children:[(0,k.jsx)(I.x,{fontSize:"sm",children:"Withdraw Date"}),(0,k.jsx)(I.x,{fontWeight:"bold",children:tx()(1e3*i.endTime).format("MMM D yyyy")})]})]})}),(0,k.jsxs)(N.xu,{bgColor:"#292626",rounded:"md",mt:1,p:4,children:[(0,k.jsxs)(Z.M,{columns:"amount"===o?2:1,children:["amount"===o&&(0,k.jsxs)(E.g,{align:"start",children:[(0,k.jsx)(N.xu,{fontSize:"sm",fontWeight:"bold",children:"Deposit Amount"}),(0,k.jsxs)(nL.NI,{maxW:"200px",isInvalid:!!et,children:[(0,k.jsxs)(nZ.Y2,{defaultValue:1250,min:1,name:"quantity",onChange:function(e,n){B(isNaN(n)?0:Math.floor(n))},value:W,step:1e3,children:[(0,k.jsx)(nZ.zu,{}),(0,k.jsxs)(nZ.Fi,{children:[(0,k.jsx)(nZ.WQ,{color:"#ffffffcc"}),(0,k.jsx)(nZ.Y_,{color:"#ffffffcc"})]})]}),(0,k.jsx)(nV.J1,{children:et})]})]}),"duration"===o&&(0,k.jsxs)(E.g,{align:"start",children:[(0,k.jsx)(I.x,{children:"Increase duration by"}),(0,k.jsxs)(nL.NI,{maxW:"250px",isInvalid:!!$,children:[(0,k.jsx)(nB.P,{onChange:function(e){q(Number(e.target.value))},value:X,bg:"none",children:(0,D._)(Array(M).fill(0)).map(function(e,n){return(0,k.jsxs)("option",{value:"".concat((n+1)*h.bank.staking.fortune.termLength),children:[n+1," ",(0,ey._6)(n+1,"Season")," (",(n+1)*h.bank.staking.fortune.termLength," days)"]},n)})}),(0,k.jsx)(nV.J1,{children:$})]})]}),"amount"===o&&(0,k.jsxs)(E.g,{align:"end",textAlign:"end",children:[(0,k.jsxs)(N.xu,{fontSize:"sm",fontWeight:"bold",children:["Balance: ",F?(0,k.jsx)(K.$,{size:"sm"}):(0,eJ.commify)((0,ey.NM)(Y))]}),(0,k.jsxs)(z.k,{justify:"end",children:[(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/fortune.svg").convert(),alt:"fortuneIcon",boxSize:6}),(0,k.jsx)(N.xu,{ms:1,children:"$Fortune"})]})]})]}),"amount"===o&&(0,k.jsx)(z.k,{mt:8,justify:"center",children:(0,k.jsxs)(es.h,{children:[(0,k.jsx)(R.z,{rounded:"2xl",size:{base:"sm",sm:"md"},onClick:function(){return e_(25)},children:"25%"}),(0,k.jsx)(R.z,{rounded:"2xl",size:{base:"sm",sm:"md"},onClick:function(){return e_(50)},children:"50%"}),(0,k.jsx)(R.z,{rounded:"2xl",size:{base:"sm",sm:"md"},onClick:function(){return e_(75)},children:"75%"}),(0,k.jsx)(R.z,{rounded:"2xl",size:{base:"sm",sm:"md"},onClick:function(){return e_(100)},children:"MAX"})]})})]}),(0,k.jsxs)(Z.M,{columns:2,my:4,px:1,children:[(0,k.jsx)(N.xu,{children:"APR"}),(0,k.jsxs)(N.xu,{textAlign:"end",fontWeight:"bold",children:[100*ef,"%"]}),(0,k.jsx)(N.xu,{children:"Troops"}),(0,k.jsx)(N.xu,{textAlign:"end",fontWeight:"bold",children:eg}),(0,k.jsx)(N.xu,{children:"End Date"}),(0,k.jsx)(N.xu,{textAlign:"end",fontWeight:"bold",children:tx()(ev).format("MMM D yyyy")})]}),(0,k.jsxs)(N.xu,{bgColor:"#292626",rounded:"md",p:4,fontSize:"sm",children:[(0,k.jsx)(I.x,{children:"You will not be able to withdraw your tokens before the period end date."}),(0,k.jsx)(I.x,{mt:4,children:"APR figures are estimates provided for your convenience only, and by no means represent guaranteed returns."})]}),(0,k.jsx)(N.xu,{mt:8,textAlign:"center",children:(0,k.jsx)(nU.Z,{fontSize:{base:"xl",sm:"2xl"},stickyIcon:!0,onClick:eA,isLoading:y,disabled:y,loadingText:y?v:"Update",children:u.address?(0,k.jsx)(k.Fragment,{children:"Update"}):(0,k.jsx)(k.Fragment,{children:"Connect"})})})]})})},sp=(0,ek.eG)(),sf={form:"form",complete:"complete"},sx=function(e){var n=e.amount,t=e.duration,s=e.onReturn;return(0,k.jsxs)(N.xu,{py:4,children:[(0,k.jsxs)(N.xu,{textAlign:"center",mt:2,children:[n," $Fortune has now been staked for ",t," days!"]}),(0,k.jsx)(N.xu,{textAlign:"center",mt:8,mx:2,children:(0,k.jsx)(N.xu,{ps:"20px",children:(0,k.jsx)(nU.Z,{fontSize:{base:"xl",sm:"2xl"},stickyIcon:!0,onClick:s,children:"Back To Vaults"})})})]})},sm=function(e){var n,t,s,r,a,i=e.vaultIndex,o=e.onReturn,l=(0,nG.I0)(),c=(0,C.useContext)(eB),u=c.config,d=c.refreshUser,h=(0,er.C)(function(e){return e.user}),p=(0,w._)((0,C.useState)(sf.form),2),f=p[0],x=p[1],m=(0,w._)((0,C.useState)(!1),2),g=m[0],y=m[1],b=(0,w._)((0,C.useState)("Staking..."),2),j=b[0],v=b[1],T=(0,w._)((0,C.useState)(!1),2),A=T[0],F=T[1],H=(0,w._)((0,C.useState)(1250),2),M=H[0],L=H[1],O=(0,w._)((0,C.useState)(u.bank.staking.fortune.termLength),2),W=O[0],B=O[1],V=(0,w._)((0,C.useState)(0),2),q=V[0],G=V[1],Y=(0,w._)((0,C.useState)(""),2),Q=Y[0],J=Y[1],$=(0,w._)((0,C.useState)(""),2),ee=$[0],en=$[1],et=(0,w._)((0,C.useState)(0),2),es=et[0],ea=et[1],ei=(0,w._)((0,C.useState)(0),2),eo=ei[0],el=ei[1],ec=(n=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:return n=new eF.r(sp.rpc.read),[4,new ez.CH(sp.contracts.fortune,e0,n).allowance(null===(e=h.address)||void 0===e?void 0:e.toLowerCase(),sp.contracts.bank)];case 1:return[2,t.sent()]}})}),function(){return n.apply(this,arguments)}),ed=(t=(0,S._)(function(){var e,n,t;return(0,_.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,,2,3]),F(!0),n=new eF.r(sp.rpc.read),[4,new ez.CH(sp.contracts.fortune,e0,n).balanceOf(null===(e=h.address)||void 0===e?void 0:e.toLowerCase())];case 1:return t=s.sent(),G(Number(ty.hexValue(eN.O$.from(t)))/1e18),[3,3];case 2:return F(!1),[7];case 3:return[2]}})}),function(){return t.apply(this,arguments)}),eh=(s=(0,S._)(function(){return(0,_.__generator)(this,function(e){return(v("Validating"),q<M)?(eu.Am.error("Not enough Fortune"),[2]):M<u.bank.staking.fortune.minimum?(en("At least ".concat(u.bank.staking.fortune.minimum," required")),[2,!1]):(en(""),W<u.bank.staking.fortune.termLength)?(J("At least ".concat(u.bank.staking.fortune.termLength," days required")),[2,!1]):(J(""),[2,!0])})}),function(){return s.apply(this,arguments)}),ep=(r=(0,S._)(function(){return(0,_.__generator)(this,function(e){switch(e.label){case 0:if(!h.address)return[3,3];return[4,eh()];case 1:if(!e.sent())return[2];return[4,ef()];case 2:return e.sent(),[3,4];case 3:h.needsOnboard?new nX.Z().startOnboarding():h.address?h.correctChain||l((0,nq.Ns)()):l((0,nq.Yn)()),e.label=4;case 4:return[2]}})}),function(){return r.apply(this,arguments)}),ef=(a=(0,S._)(function(){var e,n,t,s,r;return(0,_.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,7,8,9]),y(!0),v("Approving"),[4,ec()];case 1:if(e=a.sent(),n=eR.parseEther(Math.floor(M).toString()),!e.lt(n))return[3,4];return[4,new ez.CH(sp.contracts.fortune,e0,h.provider.getSigner()).approve(sp.contracts.bank,n)];case 2:return[4,a.sent().wait()];case 3:t=a.sent(),eu.Am.success((0,ey.aS)(t.transactionHash)),a.label=4;case 4:return v("Staking"),[4,new ez.CH(sp.contracts.bank,sa,h.provider.getSigner()).openVault(n,86400*W,i)];case 5:return[4,a.sent().wait()];case 6:return s=a.sent(),eu.Am.success((0,ey.aS)(s.transactionHash)),x(sf.complete),d(),[3,9];case 7:return console.log(r=a.sent()),void 0!==r.response?(console.log(r),eu.Am.error(r.response.data.error.metadata.message)):eu.Am.error(r),[3,9];case 8:return y(!1),[7];case 9:return[2]}})}),function(){return a.apply(this,arguments)});return(0,C.useEffect)(function(){var e,n=Math.floor(W/u.bank.staking.fortune.termLength),t=u.bank.staking.fortune.apr,s=(0,ey.sI)(Object.keys(t),n);ea(null!==(e=t[s])&&void 0!==e?e:t[1]);var r=Math.floor(M*W/1080/u.bank.staking.fortune.mitamaTroopsRatio);r<1&&M>0&&(r=1),el(r)},[W,M]),(0,C.useEffect)(function(){h.address&&ed()},[h.address]),(0,k.jsx)(N.xu,{mx:1,pb:6,children:f===sf.complete?(0,k.jsx)(sx,{amount:M,duration:W,onReturn:o}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N.xu,{bg:"#272523",p:2,roundedBottom:"md",children:(0,k.jsx)(N.xu,{textAlign:"center",w:"full",children:(0,k.jsxs)(z.k,{children:[(0,k.jsx)(P.L,{}),(0,k.jsxs)(X.U,{children:[(0,k.jsx)(I.x,{fontWeight:"bold",fontSize:{base:"sm",sm:"md"},children:"Your"}),(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/fortune.svg").convert(),alt:"fortuneIcon",boxSize:6}),(0,k.jsxs)(I.x,{fontWeight:"bold",fontSize:{base:"sm",sm:"md"},children:["$Fortune: ",A?(0,k.jsx)(K.$,{size:"sm"}):(0,eJ.commify)((0,ey.NM)(q))]})]}),(0,k.jsx)(P.L,{})]})})}),!A&&q>0?(0,k.jsxs)(N.xu,{px:6,pt:6,children:[(0,k.jsxs)(Z.M,{columns:2,fontSize:"sm",children:[(0,k.jsxs)(E.g,{children:[(0,k.jsx)(I.x,{children:"Amount to stake"}),(0,k.jsxs)(nL.NI,{maxW:"200px",isInvalid:!!ee,children:[(0,k.jsxs)(nZ.Y2,{defaultValue:1250,min:u.bank.staking.fortune.minimum,name:"quantity",onChange:function(e,n){L(isNaN(n)?0:Math.floor(n))},value:M,step:1e3,children:[(0,k.jsx)(nZ.zu,{}),(0,k.jsxs)(nZ.Fi,{children:[(0,k.jsx)(nZ.WQ,{color:"#ffffffcc"}),(0,k.jsx)(nZ.Y_,{color:"#ffffffcc"})]})]}),(0,k.jsx)(nV.J1,{children:ee})]}),(0,k.jsx)(z.k,{children:(0,k.jsx)(R.z,{textColor:"#e2e8f0",variant:"link",fontSize:"sm",onClick:function(){return L(Math.floor(q))},children:"Stake all"})})]}),(0,k.jsxs)(E.g,{children:[(0,k.jsx)(I.x,{children:"Duration (days)"}),(0,k.jsxs)(nL.NI,{maxW:"250px",isInvalid:!!Q,children:[(0,k.jsx)(nB.P,{onChange:function(e){B(Number(e.target.value))},value:W,bg:"none",children:(0,D._)(Array(12).fill(0)).map(function(e,n){return(0,k.jsxs)("option",{value:"".concat((n+1)*u.bank.staking.fortune.termLength),children:[n+1," ",(0,ey._6)(n+1,"Season")," (",(n+1)*u.bank.staking.fortune.termLength," days)"]},n)})}),(0,k.jsx)(nV.J1,{children:Q})]})]})]}),(0,k.jsx)(N.xu,{bgColor:"#292626",rounded:"md",p:4,mt:4,textAlign:"center",children:(0,k.jsxs)(Z.M,{columns:2,children:[(0,k.jsx)(I.x,{children:"APR"}),(0,k.jsx)(I.x,{children:"Troops"}),(0,k.jsxs)(I.x,{fontSize:24,fontWeight:"bold",children:[100*es,"%"]}),(0,k.jsx)(I.x,{fontSize:24,fontWeight:"bold",children:(0,eJ.commify)((0,ey.NM)(eo))}),(0,k.jsxs)(I.x,{fontSize:12,color:"#aaa",children:[(0,eJ.commify)(W)," day commitment"]}),(0,k.jsxs)(I.x,{fontSize:12,color:"#aaa",children:[(0,eJ.commify)(M)," $Fortune stake"]})]})}),(0,k.jsx)(P.L,{h:"8"}),(0,k.jsx)(z.k,{alignContent:"center",justifyContent:"center",children:(0,k.jsx)(N.xu,{ps:"20px",children:(0,k.jsx)(nU.Z,{fontSize:{base:"xl",sm:"2xl"},stickyIcon:!0,onClick:ep,isLoading:g,disabled:g,loadingText:j,children:h.address?(0,k.jsx)(k.Fragment,{children:"Stake $Fortune"}):(0,k.jsx)(k.Fragment,{children:"Connect"})})})})]}):!A&&(0,k.jsx)(N.xu,{textAlign:"center",mt:4,children:(0,k.jsx)(I.x,{children:"You currently have no Fortune in your wallet."})})]})})},sg=(0,ek.eG)(),sy={form:"form",complete:"complete"},sb=function(e){var n,t=e.vault,s=e.onComplete,r=(0,w._)((0,C.useState)(!1),2),a=r[0],i=r[1],o=(0,er.C)(function(e){return e.user}),l=(0,w._)((0,C.useState)(0),2);l[0],l[1];var c=(0,w._)((0,C.useState)(),2);c[0],c[1];var u=(0,w._)((0,C.useState)("Staking..."),2),d=u[0],h=u[1],p=(n=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,4,5]),i(!0),h("Withdrawing..."),[4,new ez.CH(sg.contracts.bank,sa,o.provider.getSigner()).emergencyClose(t.index)];case 1:return[4,r.sent().wait()];case 2:return e=r.sent(),eu.Am.success((0,ey.aS)(e.transactionHash)),s(),[3,5];case 3:return console.log(n=r.sent()),eu.Am.error((0,e1.O)(n)),[3,5];case 4:return i(!1),[7];case 5:return[2]}})}),function(){return n.apply(this,arguments)});return(0,k.jsxs)(N.xu,{children:[(0,k.jsxs)(N.xu,{bgColor:"#292626",rounded:"md",p:4,children:[(0,k.jsxs)(N.xu,{mb:6,children:[(0,k.jsxs)(N.xu,{textAlign:"center",fontSize:14,mb:4,children:[(0,k.jsxs)(I.x,{as:"span",children:["Your current staking term will end"," "]}),(0,k.jsx)(I.x,{as:"span",fontWeight:"bold",children:tx()(1e3*t.endTime).format("D MMM yyyy")})]}),(0,k.jsx)(I.x,{textAlign:"center",fontSize:14,children:"Emergency withdrawal allows staked Fortune tokens to be withdrawn without waiting for the staking term to end. However, this will only return 50% of the staked tokens and will burn the rest."})]}),(0,k.jsxs)(z.k,{direction:"row",justify:"space-around",children:[(0,k.jsxs)(E.g,{spacing:0,children:[(0,k.jsx)(I.x,{fontSize:"sm",children:"Total Staked"}),(0,k.jsx)(I.x,{fontSize:"2xl",fontWeight:"bold",children:(0,eJ.commify)(Number(eR.formatEther(t.balance)))})]}),(0,k.jsxs)(E.g,{spacing:0,children:[(0,k.jsx)(I.x,{fontSize:"sm",children:"Amount To Receive"}),(0,k.jsx)(I.x,{fontSize:"2xl",fontWeight:"bold",children:(0,eJ.commify)(Number(eR.formatEther(t.balance))/2)})]})]})]}),(0,k.jsx)(N.xu,{textAlign:"center",mt:8,mx:2,children:(0,k.jsx)(N.xu,{ps:"20px",children:(0,k.jsx)(nU.Z,{fontSize:{base:"xl",sm:"2xl"},stickyIcon:!0,onClick:p,isLoading:a,disabled:a,loadingText:d,children:"Withdraw"})})})]})},sj=function(e){var n=e.onReturn;return(0,k.jsxs)(N.xu,{py:4,children:[(0,k.jsx)(H.M,{children:"Withdraw complete!"}),(0,k.jsx)(N.xu,{textAlign:"center",mt:8,mx:2,children:(0,k.jsx)(N.xu,{ps:"20px",children:(0,k.jsx)(nU.Z,{fontSize:{base:"xl",sm:"2xl"},stickyIcon:!0,onClick:n,children:"Back To Vaults"})})})]})},sv=function(e){var n,t=e.vault,s=e.onReturn,r=(0,nG.I0)(),a=(0,C.useContext)(eB).refreshUser,i=(0,er.C)(function(e){return e.user}),o=(0,w._)((0,C.useState)(sy.form),2),l=o[0],c=o[1],u=(n=(0,S._)(function(){return(0,_.__generator)(this,function(e){return i.address||(i.needsOnboard?new nX.Z().startOnboarding():i.address?i.correctChain||r((0,nq.Ns)()):r((0,nq.Yn)())),[2]})}),function(){return n.apply(this,arguments)});return(0,k.jsxs)(N.xu,{mx:1,pb:6,children:[(0,k.jsx)(I.x,{textAlign:"center",fontSize:14,py:2,children:"Withdraw accumulated Fortune rewards or your Fortune stake"}),i.address?(0,k.jsxs)(N.xu,{p:4,children:[l===sy.form&&(0,k.jsx)(sb,{vault:t,onComplete:function(){c(sy.complete),a()}}),l===sy.complete&&(0,k.jsx)(sj,{onReturn:s})]}):(0,k.jsx)(N.xu,{textAlign:"center",pb:4,mx:2,children:(0,k.jsx)(N.xu,{ps:"20px",children:(0,k.jsx)(nU.Z,{w:"250px",fontSize:{base:"xl",sm:"2xl"},stickyIcon:!0,onClick:u,children:"Connect"})})})]})},sw=function(e){e.address;var n=e.isOpen,t=e.onClose,s=(0,w._)((0,C.useState)(null),2),r=s[0],a=s[1],i=(0,w._)((0,C.useState)("Stake Fortune"),2),o=i[0],l=i[1],c=function(){a(null),l("Stake Fortune")},u=(0,C.useCallback)(function(e,n){a((0,k.jsx)(sh,{vault:e,type:n,onReturn:c})),l("Update Stake")},[c]),d=(0,C.useCallback)(function(e){a((0,k.jsx)(sm,{vaultIndex:e,onReturn:c}))},[c]),h=(0,C.useCallback)(function(e){a((0,k.jsx)(sv,{vault:e,onReturn:c})),l("Emergency Withdraw")},[c]);return(0,k.jsx)(L.x,{isOpen:n,onClose:function(){c(),t()},title:o,isCentered:!1,utilBtnTitle:r?(0,k.jsx)(e_.R,{}):(0,k.jsx)(k.Fragment,{children:"?"}),onUtilBtnClick:function(){r?c():(a((0,k.jsx)(sr,{})),l("About Fortune Staking"))},children:r?(0,k.jsx)(k.Fragment,{children:r}):(0,k.jsx)(so,{onEditVault:u,onCreateVault:d,onWithdrawVault:h})})},sk=t(87834),sC=t.n(sk),sS=(0,C.createContext)(null),s_=(0,C.memo)(function(e){var n,t,s,r=e.nft,a=(e.canStake,e.isStaked,e.onAdd),i=e.onRemove,o=(0,ec.useRouter)(),l=(0,ey.Gd)("/collection/".concat(r.nftAddress,"/").concat(r.nftId)),c=(0,w._)((0,C.useState)(!1),2);c[0],c[1],(0,er.C)(function(e){return e.user}),(0,er.C)(function(e){return e.ryoshiStakingCart});var u=(0,em.V)(l.toString()).onCopy,d=(0,C.useContext)(sS),h=function(e){var n,t=p();t>0&&t>=(null!==(n=r.balance)&&void 0!==n?n:1)?i():a()},p=function(){return d.filter(function(e){return e.nftId===r.nftId&&(0,ey.w4)(e.nftAddress,r.nftAddress)}).length};return(0,k.jsx)(N.xu,{className:"card eb-nft__card h-100 shadow","data-group":!0,borderColor:p()>0?"#F48F0C":"inherit",borderWidth:p()>0?"3px":"1px",_hover:{borderColor:"#F48F0C"},borderRadius:"19px",children:(0,k.jsx)(N.xu,{_groupHover:{background:(0,eb.ff)("#FFFFFF","#404040"),transition:"0.3s ease"},borderRadius:"15px",transition:"0.3s ease",height:"100%",children:(0,k.jsxs)(z.k,{direction:"column",height:"100%",children:[(0,k.jsxs)("div",{className:"card-img-container position-relative",children:[(0,k.jsx)(k.Fragment,{children:p()>0?(0,k.jsx)(N.xu,{top:0,right:0,position:"absolute",zIndex:2,p:2,cursor:"pointer",onClick:i,children:r.balance&&r.balance>1?(0,k.jsx)(N.xu,{rounded:"full",bg:"dodgerblue",border:"2px solid white",w:6,h:6,textAlign:"center",fontWeight:"bold",fontSize:"sm",children:p()}):(0,k.jsx)(eh.G,{icon:ej.f8k,size:"xl",style:{background:"dodgerblue",color:"white"},className:"rounded-circle"})}):(0,k.jsx)(N.xu,{_groupHover:{display:"inline",transition:"0.3s ease",opacity:1},transition:"0.3s ease",display:"inline",opacity:0,top:0,right:0,position:"absolute",zIndex:2,p:2,cursor:"pointer",onClick:a,children:(0,k.jsx)(eh.G,{icon:ed.KtF,size:"xl",style:{background:"white",color:"grey"},className:"rounded-circle"})})}),(0,k.jsx)(N.xu,{_groupHover:{transform:"scale(1.05)",transition:"0.3s ease"},transition:"0.3s ease",transform:"scale(1.0)",cursor:"pointer",onClick:function(){return h(l.toString())},children:(0,k.jsx)(ef.yZ,{image:(0,ex.aL)(r.nftAddress,r.image),title:r.name,newTab:!0,className:"card-img-top marketplace",height:440,width:440,usePlaceholder:!0})})]}),r.rank&&"number"==typeof r.rank&&(0,k.jsxs)("div",{className:"badge bg-rarity text-wrap mt-1 mx-1",children:["Rank: #",r.rank]}),(0,k.jsx)("div",{className:"d-flex flex-column p-2 pb-1",children:(0,k.jsx)("div",{className:"card-title mt-auto",children:(0,k.jsx)("span",{onClick:function(){return h(l.toString())},style:{cursor:"pointer"},children:r.count&&r.count>0?(0,k.jsxs)(eg.X,{as:"h6",size:"sm",children:[r.name," (x",r.count,")"]}):(0,k.jsx)(eg.X,{as:"h6",size:"sm",children:r.name})})})}),(0,k.jsx)(P.L,{}),(0,k.jsx)(N.xu,{borderBottomRadius:15,p:2,children:(0,k.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,k.jsx)(P.L,{}),(0,k.jsx)(ep.ZN,{options:(t=[],(s=p())>0&&s>=(null!==(n=r.balance)&&void 0!==n?n:1)?t.push({icon:ed.Kl4,label:"Unstake",handleClick:a}):t.push({icon:ed.r8p,label:"Stake",handleClick:a}),t.push({icon:ed.sqG,label:"View Details",handleClick:function(){o.push(l)}}),t.push({icon:ed.nNP,label:"Copy link",handleClick:function(){u(),eu.Am.success("Link copied!")}}),t),children:(0,k.jsx)(eh.G,{icon:ed.cNd,style:{cursor:"pointer"},className:"my-auto"})})]})})]})})})}),sT=(0,ek.eG)(),sA=function(){var e,n=(0,w._)((0,C.useState)({loading:!1,error:null}),2),t=n[0],s=n[1],r=(0,w._)((0,eP.Z)(),2),a=(r[0],r[1]),i=(0,er.C)(function(e){return e.user});return[(e=(0,S._)(function(e,n){var r,o,l,c,u,d,h,p,f,x,m,g,y;return(0,_.__generator)(this,function(b){switch(b.label){case 0:if(!i.address)throw"User is not logged in";if(o=null===(r=(0,eH.ms)())||void 0===r?void 0:r.signature)return[3,2];return[4,a()];case 1:o=b.sent().signature,b.label=2;case 2:if(!o)return[3,12];b.label=3;case 3:b.trys.push([3,11,,12]),l=new ez.CH(sT.contracts.bank,sa,i.provider.getSigner()),c=[],u=!0,d=!1,h=void 0;try{for(p=function(){var n=x.value;e.some(function(e){return(0,ey.w4)(e.nftAddress,n.contractAddress)&&e.nftId===n.tokenId})||c.push(n)},f=n[Symbol.iterator]();!(u=(x=f.next()).done);u=!0)p()}catch(e){d=!0,h=e}finally{try{u||null==f.return||f.return()}finally{if(d)throw h}}if(m=e.filter(function(e){return!n.some(function(n){return(0,ey.w4)(e.nftAddress,n.contractAddress)&&e.nftId===n.tokenId})}),!(c.length>0))return[3,6];return[4,l.withdrawStake(c.map(function(e){return e.contractAddress}),c.map(function(e){return e.tokenId}))];case 4:return[4,b.sent().wait()];case 5:b.sent(),b.label=6;case 6:if(!(m.length>0))return[3,10];return[4,eo.s.withoutKey().ryoshiDynasties.requestBankStakeAuthorization(m,i.address,o)];case 7:return g=b.sent(),[4,l.startStake(g.data.stakeApproval,g.data.signature)];case 8:return[4,b.sent().wait()];case 9:b.sent(),b.label=10;case 10:return s((0,W._)((0,O._)({},t),{loading:!1,error:null})),[3,12];case 11:throw y=b.sent(),s((0,W._)((0,O._)({},t),{loading:!1,error:y})),y;case 12:return[2]}})}),function(n,t){return e.apply(this,arguments)}),t]},sF=t(7775),sz=t.n(sF),sN=function(){var e=(0,w._)((0,C.useState)(!1),2);e[0],e[1],(0,er.C)(function(e){return e.user});var n=(0,C.useContext)(eB).config;return(0,k.jsx)(eU.K,{spacing:3,className:sz().className,fontSize:{base:"xs",md:"sm"},children:(0,k.jsxs)(N.xu,{p:4,children:[(0,k.jsx)(I.x,{children:"Each stakeable NFT is eligible for bonus APR on top of any current APR earned from Fortune staking. Higher ranked NFTs can yield a larger APR."}),(0,k.jsxs)(eX.U,{fontSize:"sm",mt:4,children:[(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"How is the bonus APR calculated?"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsx)(eY.H,{pb:4,children:(0,k.jsx)(I.x,{children:"The APR bonus depends on the collection type and rank of the NFT. These values can either be multiplied or added. See the below FAQ items for more information specific to each collection."})})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Ryoshi VIP Information"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsxs)(I.x,{children:["Ryoshi VIP NFTs use the following rank-based ",(0,k.jsx)("strong",{children:"multipliers"}),":"]}),(0,k.jsx)(eQ.QI,{children:n.bank.staking.nft.collections.find(function(e){return"ryoshi-tales-vip"===e.slug}).multipliers.map(function(e,n){return(0,k.jsxs)(eQ.HC,{children:[e.percentile,"th percentile: x",(0,eJ.commify)(e.value),"%"]},n)})})]})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Ryoshi Halloween Information"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsxs)(I.x,{children:["Ryoshi Halloween NFTs use the following rank-based ",(0,k.jsx)("strong",{children:"adders"}),":"]}),(0,k.jsx)(eQ.QI,{children:n.bank.staking.nft.collections.find(function(e){return"ryoshi-tales-halloween"===e.slug}).adders.map(function(e,n){return(0,k.jsxs)(eQ.HC,{children:[e.percentile,"th percentile: +",(0,eJ.commify)(e.value),"%"]},n)})})]})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Ryoshi Christmas Information"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsxs)(I.x,{children:["Ryoshi Christmas NFTs use the following rank-based ",(0,k.jsx)("strong",{children:"adders"}),":"]}),(0,k.jsx)(eQ.QI,{children:n.bank.staking.nft.collections.find(function(e){return"ryoshi-tales-christmas"===e.slug}).adders.map(function(e,n){return(0,k.jsxs)(eQ.HC,{children:[e.percentile,"th percentile: +",(0,eJ.commify)(e.value),"%"]},n)})})]})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Fortune Guards Information"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsxs)(I.x,{children:["Bonus for Fortune Guards NFTs are ",(0,k.jsx)("strong",{children:"additive"})," and based on the NFT ID:"]}),(0,k.jsx)(eQ.QI,{children:n.bank.staking.nft.collections.find(function(e){return"fortune-guards"===e.slug}).ids.map(function(e,n){return(0,k.jsxs)(eQ.HC,{children:["ID ",e.id,": +",(0,eJ.commify)(e.bonus),"%"]},n)})})]})]})]})]})})},sR=(0,ek.eG)(),sI=new eF.r(sR.rpc.read),sE={ryoshiVip:"ryoshi-tales-vip",ryoshiHalloween:"ryoshi-tales-halloween",ryoshiChristmas:"ryoshi-tales-christmas",fortuneGuards:"fortune-guards"},sP=function(e){var n,t,s=e.isOpen,r=e.onClose,a=(0,er.C)(function(e){return e.user}),i=(0,ea.useQueryClient)(),o=(0,C.useContext)(eB),l=(0,w._)((0,C.useState)(sE.ryoshiVip),2),c=l[0],u=l[1],d=(0,w._)((0,C.useState)(),2),h=d[0],p=d[1],f=(0,w._)((0,C.useState)([]),2),x=f[0],m=f[1],g=(0,w._)((0,C.useState)([]),2),y=g[0],b=g[1],j=(0,w._)((0,C.useState)(),2),v=j[0],T=j[1],A=null===(n=sR.collections.find(function(e){return e.slug===c}))||void 0===n?void 0:n.address,F=function(e){return function(n){u(e)}},R=(0,ea.useQuery)({queryKey:["BankSlotUnlockContext",a.address],queryFn:(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:return[4,(e=new ez.CH(sR.contracts.seasonUnlocks,e2,sI)).unlocks(1,a.address)];case 1:return n=t.sent(),[4,e.getRecipesForType(1)];case 2:return[2,{unlocks:n,recipes:t.sent()}]}})}),refetchOnWindowFocus:!1,enabled:!!a.address,initialData:{unlocks:0,recipes:[]}}),E=R.data,P=R.refetch,H=(0,C.useCallback)(function(e){var n=y.filter(function(n){return n.nftId===e.nftId&&(0,ey.w4)(n.nftAddress,e.nftAddress)}).length,t=0===n||n<(null!==(a=e.balance)&&void 0!==a?a:1),s=y.length<E.unlocks+1,r=y.length<o.config.bank.staking.nft.maxSlots;if(t&&s&&r){var a,i,l,c,u,d=null===(i=sR.collections.find(function(n){return(0,ey.w4)(n.address,e.nftAddress)}))||void 0===i?void 0:i.slug,h=o.config.bank.staking.nft.collections.find(function(e){return e.slug===d}),p=e.rank/h.maxSupply*100,f=(null===(l=h.multipliers.sort(function(e,n){return e.percentile-n.percentile}).find(function(e){return p<=e.percentile}))||void 0===l?void 0:l.value)||0,x=(null===(c=h.adders.sort(function(e,n){return e.percentile-n.percentile}).find(function(e){return p<=e.percentile}))||void 0===c?void 0:c.value)||0,m=(null===(u=h.ids.find(function(n){return n.id.toString()===e.nftId}))||void 0===u?void 0:u.bonus)||0;b((0,D._)(y).concat([{nftAddress:e.nftAddress,nftId:e.nftId,image:e.image,rank:e.rank,multiplier:f+1,adder:x+m,isAlreadyStaked:!1}]))}},[y,E]),M=(0,C.useCallback)(function(e,n){b(y.filter(function(t){return t.nftId!==n||!(0,ey.w4)(t.nftAddress,e)}))},[y]),B=(0,C.useCallback)(function(){i.invalidateQueries(["BankStakedNfts",a.address]),i.invalidateQueries(["BankUnstakedNfts",a.address,h]),i.setQueryData(["BankUnstakedNfts",a.address,h],function(e){return e?(e.pages=e.pages.map(function(e){return e.data=e.data.filter(function(e){return!y.some(function(n){return n.nftId===e.nftId&&(0,ey.w4)(n.nftAddress,e.nftAddress)})}),e}),e):[]}),m((0,D._)(x).concat((0,D._)(y.map(function(e){return{amount:"1",contractAddress:e.nftAddress,id:"",tokenId:e.nftId,type:eD.hu.BANK,user:a.address}})))),b((0,D._)(y.map(function(e){return(0,W._)((0,O._)({},e),{isAlreadyStaked:!0})})))},[i,x,y,a.address]);return(0,C.useEffect)(function(){if(s){var e;i.fetchQuery(["BankStakedNfts",a.address],function(){return eo.s.withoutKey().ryoshiDynasties.getStakedTokens(a.address,eD.hu.BANK)}).then((e=(0,S._)(function(e){var n,t,s,r,a,i,l,c;return(0,_.__generator)(this,function(u){switch(u.label){case 0:m(e),n=[],t=!0,s=!1,r=void 0,u.label=1;case 1:u.trys.push([1,6,7,8]),a=function(){var e,t,s,r,a,i,c,u,d,h;return(0,_.__generator)(this,function(p){switch(p.label){case 0:return e=l.value,[4,(0,eW.y)(e.contractAddress,e.tokenId)];case 1:return(t=p.sent())&&(i=o.config.bank.staking.nft.collections.find(function(e){return(0,ey.w4)(e.address,t.collection.address)}),c=t.nft.rank/i.maxSupply*100,u=(null===(s=i.multipliers.sort(function(e,n){return e.percentile-n.percentile}).find(function(e){return c<=e.percentile}))||void 0===s?void 0:s.value)||0,d=(null===(r=i.adders.sort(function(e,n){return e.percentile-n.percentile}).find(function(e){return c<=e.percentile}))||void 0===r?void 0:r.value)||0,h=(null===(a=i.ids.find(function(e){return e.id.toString()===t.nft.nftId}))||void 0===a?void 0:a.bonus)||0,n.push({nftAddress:e.contractAddress,nftId:e.tokenId,image:t.nft.image,rank:t.nft.rank,multiplier:u+1,adder:d+h,isAlreadyStaked:!0})),[2]}})},i=e[Symbol.iterator](),u.label=2;case 2:if(t=(l=i.next()).done)return[3,5];return[5,(0,_.__values)(a())];case 3:u.sent(),u.label=4;case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return c=u.sent(),s=!0,r=c,[3,8];case 7:try{t||null==i.return||i.return()}finally{if(s)throw r}return[7];case 8:return b(n),[2]}})}),function(n){return e.apply(this,arguments)}))}},[s]),(0,C.useEffect)(function(){p(A)},[c]),(0,C.useEffect)(function(){a.address||r()},[a.address]),(0,k.jsx)(L.x,{isOpen:s,onClose:function(){b([]),m([]),p(A),u(sE.ryoshiVip),r()},title:"Stake NFTs",size:"5xl",isCentered:!1,utilBtnTitle:v?(0,k.jsx)(e_.R,{}):(0,k.jsx)(k.Fragment,{children:"?"}),onUtilBtnClick:function(){v?T(void 0):T("faq")},children:"faq"===v?(0,k.jsx)(sN,{}):(0,k.jsxs)(sS.Provider,{value:y,children:[(0,k.jsx)(I.x,{align:"center",p:2,children:"Ryoshi Tales NFTs can be staked to boost rewards for staked $Fortune. Receive larger boosts by staking higher ranked NFTs."}),(0,k.jsx)(sH,{pendingNfts:y,stakedNfts:x,onRemove:M,onStaked:B,slotUnlockContext:E,refetchSlotUnlockContext:P}),(0,k.jsxs)(N.xu,{p:4,children:[(0,k.jsx)(z.k,{direction:"row",justify:"center",mb:2,children:(0,k.jsxs)(Z.M,{columns:{base:2,sm:4},children:[(0,k.jsx)(eA.Z,{isActive:c===sE.ryoshiVip,onClick:F(sE.ryoshiVip),children:"VIP"}),(0,k.jsx)(eA.Z,{isActive:c===sE.fortuneGuards,onClick:F(sE.fortuneGuards),children:"Guards"}),(0,k.jsx)(eA.Z,{isActive:c===sE.ryoshiHalloween,onClick:F(sE.ryoshiHalloween),children:"Halloween"}),(0,k.jsx)(eA.Z,{isActive:c===sE.ryoshiChristmas,onClick:F(sE.ryoshiChristmas),children:"Christmas"})]})}),(0,k.jsx)(N.xu,{children:(0,k.jsx)(sM,{isReady:s,collection:h,address:null!==(t=a.address)&&void 0!==t?t:void 0,onAdd:H,onRemove:M})})]})]})})},sH=function(e){var n,t=e.pendingNfts,s=e.stakedNfts,r=e.onRemove,a=e.onStaked,i=e.slotUnlockContext,o=e.refetchSlotUnlockContext,l=(0,er.C)(function(e){return e.user}),c=(0,w._)((0,C.useState)(!1),2),u=c[0],d=c[1],h=(0,w._)((0,C.useState)(""),2),p=h[0],f=h[1],x=(0,w._)(sA(),2),m=x[0];x[1];var g=(0,w._)((0,C.useState)([eN.O$.from(0),!1]),2),y=g[0],b=g[1],j=(0,w._)((0,C.useState)(),2),v=j[0],T=j[1],A=(0,C.useCallback)((0,S._)(function(){var e,n,r,i,o,c,u,h,p,x,g;return(0,_.__generator)(this,function(y){switch(y.label){case 0:if(0===t.length&&0===s.length)return[2];e=!1,y.label=1;case 1:y.trys.push([1,13,14,15]),d(!0),f("Approving"),n=[],r=!0,i=!1,o=void 0,y.label=2;case 2:y.trys.push([2,9,10,11]),c=t[Symbol.iterator](),y.label=3;case 3:if(r=(u=c.next()).done)return[3,8];if(h=u.value,n.includes(h.nftAddress))return[3,7];return[4,(p=new ez.CH(h.nftAddress,eI._k,l.provider.getSigner())).isApprovedForAll(l.address.toLowerCase(),sR.contracts.bank)];case 4:if(y.sent())return[3,7];return[4,p.setApprovalForAll(sR.contracts.bank,!0)];case 5:return[4,y.sent().wait()];case 6:y.sent(),n.push(h.nftAddress),y.label=7;case 7:return r=!0,[3,3];case 8:return[3,11];case 9:return x=y.sent(),i=!0,o=x,[3,11];case 10:try{r||null==c.return||c.return()}finally{if(i)throw o}return[7];case 11:return e=!0,f("Staking"),[4,m(t.map(function(e){return(0,W._)((0,O._)({},e),{amount:1})}),s)];case 12:return y.sent(),a(),eu.Am.success("Staking successful!"),[3,15];case 13:return console.log(g=y.sent()),e?eu.Am.error((0,e1.O)(g)):eu.Am.error("Approval failed. Please try again."),[3,15];case 14:return d(!1),f(""),[7];case 15:return[2]}})}),[t,p,u]),F=(n=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:return[4,new ez.CH(sR.contracts.fortune,e0,sI).allowance(null===(e=l.address)||void 0===e?void 0:e.toLowerCase(),sR.contracts.seasonUnlocks)];case 1:return n=t.sent(),[4,new ez.CH(sR.contracts.resources,eI.qZ,sI).isApprovedForAll(l.address,sR.contracts.seasonUnlocks)];case 2:return b([n,t.sent()]),[2]}})}),function(){return n.apply(this,arguments)});return(0,C.useEffect)(function(){T(void 0),l.address&&F()},[l.address]),(0,k.jsxs)(N.xu,{children:[(0,k.jsxs)(E.g,{my:6,px:4,spacing:8,children:[(0,k.jsx)(Z.M,{columns:{base:2,sm:3,md:5},gap:2,children:(0,D._)([,,,,,].fill(0)).map(function(e,n){var s;return(0,k.jsx)(N.xu,{w:"120px",children:t[n]?(0,k.jsxs)(N.xu,{position:"relative",children:[(0,k.jsxs)(N.xu,{bg:"#376dcf",p:2,rounded:"xl",border:"2px dashed",borderColor:t[n].isAlreadyStaked?"transparent":"#ffa71c",children:[(0,k.jsx)(N.xu,{width:100,height:100,children:(0,k.jsx)(U.E,{src:eC.Z.translate(t[n].image).fixedWidth(100,100),rounded:"lg"})}),(0,k.jsxs)(z.k,{fontSize:"xs",justify:"space-between",mt:1,children:[(0,k.jsx)(N.xu,{verticalAlign:"top",children:t[n].rank&&(0,k.jsxs)(X.U,{spacing:1,children:[(0,k.jsx)(q.J,{as:eh.G,icon:ed.O7Q}),(0,k.jsx)(N.xu,{as:"span",children:null!==(s=t[n].rank)&&void 0!==s?s:""})]})}),(0,k.jsxs)(E.g,{align:"end",spacing:0,fontWeight:"bold",children:[t[n].multiplier&&(0,k.jsxs)(N.xu,{children:["x ",t[n].multiplier,"%"]}),t[n].adder&&(0,k.jsxs)(N.xu,{children:["+ ",t[n].adder,"%"]})]})]})]}),(0,k.jsx)(N.xu,{position:"absolute",top:0,right:0,pe:"3px",children:(0,k.jsx)(G.h,{icon:(0,k.jsx)(eT.T,{boxSize:2}),"aria-label":"Remove",bg:"gray.800",_hover:{bg:"gray.600"},size:"xs",rounded:"full",onClick:function(){return r(t[n].nftAddress,t[n].nftId)}})})]}):(0,k.jsx)(N.xu,{position:"relative",overflow:"hidden",children:(0,k.jsx)(N.xu,{p:2,rounded:"xl",cursor:"pointer",children:(0,k.jsxs)(N.xu,{width:100,height:100,bgColor:"#716A67",rounded:"xl",position:"relative",children:[(0,k.jsx)(eS,{boxSize:"100%",fill:"#B1ADAC"}),n>i.unlocks&&(0,k.jsx)(z.k,{position:"absolute",top:0,left:0,w:100,h:100,fontSize:"sm",bg:"#333333DD",rounded:"xl",justify:"center",fontWeight:"semibold",textAlign:"center",onClick:function(){return T(n)},children:(0,k.jsx)(H.M,{children:v===n?(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/unlock.png").convert(),alt:"unlockIcon",boxSize:12}):(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/lock.png").convert(),alt:"lockIcon",boxSize:12})})})]})})})},n)})}),(0,k.jsx)(N.xu,{ms:8,my:{base:4,md:"auto"},textAlign:"center",children:(0,k.jsx)(L.t,{minW:"150px",onClick:A,isLoading:u,disabled:u,stickyIcon:!0,loadingText:p,children:"Save"})})]}),void 0!==v&&i.recipes.length>0&&(0,k.jsx)(sL,{isOpen:!0,onClose:function(){T(void 0),o()},initialApprovalState:y,slotUnlockContext:i})]})},sM=function(e){var n=e.isReady,t=e.address,s=e.collection,r=e.onAdd,a=e.onRemove,i=(0,ea.useInfiniteQuery)(["BankUnstakedNfts",t,s],function(){return ei.Z.getWallet(t,{collection:[s],sortBy:"rank",direction:"asc"})},{getNextPageParam:function(e,n){return n[n.length-1].hasNextPage?n.length+1:void 0},refetchOnWindowFocus:!1,enabled:!!t&&n&&!!s}),o=i.data,l=i.status,c=i.error,u=i.fetchNextPage,d=i.hasNextPage;return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(el.Z,{dataLength:(null==o?void 0:o.pages)?o.pages.flat().length:0,next:u,hasMore:null!=d&&d,style:{overflow:"hidden"},loader:(0,k.jsx)(H.M,{children:(0,k.jsx)(K.$,{})}),children:"loading"===l?(0,k.jsx)(H.M,{children:(0,k.jsx)(K.$,{})}):"error"===l?(0,k.jsxs)("p",{children:["Error: ",c.message]}):(null==o?void 0:o.pages.map(function(e){return e.data}).flat().length)>0?(0,k.jsx)(Z.M,{columns:{base:2,sm:3,md:4},gap:3,children:o.pages.map(function(e,n){return(0,k.jsx)(C.Fragment,{children:e.data.map(function(e,n){return(0,k.jsx)(s_,{nft:e,onAdd:function(){return r(e)},onRemove:function(){return a(e.nftAddress,e.nftId)}},e.name)})},n)})}):(0,k.jsx)(N.xu,{textAlign:"center",mt:8,children:(0,k.jsx)(I.x,{children:"No NFTs available"})})})})},sL=function(e){var n,t,s,r=e.isOpen,a=e.onClose,i=e.initialApprovalState,o=e.slotUnlockContext,l=(0,er.C)(function(e){return e.user}),c=(0,w._)((0,C.useState)(!1),2),u=c[0],d=c[1],h=(0,w._)((0,C.useState)(!1),2),p=h[0],f=h[1],x=(0,w._)((0,C.useState)(!1),2),m=x[0],g=x[1],y=(0,w._)((0,C.useState)(i),2),b=y[0],j=y[1],v=o.recipes[o.unlocks];(0,C.useEffect)(function(){j(i)},[i]);var T=(n=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,6,7]),g(!0),[4,new ez.CH(sR.contracts.fortune,e0,l.provider.getSigner()).allowance(null===(e=l.address)||void 0===e?void 0:e.toLowerCase(),sR.contracts.seasonUnlocks)];case 1:if(t.sent().lt(v.fortuneAmount))throw Error("Not enough Fortune.");return[4,new ez.CH(sR.contracts.resources,eI.qZ,sI).balanceOf(l.address,1)];case 2:if(t.sent().lt(v.resourcesAmounts[0]))throw Error("Not enough Koban.");return[4,new ez.CH(sR.contracts.seasonUnlocks,e2,l.provider.getSigner()).unlock(1,o.unlocks)];case 3:return[4,t.sent().wait()];case 4:return t.sent(),eu.Am.success("Slot has been unlocked!"),a(),[3,7];case 5:return console.log(n=t.sent()),eu.Am.error((0,e1.O)(n)),[3,7];case 6:return d(!1),f(!1),g(!1),[7];case 7:return[2]}})}),function(){return n.apply(this,arguments)}),A=(t=(0,S._)(function(){var e,n,t,s,r;return(0,_.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,6,7]),d(!0),[4,new ez.CH(sR.contracts.fortune,e0,l.provider.getSigner()).allowance(null===(e=l.address)||void 0===e?void 0:e.toLowerCase(),sR.contracts.seasonUnlocks)];case 1:if(n=a.sent(),t=eR.parseEther("10000"),s=eR.parseEther("5000"),!n.lt(s))return[3,4];return[4,new ez.CH(sR.contracts.fortune,e0,l.provider.getSigner()).approve(sR.contracts.seasonUnlocks,t)];case 2:return[4,a.sent().wait()];case 3:a.sent(),j([t,b[1]]),a.label=4;case 4:return eu.Am.success("Fortune has been enabled!"),[3,7];case 5:return console.log(r=a.sent()),eu.Am.error((0,e1.O)(r)),[3,7];case 6:return d(!1),[7];case 7:return[2]}})}),function(){return t.apply(this,arguments)}),F=(s=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,6,7]),f(!0),[4,(e=new ez.CH(sR.contracts.resources,eI.qZ,l.provider.getSigner())).isApprovedForAll(l.address,sR.contracts.seasonUnlocks)];case 1:if(t.sent())return[3,4];return[4,e.setApprovalForAll(sR.contracts.seasonUnlocks,!0)];case 2:return[4,t.sent().wait()];case 3:t.sent(),j([b[0],!0]),t.label=4;case 4:return eu.Am.success("Koban has been enabled!"),[3,7];case 5:return console.log(n=t.sent()),eu.Am.error((0,e1.O)(n)),[3,7];case 6:return f(!1),[7];case 7:return[2]}})}),function(){return s.apply(this,arguments)});return(0,k.jsxs)(Y.u_,{isOpen:r,isCentered:!0,onClose:a,size:"lg",children:[(0,k.jsx)(Q.Z,{}),(0,k.jsxs)(J.h,{border:"2px solid #CCC",bg:"#292626",color:"white",className:sC().className,children:[(0,k.jsx)($.x,{children:(0,k.jsx)(H.M,{children:(0,k.jsx)(X.U,{children:(0,k.jsx)(I.x,{children:"Unlock Staking Slots"})})})}),(0,k.jsx)(ee.o,{}),(0,k.jsxs)(en.f,{color:"white",children:[(0,k.jsx)(I.x,{children:"Unlock staking slots to allow additional NFTs to earn more APR in the bank."}),(0,k.jsxs)(N.xu,{bg:"#453e3b",rounded:"lg",p:2,mt:4,children:[(0,k.jsx)(I.x,{textAlign:"center",mb:4,children:"Current slot cost"}),(0,k.jsxs)(Z.M,{columns:2,children:[(0,k.jsxs)(E.g,{spacing:0,children:[(0,k.jsxs)(X.U,{children:[(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/fortune.svg").convert(),alt:"fortuneIcon",boxSize:6}),(0,k.jsx)(I.x,{fontWeight:"bold",fontSize:"lg",children:eR.formatEther(v.fortuneAmount)})]}),(0,k.jsx)(N.xu,{fontSize:"sm",children:"Fortune"})]}),(0,k.jsxs)(E.g,{spacing:0,children:[(0,k.jsxs)(X.U,{children:[(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/koban.png").convert(),alt:"kobanIcon",boxSize:6}),(0,k.jsx)(I.x,{fontWeight:"bold",fontSize:"lg",children:v.resourcesAmounts[0].toString()})]}),(0,k.jsx)(N.xu,{fontSize:"sm",children:"Koban"})]})]})]})]}),(0,k.jsx)(et.m,{children:(0,k.jsxs)(E.g,{w:"full",children:[(0,k.jsxs)(es.h,{spacing:2,width:"full",children:[b[0].lt(eR.parseEther("5000"))&&(0,k.jsx)(R.z,{size:"md",isLoading:u,isDisabled:u||p||m,onClick:A,variant:"ryoshiDynasties",flex:1,children:"Enable FRTN"}),!b[1]&&(0,k.jsx)(R.z,{size:"md",isLoading:p,isDisabled:u||p||m,onClick:F,variant:"ryoshiDynasties",flex:1,children:"Enable Koban"})]}),(0,k.jsx)(R.z,{w:"full",size:"md",isLoading:m,isDisabled:m||!b[0].gte(eR.parseEther("5000"))||!b[1],onClick:T,variant:"ryoshiDynasties",children:"Unlock"})]})})]})]})},sO=t(55637),sW=t(28279),sD=t(9279),sB=t(43058),sV=JSON.parse('[{"inputs":[{"internalType":"address","name":"beneficiaryAddress","type":"address"},{"internalType":"uint64","name":"startTimestamp","type":"uint64"},{"internalType":"uint64","name":"durationSeconds","type":"uint64"}],"stateMutability":"payable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"token","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"ERC20Released","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"EtherReleased","type":"event"},{"inputs":[],"name":"beneficiary","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"duration","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"name":"releasable","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"name":"release","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"name":"released","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"start","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint64","name":"timestamp","type":"uint64"}],"name":"vestedAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]'),sZ=function(e){var n,t=e.current,s=e.max,r=(e.potential,e.useGrid),a=void 0===r||r,i=e.segments,o=void 0===i?8:i,l=e.fillColor,c=(0,w._)((0,C.useState)(0),2),u=c[0],d=c[1],h=(0,C.useRef)(null),p=(0,w._)((0,C.useState)(0),2),f=p[0],x=p[1],m=(0,sO.i)(),g=o-1>0,y=(n=(0,S._)(function(){var e,n,r;return(0,_.__generator)(this,function(a){return d(n=t/s*100),x((n>0?n:1)/100*(null!==(r=null===(e=h.current)||void 0===e?void 0:e.offsetWidth)&&void 0!==r?r:0)-5),[2]})}),function(){return n.apply(this,arguments)});return(0,C.useEffect)(function(){function e(){return(e=(0,S._)(function(){return(0,_.__generator)(this,function(e){switch(e.label){case 0:return[4,y()];case 1:return e.sent(),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t,m.width]),(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(N.xu,{h:"30px",position:"relative",children:[(0,k.jsx)(t_.E,{ref:h,value:u,bg:"#272523",h:"30px",sx:{"& > div":{background:null!=l?l:"linear-gradient(to left, #2ec2e5, #0087d3)",boxShadow:"12px 0 15px -4px rgba(31, 73, 125, 0.8), -12px 0 8px -4px rgba(31, 73, 125, 0.8)"}}}),!l&&(0,k.jsx)(U.E,{position:"absolute",src:"/img/battle-bay/bankinterior/progress_bar_spark.png",top:0,h:"30px",left:f,zIndex:0}),(0,k.jsxs)(Z.M,{columns:g?o:2,position:"absolute",top:0,left:0,h:"full",w:"full",children:[(0,k.jsx)(N.xu,{borderColor:"#FDAB1A",borderStyle:"solid",borderTopWidth:"4px",borderEndWidth:a&&g?"1px":"0px",borderBottomWidth:"4px",borderStartWidth:"4px"}),g&&(0,D._)(Array(o-2).fill(0)).map(function(e,n){return(0,k.jsx)(N.xu,{borderColor:"#FDAB1A",borderStyle:"solid",borderTopWidth:"4px",borderEndWidth:a?"1px":"0px",borderBottomWidth:"4px",borderStartWidth:a?"1px":"0px"},n)}),(0,k.jsx)(N.xu,{borderColor:"#FDAB1A",borderStyle:"solid",borderTopWidth:"4px",borderEndWidth:"4px",borderBottomWidth:"4px",borderStartWidth:a&&g?"1px":"0px"})]})]})})},sU=t(41664),sX=t.n(sU),sq=(0,ek.eG)(),sG=new eF.r(sq.rpc.read),sK=function(){var e,n=(0,er.C)(function(e){return e.user}),t=(0,C.useContext)(eB).config,s=(0,w._)((0,C.useState)(!1),2),r=s[0],a=s[1],i=(0,w._)((0,C.useState)(!1),2),o=i[0],l=i[1],c=(0,w._)((0,C.useState)(!1),2),u=c[0],d=c[1],h=(0,ea.useQuery)({queryKey:["PresaleVault"],queryFn:(0,S._)(function(){var e,t,s,r,a,i,o,l,c,u,d,h,p,f,x;return(0,_.__generator)(this,function(m){switch(m.label){case 0:return[4,eo.s.withoutKey().ryoshiDynasties.userTotalPurchased(n.address)];case 1:return t=(e=m.sent())>0,[4,(s=new ez.CH(sq.contracts.presaleVaults,sB,sG)).startTime()];case 2:return r=Number.apply(void 0,[m.sent()])>0,[4,s.vaults(n.address)];case 3:if(a=m.sent(),i={hasVault:!1,hasStarted:r,vault:{address:null,balance:0,releasable:0,released:0,completionDate:0,start:0,duration:0},vaultAddress:null,vaultBalance:0,vestedAmount:0,isPresaleParticipant:t,totalPresaleBalance:e},!(a!==sD.d))return[3,10];return[4,s.vaults(n.address)];case 4:return o=m.sent(),[4,(l=new ez.CH(o,sV,sG)).releasable(sq.contracts.fortune)];case 5:return c=m.sent(),[4,l.released(sq.contracts.fortune)];case 6:return u=m.sent(),[4,l.start()];case 7:return d=m.sent(),[4,l.duration()];case 8:return h=m.sent(),[4,new ez.CH(sq.contracts.fortune,eI.ah,sG).balanceOf(o)];case 9:p=m.sent(),i=(0,W._)((0,O._)({},i),{hasVault:!0,vault:{address:o,balance:Number(eR.formatEther(p)),releasable:Number(eR.formatEther(c)),released:Number(eR.formatEther(u)),completionDate:(Number(d)+Number(h))*1e3,start:Number(1e3*d),duration:Number(1e3*h)}}),m.label=10;case 10:return f=sq.collections.find(function(e){return"fortuneteller"===e.slug}),[4,eo.s.withoutKey().getWallet(n.address,{collection:[f.address]})];case 11:return x=m.sent(),[2,(0,W._)((0,O._)({},i),{fortuneTellers:x.data.sort(function(e,n){return Number(n.nftId)-Number(e.nftId)})})]}})}),enabled:!!n.address,refetchOnWindowFocus:!1}),p=h.data,f=h.status,x=h.error,m=h.refetch,g=(e=(0,S._)(function(){var e,t;return(0,_.__generator)(this,function(s){switch(s.label){case 0:return e=sq.collections.find(function(e){return"fortuneteller"===e.slug}),[4,(t=new ez.CH(e.address,eI.qZ,n.provider.getSigner())).isApprovedForAll(sq.contracts.presaleVaults,n.address)];case 1:if(s.sent())return[3,4];return[4,t.setApprovalForAll(sq.contracts.presaleVaults,!0)];case 2:return[4,s.sent().wait()];case 3:s.sent(),s.label=4;case 4:return[2]}})}),function(){return e.apply(this,arguments)}),y=(0,C.useCallback)((0,S._)(function(){var e,t;return(0,_.__generator)(this,function(s){switch(s.label){case 0:a(!0),s.label=1;case 1:return s.trys.push([1,5,6,7]),[4,n.contractService.ryoshiPresaleVaults.createVault()];case 2:return[4,s.sent().wait()];case 3:return e=s.sent(),eu.Am.success((0,ey.aS)(e.transactionHash)),[4,m()];case 4:return s.sent(),[3,7];case 5:return console.log(t=s.sent()),eu.Am.error(t),[3,7];case 6:return a(!1),[7];case 7:return[2]}})}),[n]),b=(0,C.useCallback)((0,S._)(function(){var e,t,s,r,a;return(0,_.__generator)(this,function(i){switch(i.label){case 0:l(!0),i.label=1;case 1:return i.trys.push([1,5,6,7]),[4,g()];case 2:return i.sent(),s=p.fortuneTellers.map(function(e){return[Number(e.nftId),e.balance]}),[4,n.contractService.ryoshiPresaleVaults.claimBonus(null===(e=s)||void 0===e?void 0:e.map(function(e){return e[0]}),null===(t=s)||void 0===t?void 0:t.map(function(e){return e[1]}))];case 3:return[4,i.sent().wait()];case 4:return r=i.sent(),eu.Am.success((0,ey.aS)(r.transactionHash)),m(),[3,7];case 5:return console.log(a=i.sent()),eu.Am.error(a),[3,7];case 6:return l(!1),[7];case 7:return[2]}})}),[n,p]),j=(0,C.useCallback)((0,S._)(function(){var e,t;return(0,_.__generator)(this,function(s){switch(s.label){case 0:d(!0),s.label=1;case 1:return s.trys.push([1,4,5,6]),[4,new ez.CH(p.vault.address,sV,n.provider.getSigner()).release(sq.contracts.fortune)];case 2:return[4,s.sent().wait()];case 3:return e=s.sent(),eu.Am.success((0,ey.aS)(e.transactionHash)),m(),[3,6];case 4:return console.log(t=s.sent()),eu.Am.error(t),[3,6];case 5:return d(!1),[7];case 6:return[2]}})}),[n,p]);return(0,k.jsxs)(N.xu,{children:[(0,k.jsx)(tP.Zk,{children:(0,k.jsx)(N.xu,{textAlign:"center",children:"Users who participated in the Fortune Token Presale can now begin vesting their tokens. Those also holding Fortune Teller NFTs can exchange them for bonus Fortune tokens and Fortune Guards."})}),"loading"===f?(0,k.jsx)(H.M,{mt:2,children:(0,k.jsx)(K.$,{})}):"error"===f?(0,k.jsx)(N.xu,{textAlign:"center",mt:2,children:x.message}):!!p&&(0,k.jsx)(k.Fragment,{children:p.hasStarted?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(tP.Zk,{mt:2,children:[(0,k.jsx)(I.x,{fontWeight:"bold",fontSize:"lg",mb:4,children:"Vesting Vault"}),(0,k.jsx)(I.x,{children:"Fortune tokens in the vault will be vested linearly over a 9 month period (approximately 3 seasons)."}),p.hasVault?(0,k.jsxs)(N.xu,{mt:4,children:[(0,k.jsx)(N.xu,{mt:2,children:(0,k.jsxs)(eU.K,{direction:{base:"column",sm:"row"},justify:"space-between",children:[(0,k.jsxs)(N.xu,{children:[(0,k.jsx)(I.x,{fontSize:"xs",color:"#aaa",children:"To Claim"}),(0,k.jsxs)(X.U,{children:[(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/fortune.svg").convert(),alt:"fortuneIcon",boxSize:6}),(0,k.jsx)(I.x,{fontSize:"lg",fontWeight:"bold",children:(0,ey.NM)(p.vault.releasable,4)})]})]}),(0,k.jsx)(nU.Z,{size:"sm",isLoading:u,isDisabled:u,onClick:j,loadingText:"Claiming",children:"Claim"})]})}),(0,k.jsxs)(N.xu,{mt:4,children:[(0,k.jsxs)(z.k,{justify:"space-between",children:[(0,k.jsx)(N.xu,{children:"0"}),(0,k.jsxs)(N.xu,{children:["Vested: ",(0,eJ.commify)((0,ey.NM)(p.vault.releasable+p.vault.released))," / ",(0,eJ.commify)((0,ey.NM)(p.vault.balance+p.vault.released))]})]}),(0,k.jsx)(sZ,{current:Date.now()-p.vault.start,max:p.vault.duration}),(0,k.jsxs)(z.k,{justify:"space-between",children:[(0,k.jsx)(P.L,{}),(0,k.jsxs)(N.xu,{children:["Completes: ",tx()(p.vault.completionDate).format("D MMM yyyy")]})]})]})]}):(0,k.jsx)(N.xu,{children:p.isPresaleParticipant?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(I.x,{children:["Your total presale balance is ",(0,k.jsx)("strong",{children:(0,eJ.commify)(p.totalPresaleBalance)}),". Create a vault now to begin vesting your Fortune tokens. Fortune rewards gained from trading in Fortune Tellers will also begin vesting here."]}),(0,k.jsx)(N.xu,{textAlign:"end",mt:2,children:(0,k.jsx)(nU.Z,{hoverIcon:!1,onClick:y,isLoading:r,isDisabled:r,loadingText:"Creating",children:"Create Vault"})})]}):p.fortuneTellers.length>0?(0,k.jsx)(I.x,{children:"You did not participate in the presale. However, you can still trade-in your Fortune Tellers in exchange for bonus Fortune tokens and Fortune Guards."}):(0,k.jsx)(I.x,{children:"You did not participate in the presale."})})]}),(p.hasVault||!p.isPresaleParticipant)&&(0,k.jsxs)(tP.Zk,{mt:2,children:[(0,k.jsx)(I.x,{fontWeight:"bold",fontSize:"lg",mb:4,children:"Fortune Teller Bonus"}),(0,k.jsx)(I.x,{children:"Exchange your Fortune Tellers to receive bonus Fortune tokens and Fortune Guards. These Fortune Guards are the key to minting Heroes."}),(0,k.jsx)(I.x,{mt:2,children:"Exchanged Fortune Tellers will be returned after 90 days."}),p.fortuneTellers&&p.fortuneTellers.length>0?(0,k.jsxs)(N.xu,{mt:2,children:[(0,k.jsx)(N.xu,{my:4,children:(0,k.jsx)("hr",{})}),(0,k.jsxs)(eU.K,{justify:"space-between",direction:{base:"column",sm:"row"},children:[(0,k.jsx)(N.xu,{mx:{base:"auto",sm:"inherit"},w:"full",maxW:"180px",children:(0,k.jsx)(ef.yZ,{image:eC.Z.gif(p.fortuneTellers[0].image).fixedWidth(180,180),title:p.fortuneTellers[0].name})}),(0,k.jsx)(N.xu,{children:(0,k.jsxs)(Z.M,{templateColumns:"1fr max-content",gap:2,alignItems:"baseline",children:[(0,k.jsx)(N.xu,{fontWeight:"bold",textAlign:"end",children:"Teller"}),(0,k.jsx)(N.xu,{fontWeight:"bold",textAlign:"end",children:"Bonus"}),p.fortuneTellers.map(function(e){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(N.xu,{textAlign:"end",children:[e.name," (x",e.balance,"):"]}),(0,k.jsx)(N.xu,{textAlign:"end",children:(0,eJ.commify)(e.balance*t.presale.bonus[Number(e.nftId)-1])})]})}),(0,k.jsx)(N.xu,{textAlign:"end",children:"Total:"}),(0,k.jsx)(N.xu,{textAlign:"end",fontWeight:"bold",fontSize:"lg",children:(0,eJ.commify)(p.fortuneTellers.reduce(function(e,n){return e+n.balance*t.presale.bonus[Number(n.nftId)-1]},0))})]})})]}),p.fortuneTellers.find(function(e){return"3"===e.nftId})&&(0,k.jsxs)(tl.b,{status:"warning",my:2,children:[(0,k.jsx)(tc.z,{}),'*Note that Cedric "Ceddy" Biscuitworth is only eligible for the Fortune rewards.']}),(0,k.jsx)(N.xu,{textAlign:"end",mt:2,children:(0,k.jsx)(nU.Z,{size:"md",hoverIcon:!1,isLoading:o,isDisabled:o,onClick:b,loadingText:"Exchanging",children:"Exchange"})})]}):(0,k.jsxs)(N.xu,{mt:4,children:["No Fortune Tellers in wallet. Pick some up in the ",(0,k.jsx)(sX(),{href:"/collection/fortuneteller",style:{color:"#F48F0C",fontWeight:"bold"},children:"marketplace"}),"."]})]})]}):(0,k.jsx)(tP.Zk,{mt:2,textAlign:"center",children:"Vesting wallets will be starting soon."})})]})},sY=t(27465),sQ=(0,ek.eG)(),sJ=function(e){var n,t=e.reward,s=e.burnMalus,r=function(e){var n=e.split(".");return 2===n.length&&n[1].length>13&&(n[1]=n[1].substring(0,13),e=n.join(".")),Number(e)},a=(0,C.useContext)(eB).game,i=(0,er.C)(function(e){return e.user}),o=(0,w._)((0,eP.Z)(),2),l=(o[0],o[1]),c=(0,w._)((0,C.useState)(!1),2),u=c[0],d=c[1],h=(0,F.q)(),p=h.isOpen,f=h.onOpen,x=h.onClose,m=(0,sY.$S)(sQ.chain.id),g=m.data;m.isLoading;var y=(null==a?void 0:a.season.blockId)===t.blockId,b=(n=(0,S._)(function(e,n){var t,s,a,o,c;return(0,_.__generator)(this,function(u){switch(u.label){case 0:if(u.trys.push([0,7,8,9]),d(!0),x(),s=r(e),a=null===(t=(0,eH.ms)())||void 0===t?void 0:t.signature)return[3,2];return[4,l()];case 1:a=u.sent().signature,u.label=2;case 2:if(!a)return[3,6];return[4,eo.s.withoutKey().ryoshiDynasties.requestSeasonalRewardsClaimAuthorization(i.address,s,n,a)];case 3:return c=u.sent(),[4,null===(o=i.contractService)||void 0===o?void 0:o.ryoshiPlatformRewards.withdraw(c.data.reward,c.data.signature)];case 4:return[4,u.sent().wait()];case 5:u.sent(),u.label=6;case 6:return eu.Am.success("Withdraw success!"),[3,9];case 7:return console.log(u.sent()),[3,9];case 8:return d(!1),[7];case 9:return[2]}})}),function(e,t){return n.apply(this,arguments)});return(0,k.jsxs)(z.k,{justify:"space-between",mt:2,children:[(0,k.jsxs)(E.g,{align:"start",spacing:0,children:[(0,k.jsx)(I.x,{fontSize:"xl",fontWeight:"bold",children:y?"Current Season":"Season ".concat(t.blockId)}),(0,k.jsxs)(X.U,{children:[(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/fortune.svg").convert(),alt:"fortuneIcon",boxSize:6}),(0,k.jsx)(I.x,{fontSize:"lg",fontWeight:"bold",children:(0,ey.NM)(r(t.currentRewards),3)}),(0,k.jsxs)(I.x,{as:"span",ms:1,fontSize:"sm",color:"#aaa",children:["~$",(0,ey.NM)((g?Number(g.usdPrice):0)*t.currentRewards,2)]})]}),(0,k.jsxs)(I.x,{fontSize:"sm",color:"#aaa",children:[(0,ey.NM)(t.aprRewards,3)," staking + ",(0,ey.NM)(t.listingRewards,3)," listing rewards"]})]}),(0,k.jsxs)(z.k,{direction:"column",children:[(0,k.jsx)(P.L,{}),(0,k.jsx)(nU.Z,{size:"sm",onClick:function(){return y?f():b(t.currentRewards,Number(t.seasonId))},isLoading:u,loadingText:"Claiming...",children:"Claim"}),(0,k.jsx)(P.L,{})]}),(0,k.jsxs)(L.x,{isOpen:p,onClose:x,title:"Confirm",children:[(0,k.jsx)(tP.kQ,{children:(0,k.jsxs)(I.x,{children:["Warning: Claiming from the current season is subject to a ",(0,ey.NM)(s),"% Karmic Debt ",(0,k.jsx)("strong",{children:"burn"})," of ",(0,k.jsxs)("strong",{children:[(0,ey.NM)(Number(t.currentRewards)*s/100,3)," FRTN"]}),". At this point in the season, you will only be able to claim ",(0,k.jsxs)(I.x,{as:"span",color:"#FDAB1A",fontWeight:"bold",children:[(0,ey.NM)(Number(t.currentRewards)*(1-s/100),3)," FRTN"]})]})}),(0,k.jsx)(tP.Ni,{children:(0,k.jsxs)(eU.K,{justify:"center",direction:"row",spacing:6,children:[(0,k.jsx)(nU.Z,{onClick:x,size:"lg",children:"Cancel"}),(0,k.jsx)(nU.Z,{onClick:function(){return b(t.currentRewards,Number(t.seasonId))},size:"lg",children:"Confirm"})]})})]})]})},s$=function(){var e,n=(0,C.useContext)(eB).game,t=(0,er.C)(function(e){return e.user}),s=(0,w._)((0,C.useState)(0),2),r=s[0],a=s[1],i=(0,w._)((0,C.useState)(0),2),o=i[0],l=i[1],c=(e=(0,S._)(function(){return(0,_.__generator)(this,function(e){return[2,eo.s.withoutKey().ryoshiDynasties.getSeasonalRewards(t.address)]})}),function(){return e.apply(this,arguments)}),u=(0,ea.useQuery)(["BankSeasonalRewards",t.address],c,{enabled:!!t.address,refetchOnWindowFocus:!1}),d=u.error,h=u.data,p=u.status;return u.refetch,(0,C.useEffect)(function(){if(n){var e=Date.parse(n.season.endAt)-Date.parse(n.season.startAt);a(Math.floor((e-(Date.parse(n.season.endAt)-Date.now()))/e*100)),l(n.rewards.burnPercentage/100)}},[n]),(0,k.jsxs)(N.xu,{children:[(0,k.jsxs)(N.xu,{children:[(0,k.jsxs)(I.x,{fontWeight:"bold",fontSize:"lg",children:["Current Season Progress (",r,"%)"]}),(0,k.jsx)(sZ,{current:r,max:100,segments:3})]}),(0,k.jsxs)(N.xu,{mt:2,children:[(0,k.jsxs)(I.x,{fontWeight:"bold",fontSize:"lg",children:["Karmic Debt (",(0,ey.NM)(o),"%)"]}),(0,k.jsx)(sZ,{current:o,max:100,useGrid:!1,fillColor:"linear-gradient(to left, #B45402, #7D3500)"})]}),(0,k.jsxs)(N.xu,{bgColor:"#292626",rounded:"md",p:4,fontSize:"sm",mt:4,children:[(0,k.jsx)(N.xu,{textAlign:"center",children:"Fortune rewards accumulate from Fortune staking, marketplace listings, and from playing the game and can be withdrawn at any time. However, only withdrawing at the end of a season will allow you to claim the full amount of rewards."}),"loading"===p?(0,k.jsx)(H.M,{py:4,children:(0,k.jsx)(K.$,{})}):"error"===p?(0,k.jsx)(H.M,{py:4,children:(0,k.jsxs)(I.x,{children:["Error: ",d.message]})}):(0,k.jsx)(k.Fragment,{children:h.data.rewards.length>0?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N.xu,{py:4,children:(0,k.jsx)("hr",{})}),h.data.rewards.map(function(e){return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(sJ,{reward:e,burnMalus:o})})})]}):(0,k.jsx)(N.xu,{mt:2,children:(0,k.jsx)(I.x,{textAlign:"center",fontSize:14,children:"You have no rewards to withdraw at this time."})})})]})]})},s0=t(7156),s2=t.n(s0),s1=function(){var e=(0,C.useContext)(eB).config;return(0,k.jsxs)(eU.K,{spacing:3,className:s2().className,fontSize:{base:"xs",md:"sm"},children:[(0,k.jsxs)(N.xu,{p:4,children:[(0,k.jsx)(I.x,{fontSize:"lg",fontWeight:"bold",children:"Fortune Rewards"}),(0,k.jsx)(I.x,{children:"Fortune rewards accumulate from Fortune staking, marketplace listings, and from playing the game and can be withdrawn at any time. However, only withdrawing at the end of a season will allow you to claim the full amount of rewards."}),(0,k.jsxs)(eX.U,{fontSize:"sm",mt:4,children:[(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"How do I claim rewards from the current season?"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsxs)(I.x,{children:["The Fortune tab will contain all seasons with pending rewards, including the current season. Click ",(0,k.jsx)("strong",{children:"Claim"})," to receive your current season rewards."]}),(0,k.jsxs)(I.x,{mt:4,children:["* Note that, the current season is subject to a burn malus, known here as the ",(0,k.jsx)("strong",{children:"Karmic Debt"}),". A percentage of the current rewards will be burned proportional to the time left in the season. The Karmic Debt starts at ",e.bank.staking.fortune.startingDebt,"% at the start of a season. That value will decrease to 0% as the current time gets closer to the end of the season."]})]})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Can I claim rewards from past seasons?"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsx)(eY.H,{pb:4,children:(0,k.jsxs)(I.x,{children:["Any seasons with unclaimed rewards will be displayed under the ",(0,k.jsx)("strong",{children:"Fortune"})," tab. Click the ",(0,k.jsx)("strong",{children:"Claim"})," button to receive the season rewards."]})})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"What is the Karmic Debt?"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsx)(eY.H,{pb:4,children:(0,k.jsxs)(I.x,{children:["The Karmic Debt, also known as a burn malus, represents the percentage of rewards that will be burned if a user decides to withdraw before the end of season. At the start of the season, this value starts at ",e.bank.staking.fortune.startingDebt,"% and decreases linearly until the end of the season when it becomes 0%"]})})]})]})]}),(0,k.jsxs)(N.xu,{p:4,children:[(0,k.jsx)(I.x,{fontSize:"lg",fontWeight:"bold",children:"Presale Rewards"}),(0,k.jsxs)(I.x,{children:["Users who participated in the Fortune Token Presale can now begin vesting their tokens. Those also holding Fortune Teller NFTs can exchange them for bonus Fortune tokens and Fortune Guards. This is done in the ",(0,k.jsx)("strong",{children:"Presale"})," tab"]}),(0,k.jsxs)(eX.U,{fontSize:"sm",mt:4,children:[(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"How do I receive the presale rewards?"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsxs)(I.x,{children:["Click the ",(0,k.jsx)("strong",{children:"Presale"})," tab. By connecting your wallet that participated in the presale, a vault will be created which will be used to faciliate the vesting process:"]}),(0,k.jsxs)(eQ.GS,{mt:2,children:[(0,k.jsxs)(eQ.HC,{children:["Click the ",(0,k.jsx)("strong",{children:"Create Vault"})," button to open a vault"]}),(0,k.jsx)(eQ.HC,{children:"Once the vault is opened, the page will show your vault balance"})]}),(0,k.jsx)(I.x,{mt:4,children:"These rewards are vested linearly for 3 seasons (9 months). Every block, more Fortune will become available to claim and you can claim the available amount at any time."})]})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"How to I trade in my Fortune Tellers?"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsx)(I.x,{children:"Fortune Tellers can be exchanged to receive bonus Fortune. They will also be exchanged for Fortune Guards, which are a key component to minting Heroes."}),(0,k.jsxs)(I.x,{mt:4,children:["If you have Fortune Tellers, they will show up under ",(0,k.jsx)("strong",{children:"Fortune Teller Bonus"}),". Review your bonus and click ",(0,k.jsx)("strong",{children:"Exchange"})," to receive it."]}),(0,k.jsx)(I.x,{mt:4,children:"Exchanged Fortune Tellers will be returned at the end of the claim period of 90 days."}),(0,k.jsx)(I.x,{mt:4,fontStyle:"italic",children:'*Note that the Cedric "Ceddy" Biscuitworth teller is only eligible for the Fortune rewards.'})]})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Which Fortune Teller NFTs are eligible for rewards?"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsxs)(I.x,{children:["The following Fortune Tellers are eligible for both $Fortune ",(0,k.jsx)("strong",{children:"and"})," Fortune Guards:"]}),(0,k.jsxs)(eQ.QI,{mt:2,children:[(0,k.jsx)(eQ.HC,{children:"Mr. Bertram Scuddlesworth Esq"}),(0,k.jsx)(eQ.HC,{children:"Mr. Cornelius Rufus Puffington"}),(0,k.jsx)(eQ.HC,{children:"Mr. Reginald Archibald Worthington"}),(0,k.jsx)(eQ.HC,{children:"Mr. Sebastian Mortimer Tiddleton"})]}),(0,k.jsxs)(I.x,{mt:4,children:["The following Fortune Tellers are eligible for $Fortune ",(0,k.jsx)("strong",{children:"only"}),":"]}),(0,k.jsx)(eQ.QI,{mt:2,children:(0,k.jsx)(eQ.HC,{children:'Mr. Cedric "Ceddy" Biscuitworth'})})]})]})]})]})]})},s4={fortune:"fortune",resources:"resources",presale:"presale"},s3=function(e){var n,t=e.isOpen,s=e.onClose,r=(0,nG.I0)(),a=(0,er.C)(function(e){return e.user}),i=(0,w._)((0,C.useState)(s4.fortune),2),o=i[0],l=i[1],c=(0,w._)((0,C.useState)(),2),u=c[0],d=c[1],h=(n=(0,S._)(function(){return(0,_.__generator)(this,function(e){return a.address||(a.needsOnboard?new nX.Z().startOnboarding():a.address?a.correctChain||r((0,nq.Ns)()):r((0,nq.Yn)())),[2]})}),function(){return n.apply(this,arguments)}),p=function(e){return function(n){l(e)}},f=(0,C.useCallback)(function(){l(s4.fortune),s()},[]);return(0,k.jsx)(L.x,{isOpen:t,onClose:f,title:"Rewards",isCentered:!1,utilBtnTitle:u?(0,k.jsx)(e_.R,{}):(0,k.jsx)(k.Fragment,{children:"?"}),onUtilBtnClick:function(){u?d(void 0):d("faq")},children:"faq"===u?(0,k.jsx)(s1,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(I.x,{textAlign:"center",fontSize:14,py:2,children:"Withdraw accumulated Fortune rewards or your Fortune stake"}),a.address?(0,k.jsxs)(N.xu,{p:4,children:[(0,k.jsxs)(z.k,{direction:"row",justify:"center",mb:2,children:[(0,k.jsx)(eA.Z,{isActive:o===s4.fortune,onClick:p(s4.fortune),children:"Fortune"}),(0,k.jsx)(eA.Z,{isActive:o===s4.resources,onClick:p(s4.resources),children:"Resources"}),(0,k.jsx)(eA.Z,{isActive:o===s4.presale,onClick:p(s4.presale),children:"Presale"})]}),(0,k.jsxs)(N.xu,{children:[o===s4.fortune&&(0,k.jsx)(s$,{}),o===s4.resources&&(0,k.jsx)(tP.Zk,{children:(0,k.jsxs)(E.g,{children:[(0,k.jsx)(U.E,{src:eC.Z.translate("/img/ryoshi-dynasties/icons/lock.png").convert(),alt:"lockIcon",boxSize:12}),(0,k.jsx)(I.x,{children:"Coming Soon"})]})}),o===s4.presale&&(0,k.jsx)(sK,{})]})]}):(0,k.jsx)(N.xu,{textAlign:"center",pb:4,mx:2,children:(0,k.jsx)(N.xu,{ps:"20px",children:(0,k.jsx)(nU.Z,{w:"250px",fontSize:{base:"xl",sm:"2xl"},stickyIcon:!0,onClick:h,children:"Connect"})})})]})})},s5={idle:"/img/battle-bay/gifBanker/eyeblink.gif",talking:"/img/battle-bay/gifBanker/mouth.gif"},s6=function(e){var n=e.address,t=e.onBack,s=(0,nG.I0)(),r=(0,F.q)(),a=r.isOpen,i=r.onOpen,o=r.onClose,l=(0,F.q)(),c=l.isOpen,u=l.onOpen,d=l.onClose,h=(0,F.q)(),p=h.isOpen,f=h.onOpen,x=h.onClose,m=(0,F.q)(),g=m.isOpen,y=(m.onOpen,m.onClose),b=(0,w._)((0,C.useState)(s5.talking),2),j=b[0],v=b[1],S=(0,er.C)(function(e){return e.user}),_=(0,sO.i)(),T=(0,w._)((0,tS.a)("(max-width: 800px)"),1)[0],A=(0,w._)((0,C.useState)(!1),2),z=A[0],R=A[1];(0,C.useEffect)(function(){R(!!_.height&&_.height<800&&T)},[_,T]),(0,C.useCallback)(function(){v(s5.talking),t()},[]);var P=["Greetings, traveler. I am the best person to talk to when it comes to your $Fortune possessions… or lack-thereof… which I could help you address.","Hail, brave hero! How may I assist you with your $Fortune possessions today? Stake, purchase, or withdraw?","Welcome, honored guest! Ready to ride the waves of fortune? Stake, purchase, or withdraw your tokens with me.","Welcome, traveler. It seems that since Ebisu has created all these Fortune tokens, that our world has gone through quite an evolution.","I am here to help all citizens of the Lotus Galaxy stake, purchase or withdraw their tokens. How may I help?","Blessings, traveler! Let me guess, you want me to help with your Fortune possessions. Say no more. What can I do for you today?"],H=(0,C.useCallback)(function(e){S.address?e():S.needsOnboard?new nX.Z().startOnboarding():S.address?S.correctChain||s((0,nq.Ns)()):s((0,nq.Yn)())},[S.address]);return(0,k.jsx)(N.xu,{position:"relative",h:"calc(100vh - 74px)",overflow:"hidden",children:(0,k.jsxs)(N.xu,{children:[(0,k.jsx)(sw,{address:n,isOpen:a,onClose:o}),(0,k.jsx)(sP,{isOpen:c,onClose:d}),(0,k.jsx)(s3,{isOpen:p,onClose:x}),(0,k.jsx)(L.x,{isOpen:g,onClose:y,title:"Coming Soon",children:(0,k.jsx)(tP.kQ,{children:(0,k.jsx)(I.x,{children:"This area is currently unavailable, either due to maintenance, or a game that has yet to be started. Check back again soon!"})})}),(0,k.jsx)(sn.o,{ratio:1920/1080,overflow:"visible",children:(0,k.jsx)(U.E,{src:eC.Z.translate("/img/battle-bay/bankinterior/bank_interior_background_desktop_animated.png").convert(),minH:"calc(100vh - 74px)"})}),(0,k.jsx)(U.E,{src:j,w:"800px",position:"absolute",bottom:0,left:0}),(0,k.jsx)(N.xu,{position:"absolute",top:{base:5,md:10,lg:16},left:{base:0,md:10,lg:16},w:{base:"full",md:"600px"},pe:_.height&&_.height<800?{base:"60px",sm:"150px",md:"0px"}:{base:"5px",md:"0px"},ps:{base:"5px",md:"0px"},rounded:"lg",children:(0,k.jsx)(sW.Z,{fontSize:{base:"md",sm:"lg",md:"xl"},color:"white",children:(0,k.jsx)(sW.A,{text:[P[Math.floor(Math.random()*P.length)],'<br /><br />Stake Fortune to stake your Fortune tokens and earn troops. Stake NFTs to boost your staking APR. Go to "Rewards" to claim your Fortune rewards.'],onComplete:function(){return v(s5.idle)}})})}),(0,k.jsx)(N.xu,{position:"absolute",right:-1,bottom:20,w:z?"60px":"269px",children:(0,k.jsxs)(E.g,{spacing:4,align:"end",children:[(0,k.jsx)(nU.Z,{w:"full",hoverIcon:!z,onClick:function(){return H(i)},children:z?(0,k.jsx)(q.J,{as:eh.G,icon:ed.owJ}):(0,k.jsx)(k.Fragment,{children:"Stake $Fortune "})}),(0,k.jsx)(nU.Z,{w:"full",hoverIcon:!z,onClick:function(){return H(u)},children:z?(0,k.jsx)(q.J,{as:eh.G,icon:ed.VmB}):(0,k.jsx)(k.Fragment,{children:"Stake NFTs "})}),(0,k.jsx)(nU.Z,{w:"full",hoverIcon:!z,onClick:function(){return H(f)},children:z?(0,k.jsx)(q.J,{as:eh.G,icon:ed.Cly}):(0,k.jsx)(k.Fragment,{children:"Rewards"})}),(0,k.jsx)(nU.Z,{w:"full",hoverIcon:!z,onClick:t,children:z?(0,k.jsx)(q.J,{as:eh.G,icon:ed.SJh}):(0,k.jsx)(k.Fragment,{children:"Exit"})})]})})]})})},s8=t(81731),s7=t.n(s8),s9=t(25675),re=t.n(s9),rn=function(e){var n=e.handleShowLeaderboard,t=e.onOpenDailyCheckin,s=(0,ec.useRouter)(),r=(0,C.useContext)(eB).user,a=(0,w._)((0,tS.a)("(max-width: 480px)"),1)[0],i=(0,er.C)(function(e){return e.user}),o=(0,C.useRef)(null),l=(0,w._)((0,C.useState)("00:00:00"),2),c=l[0],u=l[1],d=(0,w._)((0,C.useState)(!1),2),h=d[0],p=d[1],f=function(e){var n=Date.parse(e)-Date.now();return{total:n,days:Math.floor(n/864e5),hours:Math.floor(n/1e3/60/60%24),minutes:Math.floor(n/1e3/60%60),seconds:Math.floor(n/1e3%60)}},x=function(e){var n=f(e),t=n.total,s=n.hours,r=n.days,a=n.minutes,i=n.seconds;t>=0&&u(r>0?r+" days ":(s>9?s:"0"+s)+":"+(a>9?a:"0"+a)+":"+(i>9?i:"0"+i))},m=function(e){x(e),o.current&&clearInterval(o.current);var n=setInterval(function(){x(e)},1e3);o.current=n};return(0,C.useEffect)(function(){if(!i.address||!r){p(!1);return}var e=r.dailyRewards;e.nextClaim?Date.parse(e.nextClaim)<=Date.now()?p(!0):(p(!1),m(e.nextClaim)):p(!0)},[i.address,r]),(0,k.jsxs)(E.g,{padding:"2",children:[(0,k.jsxs)(tP.Zk,{textAlign:"center",children:[(0,k.jsx)(I.x,{children:"Welcome to Ryoshi Dynasties! A captivating gamified DAO experience, combining NFT marketplace, battles, and strategic gameplay. Build your dynasty, collect rare NFTs, and earn rewards."}),(0,k.jsx)(I.x,{mt:4,children:"Users wishing to visit the Ebisu's Bay marketplace experience can still do so by using the links at the top of the page."})]}),(0,k.jsx)(N.xu,{bg:"#272523",rounded:"md",minWidth:"100%",minHeight:"100%",position:"relative",children:(0,k.jsx)(N.xu,{cursor:"pointer",onClick:function(){s.push("/drops/ballies-cheerleaders")},children:a?(0,k.jsx)(re(),{alt:"Ballies Cheerleaders",src:eC.Z.translate("/img/ryoshi-dynasties/announcements/ballies-sm.webp").convert(),width:408,height:334}):(0,k.jsx)(U.E,{alt:"Ballies Cheerleaders",src:eC.Z.translate("/img/ryoshi-dynasties/announcements/ballies2.webp").convert(),width:590,height:150})})}),(0,k.jsxs)(nO.r,{h:"240px",templateRows:"repeat(2, 1fr)",templateColumns:"repeat(4, 1fr)",gap:3,w:"full",children:[(0,k.jsxs)(nW.P,{rowSpan:2,colSpan:2,bg:"#272523",p:4,textAlign:"center",rounded:"md",children:[(0,k.jsx)(I.x,{fontSize:{base:"sm",md:"xl"},fontWeight:"bold",children:"Information"}),(0,k.jsxs)(E.g,{mt:4,children:[(0,k.jsx)(N.xu,{as:"button",bg:"",py:1,px:4,rounded:"md",className:s7().className,color:"white",_hover:{bg:"yellow.900"},_focus:{boxShadow:"outline"},onClick:function(){window.open("https://ebisusbay.notion.site/ebisusbay/Ryoshi-Dynasties-8cb0bb21ad194af092cf1e1f8a8846c6","_blank")},children:"Whitepaper"}),(0,k.jsx)(N.xu,{as:"button",bg:"",py:1,px:4,rounded:"md",className:s7().className,color:"white",_hover:{bg:"yellow.900"},_focus:{boxShadow:"outline"},onClick:function(){s.push("/marketplace")},children:"Marketplace"}),(0,k.jsx)(N.xu,{as:"button",bg:"",py:1,px:4,rounded:"md",className:s7().className,color:"white",_hover:{bg:"yellow.900"},_focus:{boxShadow:"outline"},onClick:function(){window.open("https://vvs.finance/swap?outputCurrency=0xaF02D78F39C0002D14b95A3bE272DA02379AfF21&inputCurrency=0xc21223249CA28397B4B6541dfFaEcC539BfF0c59","_blank")},children:"Buy FRTN"})]})]}),(0,k.jsxs)(nW.P,{colSpan:2,bg:"#272523",p:2,textAlign:"center",rounded:"md",children:[(0,k.jsx)(I.x,{fontSize:{base:"sm",md:"md"},children:"Claim Daily Rewards"}),(0,k.jsx)(nU.Z,{mt:2,w:"full",maxW:"200px",fontSize:{base:"12px",sm:"md"},onClick:t,children:h?"Claim Now!":"Claim in "+c})]}),(0,k.jsxs)(nW.P,{colSpan:2,bg:"#272523",p:2,textAlign:"center",rounded:"md",children:[(0,k.jsx)(I.x,{fontSize:{base:"sm",md:"md"},children:"Leaderboards"}),(0,k.jsx)(nU.Z,{mt:2,w:"full",maxW:"200px",fontSize:{base:"12px",sm:"md"},onClick:n,children:"View Leaderboards"})]})]})]})},rt=t(56593),rs=t.n(rt),rr=t(1004),ra=t(56005),ri=t(49394),ro=function(e){e.onReturn;var n,t=(0,er.C)(function(e){return e.user}),s=(0,ea.useQuery)({queryFn:function(){return eo.s.withoutKey().ryoshiDynasties.getGameContext()},enabled:!!t.address}),r=s.data,a=s.status;s.error;var i=(0,C.useContext)(eB),o=(i.config,i.user,i.game),l=(0,w._)((0,C.useState)(!1),2),c=l[0],u=l[1],d=(0,w._)((0,C.useState)(""),2),h=d[0];d[1];var p=(0,w._)((0,C.useState)(""),2),f=p[0],x=p[1],m=(0,w._)((0,C.useState)([]),2),g=m[0],y=m[1],b=(0,w._)((0,C.useState)(!0),2),j=b[0],v=b[1],T=(0,w._)((0,C.useState)(!1),2),A=T[0],F=T[1],R=(0,w._)((0,C.useState)([]),2),P=R[0],M=R[1],L=(0,w._)((0,C.useState)({selectedFaction:""}),2),D=L[0],B=L[1];(0,C.useEffect)(function(){"success"===a&&void 0!==r&&(console.log("allFactions: ",r),null!==r.game?F(!1):F(!0))},[a,r]),(0,S._)(function(){var e;return(0,_.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,ni(0)];case 1:return e=n.sent(),x(tx()(e.startAt).format("MMM D")+" - "+tx()(e.endAt).format("MMM D")),[3,3];case 2:return console.log(n.sent()),[3,3];case 3:return[2]}})});var V=function(e){if(o){var n=0;return o.game.parent.map.regions.map(function(t){return t.controlPoints.map(function(t,s){t.name===e&&(n=t.id)})}),n}},Z=(n=(0,S._)(function(e){var n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:if(!o)return[2];return n=j?o.game.id:o.history.previousGameId,[4,ng(V(e),n)];case 1:return y(t.sent().slice(0,5).map(function(e,n){return(0,k.jsxs)(te.Tr,{children:[(0,k.jsx)(tn.Td,{textAlign:"center",children:n+1}),(0,k.jsx)(tn.Td,{textAlign:"center",children:e.name}),(0,k.jsx)(tn.Td,{textAlign:"center",children:e.totalTroops})]},n)})),[2]}})}),function(e){return n.apply(this,arguments)});return(0,C.useEffect)(function(){o&&M(o.game.parent.map.regions.map(function(e){return e.controlPoints.map(function(e,n){return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("option",{value:e.name,children:e.name},e.id)})})}))},[o]),(0,k.jsx)(k.Fragment,{children:A?(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(N.xu,{minH:"200px",children:(0,k.jsx)(H.M,{children:(0,k.jsx)(I.x,{margin:"100",children:" No game currently active "})})})}):(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(eU.K,{spacing:3,p:4,children:[(0,k.jsxs)(H.M,{children:[(0,k.jsxs)(rr.m,{children:[(0,k.jsxs)(ra.t,{children:[(0,k.jsx)(ri.O,{onClick:function(){return v(!0)},children:(0,k.jsxs)(E.g,{children:[(0,k.jsx)(I.x,{className:rs().className,children:" Current Game "}),(0,k.jsxs)(I.x,{children:[" ",f," "]})]})}),(0,k.jsx)(ri.O,{onClick:function(){return v(!1)},children:(0,k.jsxs)(E.g,{children:[(0,k.jsx)(I.x,{className:rs().className,children:" Previous Game "}),(0,k.jsxs)(I.x,{children:[" ",h," "]})]})})]}),(0,k.jsx)(H.M,{children:(0,k.jsx)(nB.P,{name:"attackersFaction",backgroundColor:"#292626",w:"90%",me:2,placeholder:"Select a Control Point",marginTop:2,value:D.selectedFaction,onChange:function(e){B((0,W._)((0,O._)({},D),(0,to._)({},e.target.name,e.target.value))),""!==e.target.value?(Z(e.target.value),u(!0)):(console.log("no region selected"),u(!1))},children:P})}),(0,k.jsx)(z.k,{children:o?(0,k.jsx)(k.Fragment,{}):(0,k.jsx)(K.$,{size:"sm"})})]}),(0,k.jsx)(I.x,{})]}),(0,k.jsx)(H.M,{children:(0,k.jsx)(k.Fragment,{children:c?(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(tt.x,{w:"90%",children:(0,k.jsxs)(ts.i,{size:"m",children:[(0,k.jsx)(tr.h,{children:(0,k.jsxs)(te.Tr,{children:[(0,k.jsx)(ta.Th,{textAlign:"center",children:"Rank"}),(0,k.jsx)(ta.Th,{textAlign:"center",children:"Faction"}),(0,k.jsx)(ta.Th,{textAlign:"center",children:"Troops"})]})}),(0,k.jsx)(n9.p,{children:g})]})})}):(0,k.jsx)(N.xu,{minH:"200px",children:(0,k.jsx)(H.M,{children:(0,k.jsx)(I.x,{margin:"100",children:" "})})})})})]})})})},rl=t(64605),rc=t.n(rl),ru=function(){var e=(0,w._)((0,C.useState)(!1),2);return e[0],e[1],(0,er.C)(function(e){return e.user}),(0,k.jsxs)(eU.K,{spacing:3,className:rc().className,fontSize:{base:"xs",md:"sm"},children:[(0,k.jsx)(I.x,{p:4,children:"Ryoshi Dynasties is a gamified DAO governance system built on top of Ebisu’s Bay. This system is designed to reward Ebisu’s Bay users for their participation in the platform and their daily check-ins, while nourishing and supporting the Cronos NFT & Game-Fi ecosystem."}),(0,k.jsxs)(eX.U,{fontSize:"sm",defaultIndex:[0],children:[(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"What is a Faction and how to register one"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsx)(I.x,{children:"Factions are groups of either users or NFT collections. Anyone can visit the Alliance Center and register their wallet or collection address as a faction in Ryoshi Dynasties, to compete for community votes, battle for control points on the map and accrue platform rewards."}),(0,k.jsx)(I.x,{mt:2,children:"Once created, troops can be delegated to the faction, and the faction owner can deploy those troops to various locations on the battle map, attack other factions, or defend against other attacking factions."}),(0,k.jsx)(I.x,{mt:2,children:"At the end of each week, rewards are granted by Ryoshi Dynasties to those factions with the most troops on each world map location."}),(0,k.jsx)(I.x,{mt:2,children:"There are 2 types of factions: User Faction: One or more users (up to 15) registers their contract addresses as an in-game faction, enabling users within that faction to earn platform rewards!"}),(0,k.jsx)(I.x,{mt:2,children:"Collection Faction: NFT collections (up to 3) can register their collection address as an in game faction, and all holders of those NFT collections will be eligible for platform rewards."}),(0,k.jsx)(I.x,{mt:2,children:"Players must have at least 20 Mitama in their wallet to register a faction, and it costs 1000 Fortune to register a faction. However the registration is valid for only a single season, after which the faction must be re-registered to continue playing. The registration fee is automatically waived for those players who previously participated in the Fortune presale."}),(0,k.jsx)(I.x,{mt:2,children:"Faction owners can only delegate troops to their own faction; Participants who don’t own or manage a faction can delegate troops to any and all factions."})]})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"How does the game work?"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsx)(eY.H,{pb:4,children:(0,k.jsx)(I.x,{children:" Faction owners and other players acquire troops by staking $Fortune coins, and the troops can be delegated to specific factions.  Faction owners then place the troops on locations on a world map, much like the game “Risk”.  For a $Koban fee, faction owners can initiate battles with other factions within the same geographic location.  At the end of each week, rewards are distributed to the faction with the most troops in each geographic location. Therefore, factions can conquer new territories, defend themselves or eventually attack other factions to gain territory, and to receive in-game rewards."})})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Who is eligible for rewards?"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsx)(eY.H,{pb:4,children:(0,k.jsx)(I.x,{children:"Everyone can benefit from Ryoshi Dynasties! NFT collections and communities can take part in the game to earn extra rewards. Meanwhile Ebisu’s Bay users can receive platform rewards for their own platform activities & daily check-ins, as well as extra Fortune Token rewards. Extra Fortune Token rewards are issued to holders of NFTs if these NFTs are part of a Collection Faction in Ryoshi Dynasties."})})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Votes & rewards"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsx)(eY.H,{pb:4,children:(0,k.jsx)(I.x,{children:"Ebisu’s Bay users can vote for their favorite factions providing them with Troops! By casting your vote, you'll help determine the amount of platform rewards issued to all NFT holders of a voted faction. When users delegate troops to a faction, they are effectively voting for, and determining, the size of listing rewards for the specific collections and people represented by the collection and user factions, respectively."})})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Battles"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsx)(I.x,{children:"Factions need to control countries on the map for weekly rewards. Some areas (aka “control points”) are more valuable due to their location!  At the end of each week, listing rewards will be distributed to factions with the most troops on each country. Factions can spend Koban tokens to attack each other. The fate of the battle will be decided by rolling a pair of statistically accurate, virtual dice! "}),(0,k.jsx)(I.x,{mt:2,children:" For each roll, whichever participant has the higher numbered die wins that roll.  Any ties result in a re-roll of both dice until the tie is eliminated. Attacking factions earn one of 60 Battle Card NFTs as a reward for each dice roll won. Separately, a player can burn 3 matching Battle Card NFTs in exchange for additional troops in the game."}),(0,k.jsxs)(I.x,{mt:2,children:[" ",(0,k.jsx)("strong",{children:"Skirmish"})," - Battle attack continues for a more or less fixed set of rolls. User can select up to three (3) troops for the skirmish, and pays 20 Koban per troop.  Attack continues up to a maximum of the troop number selected.  If an attacker selects 3 troops for a skirmish, and the defender has 3 troops, then the dice are rolled three times. If the attacker wins 2 of the 3 rolls, then they also receive two Battle Cards, which they will need to subsequently claim."]}),(0,k.jsxs)(I.x,{mt:2,children:[" ",(0,k.jsx)("strong",{children:"Conquest"})," - Battle attack continues until either the attacker looses their troops (up to 3 maximum) or defender has no more troops at all within the country.  User pays a flat fee of 50 Koban for each troop allocated to the attack, with a maximum of three (3) troops. "]}),(0,k.jsx)(I.x,{mt:2,children:" "})]})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Daily Rewards"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsx)(I.x,{children:" Get rewarded for simply visiting Ryoshi Dynasties! Ryoshi Dynasties counts the number of days in a row (aka “a streak”) that a user visits the site.  Players even get Koban for a single check in"}),(0,k.jsx)(I.x,{mt:2,children:"Players will complete daily check-ins to earn Koban which is required within Ryoshi Dynasties – players pay for their attacks with Koban."}),(0,k.jsx)(I.x,{mt:2,children:"The size of the check in rewards increases every day, and the check-in streaks are restarted each week. "}),(0,k.jsx)(I.x,{mt:2,children:"In order to view the current check-in streak, and to claim check-in Koban rewards, players can select the “Claim Reward” button on the “In-game wallet” in the upper left of the Village map, or visit the “Claim Daily Reward” button on the Announcements page."}),(0,k.jsx)(I.x,{mt:2,children:"All Resources are 1155 tokens and will be freely tradable on the open NFT market."})]})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"Ecosystem Tokens"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsxs)(eY.H,{pb:4,children:[(0,k.jsx)(I.x,{children:"The Ryoshi Dynasties ecosystem is fueled by 3 Tokens:"}),(0,k.jsx)(I.x,{mt:2,children:"$Fortune is a standard CRC-20 which can be freely traded on exchanges and will be used for rewards and purchasing services from Ebisu’s Bay. $Fortune tokens can be staked to earn more $Fortune, $Mitama and Troops. "}),(0,k.jsx)(I.x,{mt:2,children:"$Koban is an ERC-1155 token and can be freely traded on Ebisu’s Bay Marketplace. Koban is earned by checking into Ryoshi Dynasties on a daily basis -- the more days in a row of check-ins, the more Koban is earned.  A faction owner must pay for their battle attacks with Koban. In addition, Koban can be exchanged for $Fortune if the ‘RyoshiFella’ Global Banker bonus is present."}),(0,k.jsx)(I.x,{mt:2,children:"$Mitama is a soulbound token which is gained by staking $Fortune. $Mitama represents users’ governance on Ebisu’s Bay as well as users’ ownership of battle units: the longer they stake their tokens, the more troops they receive for each unit of tokens staked."})]})]}),(0,k.jsxs)(eq.Q,{children:[(0,k.jsxs)(eG.K,{fontSize:"sm",fontWeight:"bold",children:[(0,k.jsx)(N.xu,{as:"span",flex:"1",textAlign:"left",fontSize:"sm",children:"No time to play? Delegate!"}),(0,k.jsx)(eK.X,{})]}),(0,k.jsx)(eY.H,{pb:4,children:(0,k.jsx)(I.x,{children:"The Ryoshi Dynasties ecosystem is designed to be accessible to any type of user! If you don’t have the time to check in daily, you can always stake your $Fortune tokens to earn more $Fortune over time, and delegate your Troops to the best offeror or to projects you like! You might also be eligible to earn weekly extra $Fortune tokens for your NFT listings on Ebisu’s Bay if these NFTs are doing well in Ryoshi Dynasties, with no extra actions required on your end!"})})]})]})]})},rd=t(49799),rh=t.n(rd),rp=t(49598),rf=(0,C.createContext)(null),rx=function(e){var n=e.isOpen,t=e.onClose,s=e.title,r=e.utilBtnTitle,a=e.onUtilBtnClick,i=(e.size,e.isCentered,e.children),o=(0,w._)((0,C.useState)(!1),2),l=o[0],c=o[1],u=(0,w._)((0,C.useState)(""),2),d=u[0],h=u[1],p=(0,w._)((0,C.useState)(""),2),f=p[0],x=p[1],m=(0,C.useContext)(rf),g=m.ref;m.setRef,(0,C.useEffect)(function(){var e=!!r&&!!a;c(e);var n="",s="";e&&t?(n="rd-bank-modal-masktop-inner",s="rd-bank-modal-masktop-outer"):e&&!t?(n="rd-bank-modal-maskleft-inner",s="rd-bank-modal-maskleft-outer"):!e&&t&&(n="rd-bank-modal-maskright-inner",s="rd-bank-modal-maskright-outer"),x(n),h(s)},[r,a,t]);var y=function(){t&&t()};return(0,k.jsx)(rp.h,{containerRef:n?g:void 0,children:(0,k.jsx)(N.xu,{position:"absolute",top:0,left:0,right:0,bottom:0,bg:"rgba(0, 0, 0, 0.5)",display:n?"flex":"none",justifyContent:"center",alignItems:"center",onClick:y,py:"100px",children:(0,k.jsx)(N.xu,{borderWidth:"1px",borderStyle:"solid",borderLeftColor:"#45433C",borderRightColor:"#684918",borderTopColor:"#625C4D",borderBottomColor:"#181514",rounded:"3xl",bg:"linear-gradient(#1C1917, #272624, #000000)",className:rh().className,maxW:"672px",maxH:"calc(100vh - 74px)",overflowY:"auto",onClick:function(e){return e.stopPropagation()},children:(0,k.jsx)(N.xu,{color:"white",py:2,px:6,children:(0,k.jsxs)(N.xu,{p:2,position:"relative",children:[l&&(0,k.jsx)(N.xu,{position:"absolute",left:-4,top:0,rounded:"full",zIndex:1,_groupHover:{cursor:"pointer"},"data-group":!0,children:(0,k.jsx)(R.z,{bg:"#C17109",rounded:"full",border:"8px solid #F48F0C",w:14,h:14,fontSize:"28px",onClick:a,_groupHover:{bg:"#de8b08",borderColor:"#f9a50b"},children:r})}),!!t&&(0,k.jsx)(N.xu,{position:"absolute",right:-4,top:0,rounded:"full",zIndex:1,_groupHover:{cursor:"pointer"},"data-group":!0,children:(0,k.jsx)(R.z,{bg:"#C17109",rounded:"full",border:"8px solid #F48F0C",w:14,h:14,onClick:y,_groupHover:{bg:"#de8b08",borderColor:"#f9a50b"},children:(0,k.jsx)(eT.T,{})})}),(0,k.jsxs)(N.xu,{bg:"#564D4A",h:"full",my:4,roundedBottom:"2xl",roundedTopLeft:l?"none":"2xl",roundedTopRight:t?"none":"2xl",className:d,children:[(0,k.jsx)(N.xu,{color:"#FFF",textAlign:"center",verticalAlign:"middle",className:f,p:1,children:(0,k.jsx)(z.k,{roundedTopLeft:l?"none":"2xl",roundedTopRight:t?"none":"2xl",bg:"#272523",h:"55px",px:12,fontSize:{base:"lg",sm:"2xl",md:"3xl"},my:"auto",justify:"center",direction:"column",children:s})}),i]})]})})})})})},rm=function(e){var n=e.isOpen,t=e.onClose,s=e.onOpenDailyCheckin,r=(0,w._)((0,C.useState)(null),2),a=r[0],i=r[1],o=(0,w._)((0,C.useState)(!1),2);o[0],o[1];var l=(0,w._)((0,C.useState)("RYOSHI DYNASTIES"),2),c=l[0],u=l[1],d=function(){i(null),u("RYOSHI DYNASTIES")},h=(0,C.useCallback)(function(){i((0,k.jsx)(ro,{onReturn:d})),u("Leaderboard")},[d]);return(0,k.jsx)(rx,{title:c,isOpen:n,onClose:function(){d(),t()},utilBtnTitle:a?(0,k.jsx)(e_.R,{}):(0,k.jsx)(k.Fragment,{children:"?"}),onUtilBtnClick:function(){a?d():(i((0,k.jsx)(ru,{})),u("Ryoshi Dynasties FAQ"))},children:a?(0,k.jsx)(k.Fragment,{children:a}):(0,k.jsx)(rn,{handleShowLeaderboard:h,onOpenDailyCheckin:s})})},rg=t(60907),ry=t.n(rg),rb=function(e){var n=e.onBack,t=(0,nG.I0)(),s=(0,F.q)();s.isOpen,s.onOpen,s.onClose;var r=(0,er.C)(function(e){return e.user});return(0,C.useCallback)(function(e){r.address?e():r.needsOnboard?new nX.Z().startOnboarding():r.address?r.correctChain||t((0,nq.Ns)()):t((0,nq.Yn)())},[r.address]),(0,k.jsxs)(z.k,{border:"1px solid #FFD700",backgroundColor:"#292626",flexDirection:"column",textAlign:"center",borderRadius:"10px",justifyContent:"space-around",padding:4,minW:{base:"100%",xl:"450px"},boxShadow:"0px 0px 10px 0px #000000",className:ry().className,children:[(0,k.jsxs)(z.k,{justify:"space-between",children:[(0,k.jsx)(N.xu,{left:6,top:6,rounded:"full",zIndex:1,_groupHover:{cursor:"pointer"},"data-group":!0,children:(0,k.jsx)(R.z,{bg:"#C17109",rounded:"full",border:"8px solid #F48F0C",w:14,h:14,onClick:n,_groupHover:{bg:"#de8b08",borderColor:"#f9a50b"},children:(0,k.jsx)(e_.R,{boxSize:8})})}),(0,k.jsxs)(N.xu,{textAlign:"end",ms:2,children:[(0,k.jsx)(I.x,{textColor:"#ffffffeb",fontSize:{base:"28px",md:"32px"},fontWeight:"bold",children:"Moon Gate"}),(0,k.jsx)(I.x,{textColor:"#ffffffeb",fontSize:"sm",fontStyle:"italic",children:"Join in the quest for sea treasures on Seashrine!"})]})]}),(0,k.jsx)(N.xu,{children:(0,k.jsxs)(E.g,{children:[(0,k.jsx)(P.L,{h:"4"}),(0,k.jsx)("div",{style:{margin:"8px 24px"},children:(0,k.jsx)(H.M,{children:(0,k.jsx)(M.W,{children:(0,k.jsxs)(E.g,{spacing:4,align:"stretch",children:[(0,k.jsx)(L.t,{onClick:function(e){window.open("https://seashrine.ebisusbay.com/","_blank")},children:"Visit Seashrine"}),(0,k.jsx)(L.t,{onClick:function(e){window.open("https://seashrine.ebisusbay.com/portal?tab=cronos","_blank")},children:"Bridge VIPs"})]})})})}),(0,k.jsx)(P.L,{h:"4"})]})})]})},rj=t(38306),rv=t.n(rj),rw=function(e){var n=e.onBack,t=(0,nG.I0)(),s=(0,F.q)();s.isOpen,s.onOpen,s.onClose;var r=(0,er.C)(function(e){return e.user});return(0,C.useCallback)(function(e){r.address?e():r.needsOnboard?new nX.Z().startOnboarding():r.address?r.correctChain||t((0,nq.Ns)()):t((0,nq.Yn)())},[r.address]),(0,k.jsxs)(z.k,{border:"1px solid #FFD700",backgroundColor:"#292626",flexDirection:"column",textAlign:"center",borderRadius:"10px",justifyContent:"space-around",padding:4,minW:{base:"100%",xl:"450px"},boxShadow:"0px 0px 10px 0px #000000",className:rv().className,children:[(0,k.jsxs)(z.k,{justify:"space-between",children:[(0,k.jsx)(N.xu,{left:6,top:6,rounded:"full",zIndex:1,_groupHover:{cursor:"pointer"},"data-group":!0,children:(0,k.jsx)(R.z,{bg:"#C17109",rounded:"full",border:"8px solid #F48F0C",w:14,h:14,onClick:n,_groupHover:{bg:"#de8b08",borderColor:"#f9a50b"},children:(0,k.jsx)(e_.R,{boxSize:8})})}),(0,k.jsxs)(N.xu,{textAlign:"end",ms:2,children:[(0,k.jsx)(I.x,{textColor:"#ffffffeb",fontSize:{base:"28px",md:"32px"},fontWeight:"bold",children:"Marketplace"}),(0,k.jsx)(I.x,{textColor:"#ffffffeb",fontSize:"sm",fontStyle:"italic",children:"Obtain Ebisus NFTs"})]})]}),(0,k.jsx)(N.xu,{children:(0,k.jsxs)(E.g,{children:[(0,k.jsx)(P.L,{h:"4"}),(0,k.jsx)("div",{style:{margin:"8px 24px"},children:(0,k.jsx)(H.M,{children:(0,k.jsx)(M.W,{children:(0,k.jsxs)(E.g,{spacing:4,align:"stretch",children:[(0,k.jsx)(L.t,{onClick:function(e){window.open("https://app.ebisusbay.com/marketplace","_blank")},children:"Visit marketplace"}),(0,k.jsx)(L.t,{onClick:function(e){window.open("https://app.ebisusbay.com/staking","_blank")},children:"VIP staking"})]})})})}),(0,k.jsx)(P.L,{h:"4"})]})})]})};(0,ek.eG)();var rk=function(e){var n,t,s=e.onOpenBuildings,r=e.onOpenDailyCheckin,a=e.onOpenBattleLog,i=e.forceRefresh,o=(0,er.C)(function(e){return e.user}),l=(0,C.useContext)(eB),c=(l.config,l.user);l.game;var u=(0,ek.eG)(),d=(0,w._)((0,C.useState)(!1),2),h=d[0],p=d[1],f=(0,w._)((0,C.useState)(0),2),x=f[0],m=f[1],g=(0,w._)((0,C.useState)(0),2),y=g[0],b=g[1],j=(0,w._)((0,C.useState)(0),2),v=j[0],T=j[1],A=(0,w._)((0,eP.Z)(),2);A[0],A[1];var F=(0,C.useRef)(null),R=(0,w._)((0,C.useState)("00:00:00"),2),I=R[0],E=R[1],P=(0,w._)((0,C.useState)(!0),2),H=P[0],M=P[1],L=function(e){var n=Date.parse(e)-Date.now();return{total:n,days:Math.floor(n/864e5),hours:Math.floor(n/1e3/60/60%24),minutes:Math.floor(n/1e3/60%60),seconds:Math.floor(n/1e3%60)}},O=function(e){var n=L(e),t=n.total,s=n.hours,r=n.days,a=n.minutes,i=n.seconds;t>=0&&E(r>0?r+" days ":(s>9?s:"0"+s)+":"+(a>9?a:"0"+a)+":"+(i>9?i:"0"+i))},W=function(e){O(e),F.current&&clearInterval(F.current);var n=setInterval(function(){O(e)},1e3);F.current=n},D=(n=(0,S._)(function(){var e;return(0,_.__generator)(this,function(n){return o.address&&c&&(!(e=Date.parse(c.dailyRewards.nextClaim))||e<=Date.now()?M(!0):(M(!1),W(c.dailyRewards.nextClaim))),[2]})}),function(){return n.apply(this,arguments)});(0,C.useEffect)(function(){D()},[o.address,c]);var B=(t=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,4,5]),p(!0),[4,ei.Z.getWallet(o.address,{collection:[u.contracts.resources]})];case 1:return e=t.sent(),[4,eo.s.withoutKey().ryoshiDynasties.getErc20Account(o.address)];case 2:return n=t.sent(),e.data.length>0&&m((0,ey.lY)((0,ey.NM)(Number(e.data[0].balance)))),n&&(b((0,ey.lY)((0,ey.NM)(Number(eR.formatEther(n.fortuneBalance))))),T((0,ey.lY)((0,ey.NM)(Number(n.mitamaBalance))))),[3,5];case 3:return console.log(t.sent()),[3,5];case 4:return p(!1),[7];case 5:return[2]}})}),function(){return t.apply(this,arguments)});return(0,C.useEffect)(function(){o.address&&B()},[o.address,i]),(0,k.jsx)(N.xu,{position:"absolute",top:0,left:0,p:4,pointerEvents:"none",w:"100%",children:(0,k.jsxs)(z.k,{justifyContent:"space-between",w:"100%",children:[(0,k.jsxs)(Z.M,{spacing:2,children:[(0,k.jsx)(nU.Z,{pointerEvents:"auto",size:"sm",hoverIcon:!1,onClick:r,fontSize:{base:"12",sm:"14"},w:{base:"150px",sm:"200px"},h:{base:"40px",sm:"40px"},lineHeight:"1.2",children:H?"Claim Rewards!":"Claim in "+I}),(0,k.jsx)(rS,{isLoading:h,icon:"/img/ryoshi-dynasties/icons/fortune.svg",address:o.address,amount:y}),(0,k.jsx)(rS,{isLoading:h,icon:"/img/ryoshi-dynasties/icons/mitama.png",address:o.address,amount:v}),(0,k.jsx)(rS,{isLoading:h,icon:"/img/ryoshi-dynasties/icons/koban.png",address:o.address,amount:x})]}),(0,k.jsx)(N.xu,{children:(0,k.jsxs)(Z.M,{columns:{base:1,sm:2},gap:2,children:[(0,k.jsx)(rC,{onClick:s,icon:ed.P88}),(0,k.jsx)(rC,{onClick:a,icon:ed.OGB})]})})]})})},rC=function(e){var n=e.onClick,t=e.icon;return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(N.xu,{pointerEvents:"auto",as:"button",w:{base:"50px",sm:"50px"},h:{base:"40px",sm:"40px"},borderColor:"#4c4859",color:"#272523EE !important",borderRadius:"4px",position:"relative",borderWidth:"4px 4px 4px 4px","data-group":!0,className:"rd-button",_active:{borderColor:"#FFFFFF"},bgColor:"transparent !important",onClick:n,children:(0,k.jsx)(z.k,{direction:"column",justify:"center",px:0,bg:"linear-gradient(to left, #272523EE, #151418 )",_groupHover:{bg:"linear-gradient(to left, #272523EE, #272523EE )",ps:"0px"},h:"full",children:(0,k.jsx)(eh.G,{icon:t,color:"white"})})})})},rS=function(e){var n=e.isLoading,t=e.icon,s=e.address,r=e.amount;return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(N.xu,{bg:"#272523EE",rounded:"md",w:{base:"150px",sm:"200px"},h:{base:"24px",sm:"24px"},borderColor:"#4c4859",borderRadius:"6px",position:"relative",borderWidth:"4px 4px 4px 4px",children:n?(0,k.jsx)(t_.E,{size:"xs",colorScheme:"orange",isIndeterminate:!0,w:"full"}):(0,k.jsxs)(k.Fragment,{children:[s?(0,k.jsxs)(z.k,{justifyContent:"space-between",h:{base:"14px",sm:"12px"},children:[(0,k.jsx)(U.E,{src:eC.Z.translate(t).convert(),alt:"walletIcon",boxSize:6,marginY:-1,marginX:-1}),(0,k.jsx)(I.x,{fontSize:{base:"12",sm:"14"},textColor:"#ffffff",children:r})]}):(0,k.jsx)(I.x,{align:"center",children:"Connect wallet for stats"}),(0,k.jsx)(P.L,{})]})})})},r_=t(60687),rT=t.n(r_),rA=t(75972),rF=t(39697),rz=t(12774),rN=t(36860),rR=function(e){var n,t,s=e.isOpen,r=e.onClose,a=(0,nG.I0)(),i=(0,C.useContext)(eB),o=(i.config,i.game);i.user;var l=(0,er.C)(function(e){return e.user}),c=(0,w._)((0,eP.Z)(),2),u=(c[0],c[1]),d=(0,w._)((0,C.useState)("desc"),2),h=d[0],p=d[1],f=(0,w._)((0,C.useState)(null),2),x=f[0],m=f[1],g=(n=(0,S._)(function(){return(0,_.__generator)(this,function(e){return l.needsOnboard?new nX.Z().startOnboarding():l.address?l.correctChain||a((0,nq.Ns)()):a((0,nq.Yn)()),[2]})}),function(){return n.apply(this,arguments)}),y=(t=(0,S._)(function(e){var n,t;return(0,_.__generator)(this,function(s){switch(s.label){case 0:return t=void 0===(n=e.pageParam)?1:n,[4,eo.s.withoutKey().ryoshiDynasties.getBattleLog({address:l.address,signature:x,gameId:o.game.id,page:t,pageSize:10,orderBy:h})];case 1:return[2,s.sent()]}})}),function(e){return t.apply(this,arguments)}),b=(0,ea.useInfiniteQuery)(["BattleLog",l.address,null==o?void 0:o.game.id,h],y,{getNextPageParam:function(e,n){return n[n.length-1].hasNextPage?n.length+1:void 0},refetchOnWindowFocus:!1,enabled:s&&!!l.address&&!!(null==o?void 0:o.game.id)&&!!x}),j=b.data,v=b.error,T=b.fetchNextPage,A=b.hasNextPage,F=b.status,z=function(){p("asc"===h?"desc":"asc")};return(0,C.useEffect)(function(){s&&(l.address?function(){return e.apply(this,arguments)}():m(null));function e(){return(e=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:if(n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,u()];case 1:n=t.sent().signature,t.label=2;case 2:return m(n),[2]}})})).apply(this,arguments)}},[l.address,s]),(0,k.jsxs)(rA.d,{isOpen:s,onClose:r,size:"sm",children:[(0,k.jsx)(Q.Z,{}),(0,k.jsxs)(rF.s,{children:[(0,k.jsx)(ee.o,{}),(0,k.jsx)($.x,{children:"GameLog"}),(0,k.jsxs)(en.f,{children:[(0,k.jsx)(N.xu,{position:"absolute",children:(0,k.jsx)(R.z,{w:100,marginTop:-24,marginLeft:150,onClick:function(){return z()},children:(0,k.jsxs)(I.x,{fontSize:12,children:[" ","asc"===h?"Oldest":"Most Recent"," "]})})}),(0,k.jsxs)(N.xu,{mx:1,pb:4,mt:25,maxW:"500px",children:[(0,k.jsx)(tB.i,{orientation:"vertical",position:"absolute",height:"100%",marginLeft:"4",borderWidth:"2px"}),l.address?(0,k.jsx)(el.Z,{dataLength:(null==j?void 0:j.pages)?j.pages.flat().length:0,next:T,hasMore:null!=A&&A,style:{overflow:"hidden"},loader:(0,k.jsx)(H.M,{children:(0,k.jsx)(nM.Z,{})}),children:"loading"===F?(0,k.jsx)(H.M,{children:(0,k.jsx)(nM.Z,{})}):"error"===F?(0,k.jsxs)(N.xu,{textAlign:"center",children:["Error: ",v.message]}):(null==j?void 0:j.pages.map(function(e){return e}).flat().length)>0?(0,k.jsx)(Z.M,{columns:1,gap:55,padding:2,my:4,paddingLeft:"10",children:j.pages.map(function(e,n){return(0,k.jsx)(C.Fragment,{children:e.data.map(function(e,n){var t;return(0,k.jsxs)(N.xu,{bg:"#272523",borderRadius:"md",p:2,"box-shadow":"5px 10px 18px red",style:{boxShadow:"0 10px 20px rgba(0, 0, 0, 0.7)"},border:"1px solid #F48F0C",children:[(0,k.jsx)(I.x,{fontSize:14,marginTop:-8,marginBottom:2,children:(t=e.date,new Date(1e3*t).toLocaleString())}),"ATTACK"===e.event?(0,k.jsx)(rI,{battleLog:e},n):"DEFEND"===e.event?(0,k.jsx)(rE,{battleLog:e},n):"DEPLOY"===e.event?(0,k.jsx)(rP,{battleLog:e},n):"DELEGATE"===e.event?(0,k.jsx)(rH,{battleLog:e},n):"ADJUSTMENT"===e.event?(0,k.jsx)(rL,{battleLog:e},n):"UNDELEGATE"===e.event&&(0,k.jsx)(rM,{battleLog:e},n)]})})},n)})}):(0,k.jsx)(N.xu,{textAlign:"center",mt:8,children:(0,k.jsx)(I.x,{children:"No logs available"})})}):(0,k.jsx)(N.xu,{textAlign:"center",mt:4,children:(0,k.jsx)(L.t,{onClick:g,children:"Connect Wallet"})})]})]})]})]})},rI=function(e){var n=e.battleLog;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N.xu,{boxSize:"20px",marginTop:-6,marginLeft:-12,rounded:"full",zIndex:1,_groupHover:{cursor:"pointer"},"data-group":!0,children:(0,k.jsx)(R.z,{bg:"#C17109",rounded:"full",border:"4px solid #F48F0C",w:8,h:10,_groupHover:{bg:"#de8b08",borderColor:"#f9a50b"},children:(0,k.jsx)(rz.V,{})})}),(0,k.jsxs)(X.U,{justifyContent:"space-between",children:[(0,k.jsxs)(I.x,{as:"b",fontSize:16,className:rT().className,children:["Lost ",n.pastTroops-n.currentTroops," ",(0,ey._6)(n.pastTroops-n.currentTroops,"troop")]}),(0,k.jsxs)(E.g,{justifyContent:"center",spacing:"0",children:[(0,k.jsxs)(I.x,{fontSize:10,children:["(",n.controlPoint,")"]}),(0,k.jsxs)(X.U,{justifyContent:"space-between",children:[(0,k.jsx)(I.x,{children:n.pastTroops}),(0,k.jsx)(rN.m,{}),(0,k.jsx)(I.x,{as:"b",children:n.currentTroops})]})]})]}),(0,k.jsxs)(nO.r,{marginTop:4,marginBottom:4,h:"100px",templateRows:"repeat(1, 1fr)",templateColumns:"repeat(3, 1fr)",gap:4,children:[(0,k.jsxs)(E.g,{justifySelf:"center",spacing:"0",children:[(0,k.jsx)(I.x,{children:(0,ey.UJ)(n.entity1.name)?(0,ey.sC)(n.entity1.name):n.entity1.name}),(0,k.jsx)(nI.q,{src:eC.Z.translate(n.entity1.image).fixedWidth(64,64),size:"lg"})]}),(0,k.jsxs)(E.g,{justifySelf:"center",justifyContent:"center",children:[(0,k.jsx)(I.x,{marginBottom:-2,children:"ATTACK"}),(0,k.jsx)(rN.m,{})]}),(0,k.jsxs)(E.g,{justifySelf:"center",spacing:"0",children:[(0,k.jsx)(I.x,{children:(0,ey.UJ)(n.entity2.name)?(0,ey.sC)(n.entity2.name):n.entity2.name}),(0,k.jsx)(nI.q,{src:eC.Z.translate(n.entity2.image).fixedWidth(64,64),size:"lg"})]})]})]})},rE=function(e){var n=e.battleLog;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N.xu,{boxSize:"20px",marginTop:-6,marginLeft:-12,rounded:"full",zIndex:1,_groupHover:{cursor:"pointer"},"data-group":!0,children:(0,k.jsx)(R.z,{bg:"#C17109",rounded:"full",border:"4px solid #F48F0C",w:8,h:10,_groupHover:{bg:"#de8b08",borderColor:"#f9a50b"},children:(0,k.jsx)(rz.V,{})})}),(0,k.jsxs)(X.U,{justifyContent:"space-between",children:[(0,k.jsxs)(I.x,{as:"b",fontSize:16,children:["Lost ",n.pastTroops-n.currentTroops," ",(0,ey._6)(n.pastTroops-n.currentTroops,"troop")]}),(0,k.jsxs)(E.g,{justifyContent:"center",spacing:"0",children:[(0,k.jsxs)(I.x,{fontSize:10,children:["(",n.controlPoint,")"]}),(0,k.jsxs)(X.U,{justifyContent:"space-between",children:[(0,k.jsx)(I.x,{children:n.pastTroops}),(0,k.jsx)(rN.m,{}),(0,k.jsx)(I.x,{as:"b",children:n.currentTroops})]})]})]}),(0,k.jsxs)(nO.r,{marginTop:4,marginBottom:4,h:"100px",templateRows:"repeat(1, 1fr)",templateColumns:"repeat(3, 1fr)",gap:4,children:[(0,k.jsxs)(E.g,{justifySelf:"center",spacing:"0",children:[(0,k.jsx)(I.x,{children:(0,ey.UJ)(n.entity1.name)?(0,ey.sC)(n.entity1.name):n.entity1.name}),(0,k.jsx)(nI.q,{src:eC.Z.translate(n.entity1.image).fixedWidth(64,64),size:"lg"})]}),(0,k.jsxs)(E.g,{justifySelf:"center",justifyContent:"center",children:[(0,k.jsx)(I.x,{marginBottom:-2,children:"DEFEND"}),(0,k.jsx)(rN.m,{})]}),(0,k.jsxs)(E.g,{justifySelf:"center",spacing:"0",children:[(0,k.jsx)(I.x,{children:(0,ey.UJ)(n.entity2.name)?(0,ey.sC)(n.entity2.name):n.entity2.name}),(0,k.jsx)(nI.q,{src:eC.Z.translate(n.entity2.image).fixedWidth(64,64),size:"lg"})]})]})]})},rP=function(e){var n=e.battleLog;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N.xu,{boxSize:"20px",marginTop:-6,marginLeft:-12,rounded:"full",zIndex:1,_groupHover:{cursor:"pointer"},"data-group":!0,children:(0,k.jsx)(R.z,{bg:"#C17109",rounded:"full",border:"4px solid #F48F0C",w:8,h:10,_groupHover:{bg:"#de8b08",borderColor:"#f9a50b"},children:(0,k.jsx)(rN.m,{})})}),(0,k.jsxs)(X.U,{justifyContent:"space-between",children:[(0,k.jsxs)(I.x,{as:"b",fontSize:16,children:["Deployed ",n.currentTroops-n.pastTroops," ",(0,ey._6)(n.currentTroops-n.pastTroops,"troop")]}),(0,k.jsxs)(E.g,{justifyContent:"center",spacing:"0",children:[(0,k.jsxs)(I.x,{fontSize:10,children:["(",n.controlPoint,")"]}),(0,k.jsxs)(X.U,{justifyContent:"space-between",children:[(0,k.jsx)(I.x,{children:n.pastTroops}),(0,k.jsx)(rN.m,{}),(0,k.jsx)(I.x,{as:"b",children:n.currentTroops})]})]})]}),(0,k.jsxs)(nO.r,{marginTop:4,marginBottom:4,h:"100px",templateRows:"repeat(1, 1fr)",templateColumns:"repeat(3, 1fr)",gap:4,children:[(0,k.jsxs)(E.g,{justifySelf:"center",spacing:"0",children:[(0,k.jsx)(I.x,{children:(0,ey.UJ)(n.entity1.name)?(0,ey.sC)(n.entity1.name):n.entity1.name}),(0,k.jsx)(nI.q,{src:eC.Z.translate(n.entity1.image).fixedWidth(64,64),size:"lg"})]}),(0,k.jsxs)(E.g,{justifySelf:"center",justifyContent:"center",children:[(0,k.jsx)(I.x,{marginBottom:-2,children:"DEPLOY"}),(0,k.jsx)(rN.m,{})]}),(0,k.jsxs)(E.g,{justifySelf:"center",spacing:"0",children:[(0,k.jsx)(I.x,{children:(0,ey.UJ)(n.entity2.name)?(0,ey.sC)(n.entity2.name):n.entity2.name}),(0,k.jsx)(nI.q,{src:eC.Z.translate(n.entity2.image).fixedWidth(64,64),size:"lg"})]})]})]})},rH=function(e){var n=e.battleLog;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N.xu,{boxSize:"20px",marginTop:-6,marginLeft:-12,rounded:"full",zIndex:1,_groupHover:{cursor:"pointer"},"data-group":!0,children:(0,k.jsx)(R.z,{bg:"#C17109",rounded:"full",border:"4px solid #F48F0C",w:8,h:10,_groupHover:{bg:"#de8b08",borderColor:"#f9a50b"},children:(0,k.jsx)(rN.m,{})})}),(0,k.jsxs)(X.U,{justifyContent:"space-between",children:[(0,k.jsxs)(I.x,{as:"b",fontSize:16,children:["Delegated ",n.currentTroops-n.pastTroops," ",(0,ey._6)(n.currentTroops-n.pastTroops,"troop")]}),(0,k.jsx)(E.g,{justifyContent:"center",spacing:"0",children:(0,k.jsxs)(X.U,{justifyContent:"space-between",children:[(0,k.jsx)(I.x,{children:n.pastTroops}),(0,k.jsx)(rN.m,{}),(0,k.jsx)(I.x,{as:"b",children:n.currentTroops})]})})]}),(0,k.jsxs)(nO.r,{marginTop:4,marginBottom:4,h:"100px",templateRows:"repeat(1, 1fr)",templateColumns:"repeat(3, 1fr)",gap:4,children:[(0,k.jsxs)(E.g,{justifySelf:"center",spacing:"0",children:[(0,k.jsx)(I.x,{children:(0,ey.UJ)(n.entity1.name)?(0,ey.sC)(n.entity1.name):n.entity1.name}),(0,k.jsx)(nI.q,{src:eC.Z.translate(n.entity1.image).fixedWidth(64,64),size:"lg"})]}),(0,k.jsxs)(E.g,{justifySelf:"center",justifyContent:"center",children:[(0,k.jsx)(I.x,{marginBottom:-2,children:"DELEGATE"}),(0,k.jsx)(rN.m,{})]}),(0,k.jsxs)(E.g,{justifySelf:"center",spacing:"0",children:[(0,k.jsx)(I.x,{children:(0,ey.UJ)(n.entity2.name)?(0,ey.sC)(n.entity2.name):n.entity2.name}),(0,k.jsx)(nI.q,{src:eC.Z.translate(n.entity2.image).fixedWidth(64,64),size:"lg"})]})]})]})},rM=function(e){var n=e.battleLog;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N.xu,{boxSize:"20px",marginTop:-6,marginLeft:-12,rounded:"full",zIndex:1,_groupHover:{cursor:"pointer"},"data-group":!0,children:(0,k.jsx)(R.z,{bg:"#C17109",rounded:"full",border:"4px solid #F48F0C",w:8,h:10,_groupHover:{bg:"#de8b08",borderColor:"#f9a50b"},children:(0,k.jsx)(rN.m,{})})}),(0,k.jsxs)(X.U,{justifyContent:"space-between",children:[(0,k.jsxs)(I.x,{as:"b",fontSize:16,children:["Delegated ",n.currentTroops-n.pastTroops," ",(0,ey._6)(n.currentTroops-n.pastTroops,"troop")]}),(0,k.jsx)(E.g,{justifyContent:"center",spacing:"0",children:(0,k.jsxs)(X.U,{justifyContent:"space-between",children:[(0,k.jsx)(I.x,{children:n.pastTroops}),(0,k.jsx)(rN.m,{}),(0,k.jsx)(I.x,{as:"b",children:n.currentTroops})]})})]}),(0,k.jsxs)(nO.r,{marginTop:4,marginBottom:4,h:"100px",templateRows:"repeat(1, 1fr)",templateColumns:"repeat(3, 1fr)",gap:4,children:[(0,k.jsxs)(E.g,{justifySelf:"center",spacing:"0",children:[(0,k.jsx)(I.x,{children:(0,ey.UJ)(n.entity1.name)?(0,ey.sC)(n.entity1.name):n.entity1.name}),(0,k.jsx)(nI.q,{src:eC.Z.translate(n.entity1.image).fixedWidth(64,64),size:"lg"})]}),(0,k.jsxs)(E.g,{justifySelf:"center",justifyContent:"center",children:[(0,k.jsx)(I.x,{marginBottom:-2,children:"UNDELEGATE"}),(0,k.jsx)(rN.m,{})]}),(0,k.jsxs)(E.g,{justifySelf:"center",spacing:"0",children:[(0,k.jsx)(I.x,{children:(0,ey.UJ)(n.entity2.name)?(0,ey.sC)(n.entity2.name):n.entity2.name}),(0,k.jsx)(nI.q,{src:eC.Z.translate(n.entity2.image).fixedWidth(64,64),size:"lg"})]})]})]})},rL=function(e){var n=e.battleLog;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N.xu,{boxSize:"20px",marginTop:-6,marginLeft:-12,rounded:"full",zIndex:1,_groupHover:{cursor:"pointer"},"data-group":!0,children:(0,k.jsx)(R.z,{bg:"#C17109",rounded:"full",border:"4px solid #F48F0C",w:8,h:10,_groupHover:{bg:"#de8b08",borderColor:"#f9a50b"},children:(0,k.jsx)(rN.m,{})})}),(0,k.jsxs)(X.U,{justifyContent:"space-between",children:[(0,k.jsxs)(I.x,{as:"b",fontSize:16,children:["Adjusted ",n.currentTroops-n.pastTroops," ",(0,ey._6)(n.currentTroops-n.pastTroops,"troop")]}),(0,k.jsx)(E.g,{justifyContent:"center",spacing:"0",children:(0,k.jsxs)(X.U,{justifyContent:"space-between",children:[(0,k.jsx)(I.x,{children:n.pastTroops}),(0,k.jsx)(rN.m,{}),(0,k.jsx)(I.x,{as:"b",children:n.currentTroops})]})})]}),(0,k.jsxs)(nO.r,{marginTop:4,marginBottom:4,h:"100px",templateRows:"repeat(1, 1fr)",templateColumns:"repeat(3, 1fr)",gap:4,children:[(0,k.jsxs)(E.g,{justifySelf:"center",spacing:"0",children:[(0,k.jsx)(I.x,{children:(0,ey.UJ)(n.entity1.name)?(0,ey.sC)(n.entity1.name):n.entity1.name}),(0,k.jsx)(nI.q,{src:eC.Z.translate(n.entity1.image).fixedWidth(64,64),size:"lg"})]}),(0,k.jsxs)(E.g,{justifySelf:"center",justifyContent:"center",children:[(0,k.jsx)(I.x,{marginBottom:-2,children:"ADJUSTMENT"}),(0,k.jsx)(rN.m,{})]}),(0,k.jsxs)(E.g,{justifySelf:"center",spacing:"0",children:[(0,k.jsx)(I.x,{children:(0,ey.UJ)(n.entity2.name)?(0,ey.sC)(n.entity2.name):n.entity2.name}),(0,k.jsx)(nI.q,{src:eC.Z.translate(n.entity2.image).fixedWidth(64,64),size:"lg"})]})]})]})},rO=function(e){var n,t=e.isOpenBuildings,s=e.onCloseBuildings,r=e.buildingButtonRef,a=e.setElementToZoomTo,i=(0,w._)((0,C.useState)([]),2),o=i[0],l=i[1],c=["Bank","Alliance Center","Moongate","Barracks","Announcements","Battle Map","Market"],u=(n=(0,S._)(function(){return(0,_.__generator)(this,function(e){return l(c.map(function(e,n){return(0,k.jsx)(R.z,{style:{marginTop:"4px",marginLeft:"4px"},onClick:function(){return a(e)},variant:"outline",size:"sm",children:e})})),[2]})}),function(){return n.apply(this,arguments)});return(0,C.useEffect)(function(){u()},[]),(0,k.jsx)(rA.d,{isOpen:t,placement:"bottom",onClose:s,finalFocusRef:r,size:"xs",children:(0,k.jsxs)(rF.s,{children:[(0,k.jsx)(ee.o,{}),(0,k.jsx)($.x,{children:"Zoom to Building"}),(0,k.jsx)(en.f,{children:(0,k.jsx)(Z.M,{columns:{base:2,sm:3},w:{base:"300px",sm:"500px"},children:o})})]})})},rW=function(e){var n,t,s=e.onChange,r=e.firstRun,a=e.onFirstRun,i=(0,C.useContext)(eB),o=(i.config,i.game);i.user;var l=(0,er.C)(function(e){return e.user});(0,ek.eG)();var c=(0,w._)((0,eP.Z)(),2);c[0],c[1];var u=(0,C.useRef)(null),d=(0,w._)((0,C.useState)(""),2),h=d[0],p=d[1],f=(0,w._)((0,C.useState)({offsetX:0,offsetY:0,scale:1}),2),x=(f[0],f[1]),m=(0,w._)((0,C.useState)(1),2),g=m[0],y=m[1],b=(0,w._)((0,C.useState)(-906),2);b[0],b[1];var j=(0,w._)((0,C.useState)(-414),2);j[0],j[1];var v=(0,w._)((0,C.useState)(!1),2);v[0],v[1];var S=(0,w._)((0,C.useState)(!1),2),_=S[0],T=S[1],A=(0,w._)((0,C.useState)(!1),2),R=A[0],E=A[1],P=(0,w._)((0,C.useState)(!1),2),H=P[0],M=P[1],O=(0,w._)((0,C.useState)(!1),2),W=O[0],D=O[1],B=(0,w._)((0,C.useState)(!1),2),V=B[0],Z=B[1],U=(0,C.useRef)(null);(0,C.useRef)(null);var X=(0,F.q)(),q=X.isOpen,G=X.onOpen,K=X.onClose,Y=(0,F.q)(),Q=Y.isOpen,J=Y.onOpen,$=Y.onClose,ee=(0,F.q)(),en=ee.isOpen,et=ee.onOpen,es=ee.onClose,ea=(0,w._)((0,C.useState)(!1),2),ei=ea[0],eo=ea[1],el=(0,F.q)(),ec=el.isOpen,eu=el.onOpen,ed=el.onClose;(0,C.useEffect)(function(){u.current&&(0,u.current.zoomToElement)(h)},[h]);var eh=function(e,n){x({offsetX:e.state.positionX,offsetY:e.state.positionY,scale:e.state.scale})},ep={allianceCenter:{height:438,width:554,top:"7%",left:"55%"},townhall:{height:607,width:707,top:"13.25%",left:"36.25%"},academy:{height:792,width:744,top:"4%",left:"74%"},tavern:{height:573,width:725,top:"3%",left:"14%"},tavernSpin:{height:573,width:725,top:"3%",left:"14%"},water:{height:703,width:2880,top:"32%",left:"0%"},boat:{height:613,width:718,top:"33%",left:"2%"},ebisustatue:{height:542,width:279,top:"35%",left:"40%"},market:{height:545,width:793,top:"36.5%",left:"55%"},barracks:{height:579,width:832,top:"12.5%",left:"-0.5%"},swordsmen:{height:270,width:383,top:"22%",left:"14%"},flowers1:{height:251,width:229,top:"3%",left:"14%"},flowers2:{height:251,width:229,top:"3%",left:"14%"},flowers3:{height:251,width:229,top:"3%",left:"14%"},bank:{height:456,width:579,top:"%",left:"33%",x:444,y:444,scale:4},announcement:{height:243,width:206,top:"28%",left:"60%"},moongate:{height:482,width:443,top:"23%",left:"67%"},torii:{height:201,width:236,top:"6%",left:"0%"},pond:{height:311,width:783,top:"0%",left:"65%"},alliancecenter_label:{height:438,width:554,top:"0%",left:"0%"},announcementboard_label:{height:243,width:279,top:"28%",left:"60%"},moongate_label:{height:482,width:443,top:"23%",left:"67%"},academy_label:{height:792,width:744,top:"4%",left:"74%"},tavern_label:{height:573,width:725,top:"3%",left:"14%"},townhall_label:{height:607,width:707,top:"13%",left:"36%"},barracks_label:{height:579,width:832,top:"12.5%",left:"-0.5%"},fishmarket_label:{height:545,width:793,top:"36.5%",left:"55%"},bank_label:{height:456,width:579,top:"7%",left:"33%"}},ef=function(){E(!1),M(!1),D(!1),p("Alliance Center"),T(!0)},ex=function(){p("fancyMenu"),T(!1)},em=function(){T(!1),M(!1),D(!1),p("Barracks"),E(!0)},eg=function(){p("fancyMenu"),E(!1)},ey=function(){E(!1),T(!1),D(!1),p("Moongate"),M(!0)},eb=function(){p("fancyMenu"),M(!1)},ej=function(){E(!1),T(!1),M(!1),p("Market"),D(!0)},ev=function(){p("fancyMenu"),D(!1)},ew=(0,w._)((0,C.useState)(ep.allianceCenter.width),2),eS=(ew[0],ew[1]),e_=(0,w._)((0,C.useState)(ep.allianceCenter.height),2),eT=(e_[0],e_[1]),eA=(0,w._)((0,C.useState)(ep.allianceCenter.top),2),eF=eA[0];eA[1];var ez=(0,w._)((0,C.useState)(ep.allianceCenter.left),2),eN=ez[0];ez[1];var eR=(0,w._)((0,C.useState)(ep.townhall.width),2),eI=(eR[0],eR[1]),eE=(0,w._)((0,C.useState)(ep.townhall.height),2),eH=(eE[0],eE[1]),eM=(0,w._)((0,C.useState)(ep.townhall.top),2),eL=eM[0];eM[1];var eO=(0,w._)((0,C.useState)(ep.townhall.left),2),eW=eO[0];eO[1];var eV=(0,w._)((0,C.useState)(ep.tavern.width),2),eZ=(eV[0],eV[1]),eU=(0,w._)((0,C.useState)(ep.tavern.height),2),eX=(eU[0],eU[1]),eq=(0,w._)((0,C.useState)(ep.tavern.top),2),eG=eq[0];eq[1];var eK=(0,w._)((0,C.useState)(ep.tavern.left),2),eY=eK[0];eK[1];var eQ=(0,w._)((0,C.useState)(ep.academy.width),2),eJ=(eQ[0],eQ[1]),e$=(0,w._)((0,C.useState)(ep.academy.height),2),e0=(e$[0],e$[1]),e2=(0,w._)((0,C.useState)(ep.academy.top),2),e1=e2[0];e2[1];var e4=(0,w._)((0,C.useState)(ep.academy.left),2),e3=e4[0];e4[1];var e5=(0,w._)((0,C.useState)(ep.tavernSpin.width),2),e6=(e5[0],e5[1]),e8=(0,w._)((0,C.useState)(ep.tavernSpin.height),2),e7=(e8[0],e8[1]),e9=(0,w._)((0,C.useState)(ep.tavernSpin.top),2),ne=e9[0];e9[1];var nn=(0,w._)((0,C.useState)(ep.tavernSpin.left),2),nt=nn[0];nn[1];var ns=(0,w._)((0,C.useState)(ep.flowers1.width),2),nr=(ns[0],ns[1]),na=(0,w._)((0,C.useState)(ep.flowers1.height),2),ni=(na[0],na[1]),no=(0,w._)((0,C.useState)(ep.flowers1.top),2);no[0],no[1];var nl=(0,w._)((0,C.useState)(ep.flowers1.left),2);nl[0],nl[1];var nc=(0,w._)((0,C.useState)(ep.flowers2.width),2),nu=(nc[0],nc[1]),nd=(0,w._)((0,C.useState)(ep.flowers2.height),2),nh=(nd[0],nd[1]),np=(0,w._)((0,C.useState)(ep.flowers2.top),2);np[0],np[1];var nf=(0,w._)((0,C.useState)(ep.flowers2.left),2);nf[0],nf[1];var nx=(0,w._)((0,C.useState)(ep.flowers3.width),2),nm=(nx[0],nx[1]),ng=(0,w._)((0,C.useState)(ep.flowers3.height),2),ny=(ng[0],ng[1]),nb=(0,w._)((0,C.useState)(ep.flowers3.top),2);nb[0],nb[1];var nj=(0,w._)((0,C.useState)(ep.flowers3.left),2);nj[0],nj[1];var nv=(0,w._)((0,C.useState)(ep.bank.width),2),nw=(nv[0],nv[1]),nk=(0,w._)((0,C.useState)(ep.bank.height),2),nC=(nk[0],nk[1]),nS=(0,w._)((0,C.useState)(ep.bank.top),2),n_=nS[0];nS[1];var nT=(0,w._)((0,C.useState)(ep.bank.left),2),nA=nT[0];nT[1];var nz=(0,w._)((0,C.useState)(ep.announcement.width),2),nN=(nz[0],nz[1]),nI=(0,w._)((0,C.useState)(ep.announcement.height),2),nP=(nI[0],nI[1]),nM=(0,w._)((0,C.useState)(ep.announcement.top),2),nL=nM[0];nM[1];var nO=(0,w._)((0,C.useState)(ep.announcement.left),2),nW=nO[0];nO[1];var nD=(0,w._)((0,C.useState)(ep.water.width),2),nB=(nD[0],nD[1]),nV=(0,w._)((0,C.useState)(ep.water.height),2),nZ=(nV[0],nV[1]),nU=(0,w._)((0,C.useState)(ep.water.top),2),nX=nU[0];nU[1];var nq=(0,w._)((0,C.useState)(ep.water.left),2),nG=nq[0];nq[1];var nK=(0,w._)((0,C.useState)(ep.barracks.width),2),nY=(nK[0],nK[1]),nQ=(0,w._)((0,C.useState)(ep.barracks.height),2),nJ=(nQ[0],nQ[1]),n$=(0,w._)((0,C.useState)(ep.barracks.top),2),n0=n$[0];n$[1];var n2=(0,w._)((0,C.useState)(ep.barracks.left),2),n1=n2[0];n2[1];var n4=(0,w._)((0,C.useState)(ep.market.width),2),n3=(n4[0],n4[1]),n5=(0,w._)((0,C.useState)(ep.market.height),2),n6=(n5[0],n5[1]),n8=(0,w._)((0,C.useState)(ep.market.top),2),n7=n8[0];n8[1];var n9=(0,w._)((0,C.useState)(ep.market.left),2),te=n9[0];n9[1];var tn=(0,w._)((0,C.useState)(ep.boat.width),2),tt=(tn[0],tn[1]),ts=(0,w._)((0,C.useState)(ep.boat.height),2),tr=(ts[0],ts[1]),ta=(0,w._)((0,C.useState)(ep.boat.top),2),ti=ta[0];ta[1];var to=(0,w._)((0,C.useState)(ep.boat.left),2),tl=to[0];to[1];var tc=(0,w._)((0,C.useState)(ep.ebisustatue.width),2),tu=(tc[0],tc[1]),td=(0,w._)((0,C.useState)(ep.ebisustatue.height),2),th=(td[0],td[1]),tp=(0,w._)((0,C.useState)(ep.ebisustatue.top),2),tf=tp[0];tp[1];var tx=(0,w._)((0,C.useState)(ep.ebisustatue.left),2),tm=tx[0];tx[1];var ty=(0,w._)((0,C.useState)(ep.swordsmen.width),2),tb=(ty[0],ty[1]),tj=(0,w._)((0,C.useState)(ep.swordsmen.height),2),tv=(tj[0],tj[1]),tw=(0,w._)((0,C.useState)(ep.swordsmen.top),2),tk=tw[0];tw[1];var tC=(0,w._)((0,C.useState)(ep.swordsmen.left),2),tS=tC[0];tC[1];var t_=(0,w._)((0,C.useState)(ep.moongate.width),2),tT=(t_[0],t_[1]),tA=(0,w._)((0,C.useState)(ep.moongate.height),2),tF=(tA[0],tA[1]),tz=(0,w._)((0,C.useState)(ep.moongate.top),2),tR=tz[0];tz[1];var tI=(0,w._)((0,C.useState)(ep.moongate.left),2),tE=tI[0];tI[1];var tH=(0,w._)((0,C.useState)(ep.torii.width),2),tM=(tH[0],tH[1]),tL=(0,w._)((0,C.useState)(ep.torii.height),2),tO=(tL[0],tL[1]),tW=(0,w._)((0,C.useState)(ep.torii.top),2),tD=tW[0];tW[1];var tB=(0,w._)((0,C.useState)(ep.torii.left),2),tV=tB[0];tB[1];var tZ=(0,w._)((0,C.useState)(ep.pond.width),2),tU=(tZ[0],tZ[1]),tX=(0,w._)((0,C.useState)(ep.pond.height),2),tq=(tX[0],tX[1]),tG=(0,w._)((0,C.useState)(ep.pond.top),2),tK=tG[0];tG[1];var tY=(0,w._)((0,C.useState)(ep.pond.left),2),tQ=tY[0];tY[1];var tJ=(0,w._)((0,C.useState)(ep.alliancecenter_label.left),2),t$=(tJ[0],tJ[1]),t0=(0,w._)((0,C.useState)(ep.alliancecenter_label.top),2),t2=(t0[0],t0[1]),t1=(0,w._)((0,C.useState)(ep.alliancecenter_label.width),2),t4=t1[0];t1[1];var t3=(0,w._)((0,C.useState)(ep.alliancecenter_label.height),2),t5=t3[0];t3[1];var t6=(0,w._)((0,C.useState)(ep.townhall_label.left),2),t8=(t6[0],t6[1]),t9=(0,w._)((0,C.useState)(ep.townhall_label.top),2),se=(t9[0],t9[1]),sn=(0,w._)((0,C.useState)(ep.townhall_label.width),2);sn[0],sn[1];var st=(0,w._)((0,C.useState)(ep.townhall_label.height),2);st[0],st[1];var ss=(0,w._)((0,C.useState)(ep.tavern_label.left),2),sr=(ss[0],ss[1]),sa=(0,w._)((0,C.useState)(ep.tavern_label.top),2),si=(sa[0],sa[1]),so=(0,w._)((0,C.useState)(ep.tavern_label.width),2);so[0],so[1];var sl=(0,w._)((0,C.useState)(ep.tavern_label.height),2);sl[0],sl[1];var sc=(0,w._)((0,C.useState)(ep.academy_label.left),2),su=(sc[0],sc[1]),sd=(0,w._)((0,C.useState)(ep.academy_label.top),2),sh=(sd[0],sd[1]),sp=(0,w._)((0,C.useState)(ep.academy_label.width),2);sp[0],sp[1];var sf=(0,w._)((0,C.useState)(ep.academy_label.height),2);sf[0],sf[1];var sx=(0,w._)((0,C.useState)(ep.announcementboard_label.left),2),sm=(sx[0],sx[1]),sg=(0,w._)((0,C.useState)(ep.announcementboard_label.top),2),sy=(sg[0],sg[1]),sb=(0,w._)((0,C.useState)(ep.announcementboard_label.width),2);sb[0],sb[1];var sj=(0,w._)((0,C.useState)(ep.announcementboard_label.height),2);sj[0],sj[1];var sv=(0,w._)((0,C.useState)(ep.fishmarket_label.left),2),sw=(sv[0],sv[1]),sk=(0,w._)((0,C.useState)(ep.fishmarket_label.top),2),sC=(sk[0],sk[1]),sS=(0,w._)((0,C.useState)(ep.fishmarket_label.width),2);sS[0],sS[1];var s_=(0,w._)((0,C.useState)(ep.fishmarket_label.height),2);s_[0],s_[1];var sT=(0,w._)((0,C.useState)(ep.moongate_label.left),2),sA=(sT[0],sT[1]),sF=(0,w._)((0,C.useState)(ep.moongate_label.top),2),sz=(sF[0],sF[1]),sN=(0,w._)((0,C.useState)(ep.moongate_label.width),2);sN[0],sN[1];var sR=(0,w._)((0,C.useState)(ep.moongate_label.height),2);sR[0],sR[1];var sI=(0,w._)((0,C.useState)(ep.bank_label.left),2),sE=(sI[0],sI[1]),sP=(0,w._)((0,C.useState)(ep.bank_label.top),2),sH=(sP[0],sP[1]),sM=(0,w._)((0,C.useState)(ep.bank_label.width),2);sM[0],sM[1];var sL=(0,w._)((0,C.useState)(ep.bank_label.height),2);sL[0],sL[1];var sO=(0,w._)((0,C.useState)(ep.barracks_label.left),2),sW=(sO[0],sO[1]),sD=(0,w._)((0,C.useState)(ep.barracks_label.top),2),sB=(sD[0],sD[1]),sV=(0,w._)((0,C.useState)(ep.barracks_label.width),2);sV[0],sV[1];var sZ=(0,w._)((0,C.useState)(ep.barracks_label.height),2);sZ[0],sZ[1];var sU=(0,w._)((0,C.useState)(!1),2),sX=sU[0],sq=sU[1];(0,C.useEffect)(function(){1!=g&&(eS(ep.allianceCenter.width*g),eT(ep.allianceCenter.height*g),eI(ep.townhall.width*g),eH(ep.townhall.height*g),eZ(ep.tavern.width*g),eX(ep.tavern.height*g),eJ(ep.academy.width*g),e0(ep.academy.height*g),e6(ep.tavernSpin.width*g),e7(ep.tavernSpin.height*g),nr(ep.flowers1.width*g),ni(ep.flowers1.height*g),nu(ep.flowers2.width*g),nh(ep.flowers2.height*g),nm(ep.flowers3.width*g),ny(ep.flowers3.height*g),nw(ep.bank.width*g),nC(ep.bank.height*g),nN(ep.announcement.width*g),nP(ep.announcement.height*g),nB(ep.water.width*g),nZ(ep.water.height*g),nY(ep.barracks.width*g),nJ(ep.barracks.height*g),n3(ep.market.width*g),n6(ep.market.height*g),tt(ep.boat.width*g),tr(ep.boat.height*g),tu(ep.ebisustatue.width*g),th(ep.ebisustatue.height*g),tb(ep.swordsmen.width*g),tv(ep.swordsmen.height*g),tT(ep.moongate.width*g),tF(ep.moongate.height*g),tM(ep.torii.width*g),tO(ep.torii.height*g),tU(ep.pond.width*g),tq(ep.pond.height*g),t$(ep.alliancecenter_label.width*g),t2(ep.alliancecenter_label.height*g),t8(ep.townhall_label.width*g),se(ep.townhall_label.height*g),sr(ep.tavern_label.width*g),si(ep.tavern_label.height*g),su(ep.academy_label.width*g),sh(ep.academy_label.height*g),sE(ep.bank_label.width*g),sH(ep.bank_label.height*g),sW(ep.barracks_label.width*g),sB(ep.barracks_label.height*g),sA(ep.moongate_label.width*g),sz(ep.moongate_label.height*g),sw(ep.fishmarket_label.width*g),sC(ep.fishmarket_label.height*g),sm(ep.announcementboard_label.width*g),sy(ep.announcementboard_label.height*g))},[g]),(0,C.useEffect)(function(){window.addEventListener("resize",function(){window.innerWidth<2880&&y(window.innerWidth/2880)})}),(0,C.useEffect)(function(){y(window.innerWidth/2880)},[]),(0,C.useEffect)(function(){if(!r){var e=setTimeout(function(){J(),a()},2e3);return function(){return clearTimeout(e)}}},[]),(0,C.useEffect)(function(){(null==u?void 0:u.current)&&sX&&V&&p("fancyMenu")},[null==u?void 0:u.current,sX,V]);var sG=(0,nR.S)({base:{scale:.4,initialPosition:{x:-370,y:-22},minScale:.15},sm:{scale:.5,initialPosition:{x:-439,y:-36},minScale:.2},md:{scale:.52,initialPosition:{x:-317,y:-42},minScale:.52},lg:{scale:.51,initialPosition:{x:-130,y:20},minScale:.51},xl:{scale:.55,initialPosition:{x:-130,y:20},minScale:.55},"2xl":{scale:.7,initialPosition:{x:-60,y:-105},minScale:.7},xxl:{scale:1,initialPosition:{x:-20,y:-35},minScale:1.1}});(0,C.useEffect)(function(){sq(!0)},[l.mitamaBalance]);var sK=(0,F.q)(),sY=sK.isOpen,sQ=sK.onOpen,sJ=sK.onClose,s$=(0,F.q)(),s0=s$.isOpen,s2=s$.onOpen,s1=s$.onClose,s4=(0,C.useCallback)(function(e){if("battleMap"===e){var n=[eD.pf.IN_MAINTENANCE,eD.pf.NOT_STARTED];if(!(null==o?void 0:o.state)||n.includes(null==o?void 0:o.state)){sQ();return}if((null==o?void 0:o.state)&&o.state===eD.pf.RESET){s2();return}}if("barracks"===e){em();return}s(e)},[o]);return(0,k.jsxs)("section",{children:[(0,k.jsxs)(N.xu,{position:"relative",h:"calc(100vh - 74px)",backgroundImage:eC.Z.translate("/img/ryoshi-dynasties/village/background-".concat(l.theme,".png")).convert(),backgroundSize:"cover",children:[sX&&(0,k.jsx)(nE.d$,{ref:u,onZoom:eh,onPinching:eh,onPinchingStop:eh,onPanningStop:eh,initialPositionX:null==sG?void 0:null===(n=sG.initialPosition)||void 0===n?void 0:n.x,initialPositionY:null==sG?void 0:null===(t=sG.initialPosition)||void 0===t?void 0:t.y,disablePadding:!0,initialScale:null==sG?void 0:sG.scale,minScale:null==sG?void 0:sG.minScale,children:function(e){return(0,k.jsx)(C.Fragment,{children:(0,k.jsx)(nE.Uv,{wrapperStyle:{height:"100%",width:"100%",objectFit:"cover"},children:(0,k.jsxs)(tN.Z,{gridHeight:"50px 1fr 50px",gridWidth:"50px 1fr 50px",children:[(0,k.jsx)(N.xu,{as:"img",src:eC.Z.translate("/img/battle-bay/mapImages/background.png").custom({width:2880,height:1620}),maxW:"none",useMap:"#image-map",className:"".concat(nH().mapImageArea),id:"fancyMenu",onLoad:function(){return Z(!0)}}),(0,k.jsx)("map",{name:"image-map"}),(0,k.jsxs)(N.xu,{id:"Alliance Center",className:nH().enlarge,style:{position:"absolute",marginTop:eF,marginLeft:eN,zIndex:"9"},onClick:function(){return ef()},children:[(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/mapImages/alliancecenter_day.png").convert()}),(0,k.jsx)(N.xu,{className:nH().enlarge,style:{position:"absolute",marginTop:t4,marginLeft:t5,zIndex:"20"},children:(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/building_labels/alliancecenter_label.png").convert()})})]}),(0,k.jsx)(N.xu,{style:{position:"absolute",marginTop:eL,marginLeft:eW,zIndex:"9"},children:(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/mapImages/townhall.png").convert()})}),(0,k.jsx)(N.xu,{style:{position:"absolute",marginTop:eG,marginLeft:eY,zIndex:"9"},children:(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/mapImages/tavern.png").convert()})}),(0,k.jsx)(N.xu,{style:{position:"absolute",marginTop:e1,marginLeft:e3,zIndex:"9"},children:(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/mapImages/academy.png").convert()})}),(0,k.jsx)(N.xu,{style:{position:"absolute",marginTop:ne,marginLeft:nt,zIndex:"9",pointerEvents:"none"},children:(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/mapImages/tavern_turbine.apng").convert()})}),(0,k.jsx)(N.xu,{id:"Battle Map",className:nH().enlarge,style:{position:"absolute",marginTop:ti,marginLeft:tl,zIndex:"9"},onClick:function(){return s4("battleMap")},children:(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/mapImages/boat_day.apng").convert()})}),(0,k.jsx)(N.xu,{style:{position:"absolute",marginTop:tf,marginLeft:tm,zIndex:"9"},children:(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/mapImages/ebisustatue.png").convert()})}),(0,k.jsx)(N.xu,{id:"Market",className:nH().enlarge,onClick:function(){return ej()},style:{position:"absolute",marginTop:n7,marginLeft:te,zIndex:"9"},children:(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/mapImages/fishmarket_day.apng").convert()})}),(0,k.jsx)(N.xu,{style:{position:"absolute",marginTop:nX,marginLeft:nG,zIndex:"8"},children:(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/mapImages/water.png").custom({width:2880,height:703})})}),(0,k.jsx)(N.xu,{id:"Bank",className:nH().enlarge,style:{position:"absolute",marginTop:n_,marginLeft:nA,zIndex:"8"},onClick:function(){return s("bank")},children:(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/mapImages/bank_day.png").convert()})}),(0,k.jsx)(N.xu,{id:"Announcements",className:nH().enlarge,style:{position:"absolute",marginTop:nL,marginLeft:nW,zIndex:"9"},onClick:J,children:(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/mapImages/announcement.png").convert()})}),(0,k.jsx)(N.xu,{id:"Barracks",className:nH().enlarge,style:{position:"absolute",marginTop:n0,marginLeft:n1,zIndex:"9"},onClick:function(){return s4("barracks")},children:(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/mapImages/barracks.png").convert()})}),(0,k.jsx)(N.xu,{className:nH().enlarge,style:{position:"absolute",marginTop:tk,marginLeft:tS,zIndex:"9",pointerEvents:"none"},children:(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/mapImages/swordsmen.apng").convert()})}),(0,k.jsx)(N.xu,{id:"Moongate",className:nH().enlarge,style:{position:"absolute",marginTop:tR,marginLeft:tE,zIndex:"9"},onClick:function(){return ey()},children:(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/mapImages/moongate_day.apng").convert(),onClick:function(){return ey()}})}),(0,k.jsx)(N.xu,{id:"torii",className:nH().enlarge,style:{position:"absolute",marginTop:tD,marginLeft:tV,zIndex:"8"},onClick:function(){return s("lands")},children:(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/mapImages/torii.png").convert()})}),(0,k.jsx)(N.xu,{style:{position:"absolute",marginTop:tK,marginLeft:tQ,zIndex:"8"},children:(0,k.jsx)("img",{src:eC.Z.translate("/img/battle-bay/mapImages/pond1.apng").convert()})})]})})})}}),!_&&!R&&!H&&!W&&(0,k.jsx)(rk,{onOpenBuildings:G,onOpenDailyCheckin:et,onOpenBattleLog:eu,forceRefresh:ei}),(0,k.jsx)(N.xu,{position:"absolute",top:0,left:0,p:4,children:(0,k.jsxs)(z.k,{direction:"row",justify:"space-between",children:[_?(0,k.jsx)(t7,{onClose:function(){return ex()}}):(0,k.jsx)(k.Fragment,{}),R?(0,k.jsx)(nF,{onBack:function(){return eg()}}):(0,k.jsx)(k.Fragment,{}),H?(0,k.jsx)(rb,{onBack:function(){return eb()}}):(0,k.jsx)(k.Fragment,{}),W?(0,k.jsx)(rw,{onBack:function(){return ev()}}):(0,k.jsx)(k.Fragment,{})]})})]}),(0,k.jsx)(rm,{isOpen:Q,onClose:$,onOpenDailyCheckin:et}),(0,k.jsx)(tg,{isOpen:en,onClose:es,forceRefresh:function(){eo(!ei)}}),(0,k.jsx)(rR,{isOpen:ec,onClose:ed}),(0,k.jsx)(rO,{isOpenBuildings:q,onCloseBuildings:K,buildingButtonRef:U,setElementToZoomTo:p}),(0,k.jsx)(L.x,{isOpen:sY,onClose:sJ,title:"Coming Soon",children:(0,k.jsx)(tP.kQ,{children:(0,k.jsx)(I.x,{children:"This area is currently unavailable, either due to maintenance, or a game that has yet to be started. Check back again soon!"})})}),(0,k.jsx)(L.x,{isOpen:s0,onClose:s1,title:"Game Ended",children:(0,k.jsx)(tP.kQ,{children:(0,k.jsx)(I.x,{children:"The current game has ended and rewards are being calculated. A new game will begin shortly!"})})})]})};(0,ek.eG)();var rD=function(e){var n,t,s,r=e.initialRdConfig,a=e.children,i=(0,nG.I0)(),o=(0,ec.useRouter)(),l=(0,er.C)(function(e){return e.user}),c=(0,ea.useQueryClient)(),u=(0,w._)((0,C.useState)(),2);u[0],u[1];var d=(0,w._)((0,C.useState)(),2);d[0],d[1];var h=(0,F.q)(),p=h.isOpen,f=(h.onOpen,h.onClose),x=(0,F.q)();x.isOpen,x.onOpen,x.onClose;var m=(0,er.C)(function(e){return e.appInitialize.authInitFinished}),g=(0,w._)((0,eP.Z)(),2),y=(g[0],g[1]),b=(0,w._)((0,C.useState)(null),2),j=b[0],v=b[1],T=(0,ea.useQuery)(["RyoshiDynastiesContext"],function(){return eo.s.withoutKey().ryoshiDynasties.getGlobalContext()},{initialData:null!=r?r:void 0,refetchInterval:6e4,refetchOnWindowFocus:!1}),A=T.data,z=T.status,R=T.error,P=(0,ea.useQuery)(["RyoshiDynastiesUserContext",l.address],(0,S._)(function(){return(0,_.__generator)(this,function(e){switch(e.label){case 0:if(!j)return[3,2];return[4,eo.s.withoutKey().ryoshiDynasties.getUserContext(l.address,j)];case 1:return[2,e.sent()];case 2:throw"Please sign message in wallet to continue"}})}),{refetchOnWindowFocus:!1,enabled:!!l.address&&!!j,refetchInterval:6e4}),M=P.data,O=P.refetch,W=(0,ea.useQuery)(["RyoshiDynastiesGameContext",l.address],function(){return eo.s.withoutKey().ryoshiDynasties.getGameContext()},{refetchOnWindowFocus:!1,refetchInterval:6e4}),D=W.data,B=W.refetch,V=(n=(0,S._)(function(){return(0,_.__generator)(this,function(e){return c.invalidateQueries(["RyoshiDynastiesUserContext",l.address]),O(),[2]})}),function(){return n.apply(this,arguments)}),Z=(t=(0,S._)(function(){return(0,_.__generator)(this,function(e){return c.invalidateQueries(["RyoshiDynastiesGameContext"]),B(),[2]})}),function(){return t.apply(this,arguments)}),U=(s=(0,S._)(function(){return(0,_.__generator)(this,function(e){return l.needsOnboard?new nX.Z().startOnboarding():l.address?l.correctChain||i((0,nq.Ns)()):i((0,nq.Yn)()),[2]})}),function(){return s.apply(this,arguments)}),X=(0,C.useCallback)(function(){m&&!l.address&&(l.address?f():o.push("/"))},[l.address]),q=(0,C.useMemo)(function(){return(0,k.jsx)(rW,{onChange:function(){},firstRun:!1,onFirstRun:function(){}})},[]);(0,C.useEffect)(function(){function e(){return(e=(0,S._)(function(){var e,n;return(0,_.__generator)(this,function(t){switch(t.label){case 0:if(n=null===(e=(0,eH.ms)())||void 0===e?void 0:e.signature)return[3,2];return[4,y()];case 1:n=t.sent().signature,t.label=2;case 2:return v(n),[2]}})})).apply(this,arguments)}l.address?function(){return e.apply(this,arguments)}():v(null)},[l.address]);var G=(0,w._)((0,C.useState)(!1),2);G[0],G[1];var Y=(0,w._)((0,C.useState)(!1),2);return Y[0],Y[1],(0,k.jsx)(k.Fragment,{children:"loading"===z?(0,k.jsxs)(k.Fragment,{children:[q,(0,k.jsx)(L.x,{isOpen:!0,title:"Initializing Game...",children:(0,k.jsx)(H.M,{children:(0,k.jsx)(N.xu,{p:8,children:(0,k.jsx)(K.$,{})})})})]}):"error"===z?(0,k.jsxs)(k.Fragment,{children:[q,(0,k.jsx)(L.x,{isOpen:!0,title:"Error",children:(0,k.jsx)(H.M,{children:(0,k.jsxs)(N.xu,{p:4,textAlign:"center",children:[(0,k.jsx)(I.x,{children:"Whoops! Looks like something went wrong attempting to retrieve the latest game configuration. Please refresh the page and try again. If the issue persists, please contact support."}),(0,k.jsxs)(I.x,{mt:8,fontSize:"xs",children:["Error: ",R.message]})]})})})]}):A?(0,k.jsxs)(eB.Provider,{value:{config:A,user:M,refreshUser:V,game:D,refreshGame:Z},children:[(0,k.jsx)(k.Fragment,{children:a}),(0,k.jsx)(L.x,{isOpen:p,onClose:X,title:"Ryoshi Dynasties Beta",children:(0,k.jsxs)(E.g,{p:4,spacing:8,fontSize:"sm",textAlign:"center",children:[(0,k.jsx)(I.x,{fontSize:"md",children:"Welcome to Ryoshi Dynasties! A captivating gamified DAO experience, combining NFT marketplace, battles, and strategic gameplay. Build your dynasty, collect rare NFTs, and earn rewards."}),m?(0,k.jsxs)(k.Fragment,{children:[l.address&&l.correctChain?(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(H.M,{children:(0,k.jsx)(L.t,{stickyIcon:!0,onClick:f,children:"Play Now"})})}):l.address&&!l.correctChain?(0,k.jsx)(H.M,{children:(0,k.jsx)(L.t,{stickyIcon:!0,onClick:U,children:"Switch Network"})}):(0,k.jsx)(H.M,{children:(0,k.jsx)(L.t,{stickyIcon:!0,onClick:U,children:"Connect"})}),(0,k.jsx)(I.x,{fontSize:"sm",children:"Users wishing to visit the Ebisu's Bay marketplace experience can still do so by using the links at the top of the page."})]}):(0,k.jsx)(H.M,{children:(0,k.jsx)(K.$,{})})]})})]}):(0,k.jsxs)(k.Fragment,{children:[q,(0,k.jsxs)(L.x,{isOpen:!0,title:"Error",children:[(0,k.jsx)(H.M,{children:(0,k.jsx)(N.xu,{p:4,textAlign:"center",children:(0,k.jsx)(I.x,{children:"Whoops! Looks like something went wrong attempting to retrieve the latest game configuration. Please refresh the page and try again. If the issue persists, please contact support."})})}),(0,k.jsx)(tP.Ni,{children:(0,k.jsx)(H.M,{children:(0,k.jsx)(L.t,{stickyIcon:!0,onClick:function(){o.reload()},children:"Refresh"})})})]})]})})},rB=function(e){var n=e.children,t=(0,w._)((0,C.useState)([]),2);t[0],t[1];var s=(0,w._)((0,C.useState)(!0),2),r=(s[0],s[1]),a=(0,w._)((0,C.useState)({}),2),i=a[0],o=a[1];return(0,C.useEffect)(function(){var e;(e=(0,S._)(function(){var e,n,t,s,a,i,l,c;return(0,_.__generator)(this,function(u){try{e={},n=!0,t=!1,s=void 0;try{for(a=rV[Symbol.iterator]();!(n=(i=a.next()).done);n=!0)l=i.value,(c=new Image).src=l,e[l]=c}catch(e){t=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw s}}o(e),r(!1)}catch(e){console.error("Failed to preload images:",e)}return[2]})}),function(){return e.apply(this,arguments)})()},[]),(0,k.jsx)(tE.Provider,{value:{images:i,getPreloadedImage:function(e){var n=Object.entries(i).find(function(n){var t=(0,w._)(n,2),s=t[0];return t[1],s===e});return n?n[1].src:e}},children:(0,k.jsx)(k.Fragment,{children:n})})},rV=[eC.Z.translate("/img/ryoshi-dynasties/battle/world-map-background.jpg").custom({width:2880,height:2021}),"/img/battle-bay/imgs/water.png","/img/battle-bay/imgs/the_conflagration.gif","/img/battle-bay/imgs/volcanic_reach.png","/img/battle-bay/imgs/pirate_ship.gif","/img/battle-bay/imgs/clutch_of_fukurokujo.gif","/img/battle-bay/imgs/orcunheim.gif","/img/battle-bay/imgs/felisgarde.gif","/img/battle-bay/imgs/ebisusbay.gif","/img/battle-bay/imgs/iron_bastion.png","/img/battle-bay/imgs/dragon_roost.png","/img/battle-bay/imgs/ancestors_final_rest.gif","/img/battle-bay/imgs/nyar_spire.gif","/img/battle-bay/imgs/ice_shrine.png","/img/battle-bay/imgs/omoikanes_athenaeum.png","/img/battle-bay/imgs/hunters_retreat.png","/img/battle-bay/imgs/mitamic_fissure.gif","/img/battle-bay/imgs/seashrine.png","/img/battle-bay/imgs/classy_keep.gif","/img/battle-bay/imgs/venoms_descent.gif","/img/battle-bay/imgs/infinite_ignition.gif","/img/battle-bay/imgs/verdant_forest.png","/img/battle-bay/imgs/explosion.png",eC.Z.translate("/img/battle-bay/mapImages/boat_day.apng").convert(),eC.Z.translate("/img/ryoshi-dynasties/announcements/ballies2.webp").convert(),eC.Z.translate("/img/ryoshi-dynasties/announcements/ballies-sm.webp").convert()],rZ=t(78668),rU=function(e){var n,t=e.initialRdConfig,s=(0,er.C)(function(e){return e.user}),r=(0,w._)((0,C.useState)("village"),2),a=r[0],i=r[1],o=(0,w._)((0,C.useState)(),2),l=o[0],c=o[1],u=(0,w._)((0,C.useState)(!1),2),d=u[0],h=u[1],p=(0,w._)((0,C.useState)(null),2),f=p[0],x=p[1],m=(0,C.useRef)(null),g=function(){i(null!=l?l:"village")};return(0,C.useEffect)(function(){x(m)},[m]),(0,k.jsx)(rf.Provider,{value:{ref:f,setRef:x},children:(0,k.jsx)(rD,{initialRdConfig:t,children:(0,k.jsx)(rB,{children:(0,k.jsx)(N.xu,{ref:f,position:"relative",children:"barracks"===a?(0,k.jsx)(nF,{onBack:g}):"battleMap"===a?(0,k.jsx)(tH,{onChange:g}):"bank"===a?(0,k.jsx)(s6,{address:null!==(n=s.address)&&void 0!==n?n:"",onBack:g}):"allianceCenter"===a?(0,k.jsx)(t7,{onClose:g}):"academy"===a?(0,k.jsx)(se,{onBack:g}):"lands"===a?(0,k.jsx)(rZ.Z,{onBack:g}):(!a||"village"===a)&&(0,k.jsx)(rW,{onChange:function(e){c(a),i(e)},firstRun:d,onFirstRun:function(){return h(!0)}})})})})})}},1754:function(e,n,t){"use strict";var s=t(30137),r=t(70655),a=t(14416),i=t(22920),o=t(28054),l=t(47263),c=t(41872);n.Z=function(){var e,n=(0,a.I0)(),t=(0,c.C)(function(e){return e.user});return[(e=(0,s._)(function(e){var s;return(0,r.__generator)(this,function(r){switch(r.label){case 0:if(!t.address)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e()];case 2:return r.sent(),[3,4];case 3:return(s=r.sent()).data?i.Am.error(s.data.message):s.message?i.Am.error(s.message):(console.log(s),i.Am.error("Unknown Error")),[3,4];case 4:return[3,6];case 5:t.needsOnboard?new o.Z().startOnboarding():t.address?t.correctChain||n((0,l.Ns)()):n((0,l.Yn)()),r.label=6;case 6:return[2]}})}),function(n){return e.apply(this,arguments)})]}},27465:function(e,n,t){"use strict";t.d(n,{$S:function(){return x},XN:function(){return f}});var s=t(3471),r=t(30137),a=t(70655),i=t(69301),o=t(39680),l=t(79790),c=(0,i.eG)(),u=o.Y.create(c.urls.api);function d(e,n){return h.apply(this,arguments)}function h(){return(h=(0,r._)(function(e,n){return(0,a.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,u.get("prices")];case 1:return[2,t.sent().data.prices.find(function(t){return t.chain===e&&(!n||(0,l.w4)(t.currency,n))})];case 2:throw t.sent();case 3:return[2]}})})).apply(this,arguments)}var p=(0,i.eG)(),f=function(e){return(0,s.useQuery)(["GlobalPrice",e],function(){return d(Number(e))},{staleTime:2})},x=function(e){var n=p.contracts.fortune;return(0,s.useQuery)(["GlobalPrice",e,n],function(){return d(Number(e),n)},{staleTime:2})}},16944:function(e){e.exports={leader_flag:"style_leader_flag__l0GMi",background:"style_background__2US45",enlarge:"style_enlarge__o4O7R",water:"style_water__pQ1Q_",the_conflagration:"style_the_conflagration__I2kAB",volcanic_reach:"style_volcanic_reach__eRAdN",buccaneer_beach:"style_buccaneer_beach__yVoyy",clutch_of_fukurokuju:"style_clutch_of_fukurokuju__ycxNv",orcunheim:"style_orcunheim__GY_wH",felisgarde:"style_felisgarde__CnT61",ebisusbay:"style_ebisusbay__nZf7_",iron_bastion:"style_iron_bastion___Qg0V",dragon_roost:"style_dragon_roost__olgEW",ancestors_final_rest:"style_ancestors_final_rest__0OJEy",nyar_spire:"style_nyar_spire__tVtSd",ice_shrine:"style_ice_shrine__ajgro",omoikanes_athenaeum:"style_omoikanes_athenaeum__EfKGy",mitagi_retreat:"style_mitagi_retreat__um6Fp",mitamic_fissure:"style_mitamic_fissure__iHmd6",seashrine:"style_seashrine__0JpRF",classy_keep:"style_classy_keep__uzG0G",venoms_descent:"style_venoms_descent___ZgTs",infinite_nexus:"style_infinite_nexus__kTSd1",verdant_forest:"style_verdant_forest__ngPeB",explosion:"style_explosion__q4PA9",worldmap_label:"style_worldmap_label__ODft8",seashrine_label:"style_seashrine_label__zCV8D",mitamic_fissure_label:"style_mitamic_fissure_label__Y77KT",classy_keep_label:"style_classy_keep_label__VQg5X",felisgarde_label:"style_felisgarde_label__k16QK",verdant_forest_label:"style_verdant_forest_label__gvJRh",ebisusbay_label:"style_ebisusbay_label__u7IJh",buccaneer_beach_label:"style_buccaneer_beach_label__o29TO",omoikanes_athenaeum_label:"style_omoikanes_athenaeum_label__Ycvhi",mitagi_retreat_label:"style_mitagi_retreat_label__f_hre",ice_shrine_label:"style_ice_shrine_label__8GWaZ",clutch_of_fukurokuju_label:"style_clutch_of_fukurokuju_label__wP7Wu",orcunheim_label:"style_orcunheim_label__ZUs8V",nyar_spire_label:"style_nyar_spire_label__lWurN",dragon_roost_label:"style_dragon_roost_label__RF3dj",ancestors_final_rest_label:"style_ancestors_final_rest_label__Ebr9c",infinite_nexus_label:"style_infinite_nexus_label__KLze_",venoms_descent_label:"style_venoms_descent_label__EqH6a",iron_bastion_label:"style_iron_bastion_label__Q98K3",the_conflagration_label:"style_the_conflagration_label__hHQh2",volcanic_reach_label:"style_volcanic_reach_label__8KMgJ"}}}]);